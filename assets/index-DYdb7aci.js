Object.create,Object.defineProperty,Object.getOwnPropertyDescriptor,Object.getOwnPropertyNames,Object.getPrototypeOf,Object.prototype.hasOwnProperty;var e=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var t=e((e=>{var t=Symbol.for(`react.transitional.element`),n=Symbol.for(`react.portal`),r=Symbol.for(`react.fragment`),i=Symbol.for(`react.strict_mode`),a=Symbol.for(`react.profiler`),o=Symbol.for(`react.consumer`),s=Symbol.for(`react.context`),c=Symbol.for(`react.forward_ref`),l=Symbol.for(`react.suspense`),u=Symbol.for(`react.memo`),d=Symbol.for(`react.lazy`),f=Symbol.for(`react.activity`),p=Symbol.iterator;function m(e){return typeof e!=`object`||!e?null:(e=p&&e[p]||e[`@@iterator`],typeof e==`function`?e:null)}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,_={};function v(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||h}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if(typeof e!=`object`&&typeof e!=`function`&&e!=null)throw Error(`takes an object of state variables to update or a function which returns an object of state variables.`);this.updater.enqueueSetState(this,e,t,`setState`)},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,`forceUpdate`)};function y(){}y.prototype=v.prototype;function b(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||h}var x=b.prototype=new y;x.constructor=b,g(x,v.prototype),x.isPureReactComponent=!0;var ee=Array.isArray;function S(){}var C={H:null,A:null,T:null,S:null},w=Object.prototype.hasOwnProperty;function te(e,n,r){var i=r.ref;return{$$typeof:t,type:e,key:n,ref:i===void 0?null:i,props:r}}function ne(e,t){return te(e.type,t,e.props)}function re(e){return typeof e==`object`&&!!e&&e.$$typeof===t}function ie(e){var t={"=":`=0`,":":`=2`};return`$`+e.replace(/[=:]/g,function(e){return t[e]})}var ae=/\/+/g;function oe(e,t){return typeof e==`object`&&e&&e.key!=null?ie(``+e.key):t.toString(36)}function se(e){switch(e.status){case`fulfilled`:return e.value;case`rejected`:throw e.reason;default:switch(typeof e.status==`string`?e.then(S,S):(e.status=`pending`,e.then(function(t){e.status===`pending`&&(e.status=`fulfilled`,e.value=t)},function(t){e.status===`pending`&&(e.status=`rejected`,e.reason=t)})),e.status){case`fulfilled`:return e.value;case`rejected`:throw e.reason}}throw e}function ce(e,r,i,a,o){var s=typeof e;(s===`undefined`||s===`boolean`)&&(e=null);var c=!1;if(e===null)c=!0;else switch(s){case`bigint`:case`string`:case`number`:c=!0;break;case`object`:switch(e.$$typeof){case t:case n:c=!0;break;case d:return c=e._init,ce(c(e._payload),r,i,a,o)}}if(c)return o=o(e),c=a===``?`.`+oe(e,0):a,ee(o)?(i=``,c!=null&&(i=c.replace(ae,`$&/`)+`/`),ce(o,r,i,``,function(e){return e})):o!=null&&(re(o)&&(o=ne(o,i+(o.key==null||e&&e.key===o.key?``:(``+o.key).replace(ae,`$&/`)+`/`)+c)),r.push(o)),1;c=0;var l=a===``?`.`:a+`:`;if(ee(e))for(var u=0;u<e.length;u++)a=e[u],s=l+oe(a,u),c+=ce(a,r,i,s,o);else if(u=m(e),typeof u==`function`)for(e=u.call(e),u=0;!(a=e.next()).done;)a=a.value,s=l+oe(a,u++),c+=ce(a,r,i,s,o);else if(s===`object`){if(typeof e.then==`function`)return ce(se(e),r,i,a,o);throw r=String(e),Error(`Objects are not valid as a React child (found: `+(r===`[object Object]`?`object with keys {`+Object.keys(e).join(`, `)+`}`:r)+`). If you meant to render a collection of children, use an array instead.`)}return c}function T(e,t,n){if(e==null)return e;var r=[],i=0;return ce(e,r,``,``,function(e){return t.call(n,e,i++)}),r}function le(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(t){(e._status===0||e._status===-1)&&(e._status=1,e._result=t)},function(t){(e._status===0||e._status===-1)&&(e._status=2,e._result=t)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var E=typeof reportError==`function`?reportError:function(e){if(typeof window==`object`&&typeof window.ErrorEvent==`function`){var t=new window.ErrorEvent(`error`,{bubbles:!0,cancelable:!0,message:typeof e==`object`&&e&&typeof e.message==`string`?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process==`object`&&typeof process.emit==`function`){process.emit(`uncaughtException`,e);return}console.error(e)},D={map:T,forEach:function(e,t,n){T(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return T(e,function(){t++}),t},toArray:function(e){return T(e,function(e){return e})||[]},only:function(e){if(!re(e))throw Error(`React.Children.only expected to receive a single React element child.`);return e}};e.Activity=f,e.Children=D,e.Component=v,e.Fragment=r,e.Profiler=a,e.PureComponent=b,e.StrictMode=i,e.Suspense=l,e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,e.__COMPILER_RUNTIME={__proto__:null,c:function(e){return C.H.useMemoCache(e)}},e.cache=function(e){return function(){return e.apply(null,arguments)}},e.cacheSignal=function(){return null},e.cloneElement=function(e,t,n){if(e==null)throw Error(`The argument must be a React element, but you passed `+e+`.`);var r=g({},e.props),i=e.key;if(t!=null)for(a in t.key!==void 0&&(i=``+t.key),t)!w.call(t,a)||a===`key`||a===`__self`||a===`__source`||a===`ref`&&t.ref===void 0||(r[a]=t[a]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var o=Array(a),s=0;s<a;s++)o[s]=arguments[s+2];r.children=o}return te(e.type,i,r)},e.createContext=function(e){return e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:o,_context:e},e},e.createElement=function(e,t,n){var r,i={},a=null;if(t!=null)for(r in t.key!==void 0&&(a=``+t.key),t)w.call(t,r)&&r!==`key`&&r!==`__self`&&r!==`__source`&&(i[r]=t[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var s=Array(o),c=0;c<o;c++)s[c]=arguments[c+2];i.children=s}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return te(e,a,i)},e.createRef=function(){return{current:null}},e.forwardRef=function(e){return{$$typeof:c,render:e}},e.isValidElement=re,e.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:le}},e.memo=function(e,t){return{$$typeof:u,type:e,compare:t===void 0?null:t}},e.startTransition=function(e){var t=C.T,n={};C.T=n;try{var r=e(),i=C.S;i!==null&&i(n,r),typeof r==`object`&&r&&typeof r.then==`function`&&r.then(S,E)}catch(e){E(e)}finally{t!==null&&n.types!==null&&(t.types=n.types),C.T=t}},e.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},e.use=function(e){return C.H.use(e)},e.useActionState=function(e,t,n){return C.H.useActionState(e,t,n)},e.useCallback=function(e,t){return C.H.useCallback(e,t)},e.useContext=function(e){return C.H.useContext(e)},e.useDebugValue=function(){},e.useDeferredValue=function(e,t){return C.H.useDeferredValue(e,t)},e.useEffect=function(e,t){return C.H.useEffect(e,t)},e.useEffectEvent=function(e){return C.H.useEffectEvent(e)},e.useId=function(){return C.H.useId()},e.useImperativeHandle=function(e,t,n){return C.H.useImperativeHandle(e,t,n)},e.useInsertionEffect=function(e,t){return C.H.useInsertionEffect(e,t)},e.useLayoutEffect=function(e,t){return C.H.useLayoutEffect(e,t)},e.useMemo=function(e,t){return C.H.useMemo(e,t)},e.useOptimistic=function(e,t){return C.H.useOptimistic(e,t)},e.useReducer=function(e,t,n){return C.H.useReducer(e,t,n)},e.useRef=function(e){return C.H.useRef(e)},e.useState=function(e){return C.H.useState(e)},e.useSyncExternalStore=function(e,t,n){return C.H.useSyncExternalStore(e,t,n)},e.useTransition=function(){return C.H.useTransition()},e.version=`19.2.0`})),n=e(((e,n)=>{n.exports=t()})),r=e((e=>{function t(e,t){var n=e.length;e.push(t);a:for(;0<n;){var r=n-1>>>1,a=e[r];if(0<i(a,t))e[r]=t,e[n]=a,n=r;else break a}}function n(e){return e.length===0?null:e[0]}function r(e){if(e.length===0)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;a:for(var r=0,a=e.length,o=a>>>1;r<o;){var s=2*(r+1)-1,c=e[s],l=s+1,u=e[l];if(0>i(c,n))l<a&&0>i(u,c)?(e[r]=u,e[l]=n,r=l):(e[r]=c,e[s]=n,r=s);else if(l<a&&0>i(u,n))e[r]=u,e[l]=n,r=l;else break a}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return n===0?e.id-t.id:n}if(e.unstable_now=void 0,typeof performance==`object`&&typeof performance.now==`function`){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();e.unstable_now=function(){return o.now()-s}}var c=[],l=[],u=1,d=null,f=3,p=!1,m=!1,h=!1,g=!1,_=typeof setTimeout==`function`?setTimeout:null,v=typeof clearTimeout==`function`?clearTimeout:null,y=typeof setImmediate<`u`?setImmediate:null;function b(e){for(var i=n(l);i!==null;){if(i.callback===null)r(l);else if(i.startTime<=e)r(l),i.sortIndex=i.expirationTime,t(c,i);else break;i=n(l)}}function x(e){if(h=!1,b(e),!m)if(n(c)!==null)m=!0,ee||(ee=!0,re());else{var t=n(l);t!==null&&oe(x,t.startTime-e)}}var ee=!1,S=-1,C=5,w=-1;function te(){return g?!0:!(e.unstable_now()-w<C)}function ne(){if(g=!1,ee){var t=e.unstable_now();w=t;var i=!0;try{a:{m=!1,h&&(h=!1,v(S),S=-1),p=!0;var a=f;try{b:{for(b(t),d=n(c);d!==null&&!(d.expirationTime>t&&te());){var o=d.callback;if(typeof o==`function`){d.callback=null,f=d.priorityLevel;var s=o(d.expirationTime<=t);if(t=e.unstable_now(),typeof s==`function`){d.callback=s,b(t),i=!0;break b}d===n(c)&&r(c),b(t)}else r(c);d=n(c)}if(d!==null)i=!0;else{var u=n(l);u!==null&&oe(x,u.startTime-t),i=!1}}break a}finally{d=null,f=a,p=!1}i=void 0}}finally{i?re():ee=!1}}}var re;if(typeof y==`function`)re=function(){y(ne)};else if(typeof MessageChannel<`u`){var ie=new MessageChannel,ae=ie.port2;ie.port1.onmessage=ne,re=function(){ae.postMessage(null)}}else re=function(){_(ne,0)};function oe(t,n){S=_(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error(`forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported`):C=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},e.unstable_requestPaint=function(){g=!0},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},e.unstable_scheduleCallback=function(r,i,a){var o=e.unstable_now();switch(typeof a==`object`&&a?(a=a.delay,a=typeof a==`number`&&0<a?o+a:o):a=o,r){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return s=a+s,r={id:u++,callback:i,priorityLevel:r,startTime:a,expirationTime:s,sortIndex:-1},a>o?(r.sortIndex=a,t(l,r),n(c)===null&&r===n(l)&&(h?(v(S),S=-1):h=!0,oe(x,a-o))):(r.sortIndex=s,t(c,r),m||p||(m=!0,ee||(ee=!0,re()))),r},e.unstable_shouldYield=te,e.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}})),i=e(((e,t)=>{t.exports=r()})),a=e((e=>{var t=n();function r(e){var t=`https://react.dev/errors/`+e;if(1<arguments.length){t+=`?args[]=`+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+=`&args[]=`+encodeURIComponent(arguments[n])}return`Minified React error #`+e+`; visit `+t+` for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`}function i(){}var a={d:{f:i,r:function(){throw Error(r(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for(`react.portal`);function s(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:r==null?null:``+r,children:e,containerInfo:t,implementation:n}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(e,t){if(e===`font`)return``;if(typeof t==`string`)return t===`use-credentials`?t:``}e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,e.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(r(299));return s(e,t,null,n)},e.flushSync=function(e){var t=c.T,n=a.p;try{if(c.T=null,a.p=2,e)return e()}finally{c.T=t,a.p=n,a.d.f()}},e.preconnect=function(e,t){typeof e==`string`&&(t?(t=t.crossOrigin,t=typeof t==`string`?t===`use-credentials`?t:``:void 0):t=null,a.d.C(e,t))},e.prefetchDNS=function(e){typeof e==`string`&&a.d.D(e)},e.preinit=function(e,t){if(typeof e==`string`&&t&&typeof t.as==`string`){var n=t.as,r=l(n,t.crossOrigin),i=typeof t.integrity==`string`?t.integrity:void 0,o=typeof t.fetchPriority==`string`?t.fetchPriority:void 0;n===`style`?a.d.S(e,typeof t.precedence==`string`?t.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:o}):n===`script`&&a.d.X(e,{crossOrigin:r,integrity:i,fetchPriority:o,nonce:typeof t.nonce==`string`?t.nonce:void 0})}},e.preinitModule=function(e,t){if(typeof e==`string`)if(typeof t==`object`&&t){if(t.as==null||t.as===`script`){var n=l(t.as,t.crossOrigin);a.d.M(e,{crossOrigin:n,integrity:typeof t.integrity==`string`?t.integrity:void 0,nonce:typeof t.nonce==`string`?t.nonce:void 0})}}else t??a.d.M(e)},e.preload=function(e,t){if(typeof e==`string`&&typeof t==`object`&&t&&typeof t.as==`string`){var n=t.as,r=l(n,t.crossOrigin);a.d.L(e,n,{crossOrigin:r,integrity:typeof t.integrity==`string`?t.integrity:void 0,nonce:typeof t.nonce==`string`?t.nonce:void 0,type:typeof t.type==`string`?t.type:void 0,fetchPriority:typeof t.fetchPriority==`string`?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy==`string`?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet==`string`?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes==`string`?t.imageSizes:void 0,media:typeof t.media==`string`?t.media:void 0})}},e.preloadModule=function(e,t){if(typeof e==`string`)if(t){var n=l(t.as,t.crossOrigin);a.d.m(e,{as:typeof t.as==`string`&&t.as!==`script`?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity==`string`?t.integrity:void 0})}else a.d.m(e)},e.requestFormReset=function(e){a.d.r(e)},e.unstable_batchedUpdates=function(e,t){return e(t)},e.useFormState=function(e,t,n){return c.H.useFormState(e,t,n)},e.useFormStatus=function(){return c.H.useHostTransitionStatus()},e.version=`19.2.0`})),o=e(((e,t)=>{function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>`u`||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=`function`))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}n(),t.exports=a()})),s=e((e=>{var t=i(),r=n(),a=o();function s(e){var t=`https://react.dev/errors/`+e;if(1<arguments.length){t+=`?args[]=`+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+=`&args[]=`+encodeURIComponent(arguments[n])}return`Minified React error #`+e+`; visit `+t+` for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function u(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function d(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function f(e){if(l(e)!==e)throw Error(s(188))}function p(e){var t=e.alternate;if(!t){if(t=l(e),t===null)throw Error(s(188));return t===e?e:null}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return f(i),e;if(a===r)return f(i),t;a=a.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,c=i.child;c;){if(c===n){o=!0,n=i,r=a;break}if(c===r){o=!0,r=i,n=a;break}c=c.sibling}if(!o){for(c=a.child;c;){if(c===n){o=!0,n=a,r=i;break}if(c===r){o=!0,r=a,n=i;break}c=c.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(n.tag!==3)throw Error(s(188));return n.stateNode.current===n?e:t}function m(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=m(e),t!==null)return t;e=e.sibling}return null}var h=Object.assign,g=Symbol.for(`react.element`),_=Symbol.for(`react.transitional.element`),v=Symbol.for(`react.portal`),y=Symbol.for(`react.fragment`),b=Symbol.for(`react.strict_mode`),x=Symbol.for(`react.profiler`),ee=Symbol.for(`react.consumer`),S=Symbol.for(`react.context`),C=Symbol.for(`react.forward_ref`),w=Symbol.for(`react.suspense`),te=Symbol.for(`react.suspense_list`),ne=Symbol.for(`react.memo`),re=Symbol.for(`react.lazy`),ie=Symbol.for(`react.activity`),ae=Symbol.for(`react.memo_cache_sentinel`),oe=Symbol.iterator;function se(e){return typeof e!=`object`||!e?null:(e=oe&&e[oe]||e[`@@iterator`],typeof e==`function`?e:null)}var ce=Symbol.for(`react.client.reference`);function T(e){if(e==null)return null;if(typeof e==`function`)return e.$$typeof===ce?null:e.displayName||e.name||null;if(typeof e==`string`)return e;switch(e){case y:return`Fragment`;case x:return`Profiler`;case b:return`StrictMode`;case w:return`Suspense`;case te:return`SuspenseList`;case ie:return`Activity`}if(typeof e==`object`)switch(e.$$typeof){case v:return`Portal`;case S:return e.displayName||`Context`;case ee:return(e._context.displayName||`Context`)+`.Consumer`;case C:var t=e.render;return e=e.displayName,e||=(e=t.displayName||t.name||``,e===``?`ForwardRef`:`ForwardRef(`+e+`)`),e;case ne:return t=e.displayName||null,t===null?T(e.type)||`Memo`:t;case re:t=e._payload,e=e._init;try{return T(e(t))}catch{}}return null}var le=Array.isArray,E=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue={pending:!1,data:null,method:null,action:null},de=[],fe=-1;function pe(e){return{current:e}}function me(e){0>fe||(e.current=de[fe],de[fe]=null,fe--)}function he(e,t){fe++,de[fe]=e.current,e.current=t}var ge=pe(null),_e=pe(null),ve=pe(null),ye=pe(null);function be(e,t){switch(he(ve,t),he(_e,e),he(ge,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Gd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Gd(t),e=Kd(t,e);else switch(e){case`svg`:e=1;break;case`math`:e=2;break;default:e=0}}me(ge),he(ge,e)}function xe(){me(ge),me(_e),me(ve)}function Se(e){e.memoizedState!==null&&he(ye,e);var t=ge.current,n=Kd(t,e.type);t!==n&&(he(_e,e),he(ge,n))}function Ce(e){_e.current===e&&(me(ge),me(_e)),ye.current===e&&(me(ye),tp._currentValue=ue)}var we,Te;function Ee(e){if(we===void 0)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);we=t&&t[1]||``,Te=-1<e.stack.indexOf(`
    at`)?` (<anonymous>)`:-1<e.stack.indexOf(`@`)?`@unknown:0:0`:``}return`
`+we+e+Te}var De=!1;function Oe(e,t){if(!e||De)return``;De=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,`props`,{set:function(){throw Error()}}),typeof Reflect==`object`&&Reflect.construct){try{Reflect.construct(n,[])}catch(e){var r=e}Reflect.construct(e,[],n)}else{try{n.call()}catch(e){r=e}e.call(n.prototype)}}else{try{throw Error()}catch(e){r=e}(n=e())&&typeof n.catch==`function`&&n.catch(function(){})}}catch(e){if(e&&r&&typeof e.stack==`string`)return[e.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName=`DetermineComponentFrameRoot`;var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,`name`);i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,`name`,{value:`DetermineComponentFrameRoot`});var a=r.DetermineComponentFrameRoot(),o=a[0],s=a[1];if(o&&s){var c=o.split(`
`),l=s.split(`
`);for(i=r=0;r<c.length&&!c[r].includes(`DetermineComponentFrameRoot`);)r++;for(;i<l.length&&!l[i].includes(`DetermineComponentFrameRoot`);)i++;if(r===c.length||i===l.length)for(r=c.length-1,i=l.length-1;1<=r&&0<=i&&c[r]!==l[i];)i--;for(;1<=r&&0<=i;r--,i--)if(c[r]!==l[i]){if(r!==1||i!==1)do if(r--,i--,0>i||c[r]!==l[i]){var u=`
`+c[r].replace(` at new `,` at `);return e.displayName&&u.includes(`<anonymous>`)&&(u=u.replace(`<anonymous>`,e.displayName)),u}while(1<=r&&0<=i);break}}}finally{De=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:``)?Ee(n):``}function ke(e,t){switch(e.tag){case 26:case 27:case 5:return Ee(e.type);case 16:return Ee(`Lazy`);case 13:return e.child!==t&&t!==null?Ee(`Suspense Fallback`):Ee(`Suspense`);case 19:return Ee(`SuspenseList`);case 0:case 15:return Oe(e.type,!1);case 11:return Oe(e.type.render,!1);case 1:return Oe(e.type,!0);case 31:return Ee(`Activity`);default:return``}}function Ae(e){try{var t=``,n=null;do t+=ke(e,n),n=e,e=e.return;while(e);return t}catch(e){return`
Error generating stack: `+e.message+`
`+e.stack}}var je=Object.prototype.hasOwnProperty,Me=t.unstable_scheduleCallback,Ne=t.unstable_cancelCallback,Pe=t.unstable_shouldYield,Fe=t.unstable_requestPaint,Ie=t.unstable_now,Le=t.unstable_getCurrentPriorityLevel,Re=t.unstable_ImmediatePriority,ze=t.unstable_UserBlockingPriority,Be=t.unstable_NormalPriority,O=t.unstable_LowPriority,Ve=t.unstable_IdlePriority,He=t.log,Ue=t.unstable_setDisableYieldValue,We=null,Ge=null;function Ke(e){if(typeof He==`function`&&Ue(e),Ge&&typeof Ge.setStrictMode==`function`)try{Ge.setStrictMode(We,e)}catch{}}var qe=Math.clz32?Math.clz32:Xe,Je=Math.log,Ye=Math.LN2;function Xe(e){return e>>>=0,e===0?32:31-(Je(e)/Ye|0)|0}var Ze=256,Qe=262144,$e=4194304;function et(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function tt(e,t,n){var r=e.pendingLanes;if(r===0)return 0;var i=0,a=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var s=r&134217727;return s===0?(s=r&~a,s===0?o===0?n||(n=r&~e,n!==0&&(i=et(n))):i=et(o):i=et(s)):(r=s&~a,r===0?(o&=s,o===0?n||(n=s&~e,n!==0&&(i=et(n))):i=et(o)):i=et(r)),i===0?0:t!==0&&t!==i&&(t&a)===0&&(a=i&-i,n=t&-t,a>=n||a===32&&n&4194048)?t:i}function nt(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function rt(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function it(){var e=$e;return $e<<=1,!($e&62914560)&&($e=4194304),e}function at(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ot(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function st(e,t,n,r,i,a){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var s=e.entanglements,c=e.expirationTimes,l=e.hiddenUpdates;for(n=o&~n;0<n;){var u=31-qe(n),d=1<<u;s[u]=0,c[u]=-1;var f=l[u];if(f!==null)for(l[u]=null,u=0;u<f.length;u++){var p=f[u];p!==null&&(p.lane&=-536870913)}n&=~d}r!==0&&ct(e,r,0),a!==0&&i===0&&e.tag!==0&&(e.suspendedLanes|=a&~(o&~t))}function ct(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-qe(t);e.entangledLanes|=t,e.entanglements[r]=e.entanglements[r]|1073741824|n&261930}function lt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-qe(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function ut(e,t){var n=t&-t;return n=n&42?1:dt(n),(n&(e.suspendedLanes|t))===0?n:0}function dt(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function ft(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function pt(){var e=D.p;return e===0?(e=window.event,e===void 0?32:_p(e.type)):e}function mt(e,t){var n=D.p;try{return D.p=e,t()}finally{D.p=n}}var ht=Math.random().toString(36).slice(2),gt=`__reactFiber$`+ht,_t=`__reactProps$`+ht,vt=`__reactContainer$`+ht,yt=`__reactEvents$`+ht,bt=`__reactListeners$`+ht,xt=`__reactHandles$`+ht,St=`__reactResources$`+ht,Ct=`__reactMarker$`+ht;function wt(e){delete e[gt],delete e[_t],delete e[yt],delete e[bt],delete e[xt]}function Tt(e){var t=e[gt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[vt]||n[gt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=hf(e);e!==null;){if(n=e[gt])return n;e=hf(e)}return t}e=n,n=e.parentNode}return null}function Et(e){if(e=e[gt]||e[vt]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Dt(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(s(33))}function Ot(e){var t=e[St];return t||=e[St]={hoistableStyles:new Map,hoistableScripts:new Map},t}function kt(e){e[Ct]=!0}var At=new Set,jt={};function Mt(e,t){Nt(e,t),Nt(e+`Capture`,t)}function Nt(e,t){for(jt[e]=t,e=0;e<t.length;e++)At.add(t[e])}var Pt=RegExp(`^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$`),Ft={},It={};function Lt(e){return je.call(It,e)?!0:je.call(Ft,e)?!1:Pt.test(e)?It[e]=!0:(Ft[e]=!0,!1)}function Rt(e,t,n){if(Lt(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case`undefined`:case`function`:case`symbol`:e.removeAttribute(t);return;case`boolean`:var r=t.toLowerCase().slice(0,5);if(r!==`data-`&&r!==`aria-`){e.removeAttribute(t);return}}e.setAttribute(t,``+n)}}function zt(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case`undefined`:case`function`:case`symbol`:case`boolean`:e.removeAttribute(t);return}e.setAttribute(t,``+n)}}function Bt(e,t,n,r){if(r===null)e.removeAttribute(n);else{switch(typeof r){case`undefined`:case`function`:case`symbol`:case`boolean`:e.removeAttribute(n);return}e.setAttributeNS(t,n,``+r)}}function k(e){switch(typeof e){case`bigint`:case`boolean`:case`number`:case`string`:case`undefined`:return e;case`object`:return e;default:return``}}function Vt(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()===`input`&&(t===`checkbox`||t===`radio`)}function Ht(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&r!==void 0&&typeof r.get==`function`&&typeof r.set==`function`){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=``+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=``+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ut(e){if(!e._valueTracker){var t=Vt(e)?`checked`:`value`;e._valueTracker=Ht(e,t,``+e[t])}}function Wt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r=``;return e&&(r=Vt(e)?e.checked?`true`:`false`:e.value),e=r,e===n?!1:(t.setValue(e),!0)}function Gt(e){if(e||=typeof document<`u`?document:void 0,e===void 0)return null;try{return e.activeElement||e.body}catch{return e.body}}var Kt=/[\n"\\]/g;function qt(e){return e.replace(Kt,function(e){return`\\`+e.charCodeAt(0).toString(16)+` `})}function Jt(e,t,n,r,i,a,o,s){e.name=``,o!=null&&typeof o!=`function`&&typeof o!=`symbol`&&typeof o!=`boolean`?e.type=o:e.removeAttribute(`type`),t==null?o!==`submit`&&o!==`reset`||e.removeAttribute(`value`):o===`number`?(t===0&&e.value===``||e.value!=t)&&(e.value=``+k(t)):e.value!==``+k(t)&&(e.value=``+k(t)),t==null?n==null?r!=null&&e.removeAttribute(`value`):Xt(e,o,k(n)):Xt(e,o,k(t)),i==null&&a!=null&&(e.defaultChecked=!!a),i!=null&&(e.checked=i&&typeof i!=`function`&&typeof i!=`symbol`),s!=null&&typeof s!=`function`&&typeof s!=`symbol`&&typeof s!=`boolean`?e.name=``+k(s):e.removeAttribute(`name`)}function Yt(e,t,n,r,i,a,o,s){if(a!=null&&typeof a!=`function`&&typeof a!=`symbol`&&typeof a!=`boolean`&&(e.type=a),t!=null||n!=null){if(!(a!==`submit`&&a!==`reset`||t!=null)){Ut(e);return}n=n==null?``:``+k(n),t=t==null?n:``+k(t),s||t===e.value||(e.value=t),e.defaultValue=t}r??=i,r=typeof r!=`function`&&typeof r!=`symbol`&&!!r,e.checked=s?e.checked:!!r,e.defaultChecked=!!r,o!=null&&typeof o!=`function`&&typeof o!=`symbol`&&typeof o!=`boolean`&&(e.name=o),Ut(e)}function Xt(e,t,n){t===`number`&&Gt(e.ownerDocument)===e||e.defaultValue===``+n||(e.defaultValue=``+n)}function Zt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t[`$`+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty(`$`+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=``+k(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Qt(e,t,n){if(t!=null&&(t=``+k(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n==null?``:``+k(n)}function $t(e,t,n,r){if(t==null){if(r!=null){if(n!=null)throw Error(s(92));if(le(r)){if(1<r.length)throw Error(s(93));r=r[0]}n=r}n??=``,t=n}n=k(t),e.defaultValue=n,r=e.textContent,r===n&&r!==``&&r!==null&&(e.value=r),Ut(e)}function en(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var tn=new Set(`animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp`.split(` `));function nn(e,t,n){var r=t.indexOf(`--`)===0;n==null||typeof n==`boolean`||n===``?r?e.setProperty(t,``):t===`float`?e.cssFloat=``:e[t]=``:r?e.setProperty(t,n):typeof n!=`number`||n===0||tn.has(t)?t===`float`?e.cssFloat=n:e[t]=(``+n).trim():e[t]=n+`px`}function rn(e,t,n){if(t!=null&&typeof t!=`object`)throw Error(s(62));if(e=e.style,n!=null){for(var r in n)!n.hasOwnProperty(r)||t!=null&&t.hasOwnProperty(r)||(r.indexOf(`--`)===0?e.setProperty(r,``):r===`float`?e.cssFloat=``:e[r]=``);for(var i in t)r=t[i],t.hasOwnProperty(i)&&n[i]!==r&&nn(e,i,r)}else for(var a in t)t.hasOwnProperty(a)&&nn(e,a,t[a])}function an(e){if(e.indexOf(`-`)===-1)return!1;switch(e){case`annotation-xml`:case`color-profile`:case`font-face`:case`font-face-src`:case`font-face-uri`:case`font-face-format`:case`font-face-name`:case`missing-glyph`:return!1;default:return!0}}var on=new Map([[`acceptCharset`,`accept-charset`],[`htmlFor`,`for`],[`httpEquiv`,`http-equiv`],[`crossOrigin`,`crossorigin`],[`accentHeight`,`accent-height`],[`alignmentBaseline`,`alignment-baseline`],[`arabicForm`,`arabic-form`],[`baselineShift`,`baseline-shift`],[`capHeight`,`cap-height`],[`clipPath`,`clip-path`],[`clipRule`,`clip-rule`],[`colorInterpolation`,`color-interpolation`],[`colorInterpolationFilters`,`color-interpolation-filters`],[`colorProfile`,`color-profile`],[`colorRendering`,`color-rendering`],[`dominantBaseline`,`dominant-baseline`],[`enableBackground`,`enable-background`],[`fillOpacity`,`fill-opacity`],[`fillRule`,`fill-rule`],[`floodColor`,`flood-color`],[`floodOpacity`,`flood-opacity`],[`fontFamily`,`font-family`],[`fontSize`,`font-size`],[`fontSizeAdjust`,`font-size-adjust`],[`fontStretch`,`font-stretch`],[`fontStyle`,`font-style`],[`fontVariant`,`font-variant`],[`fontWeight`,`font-weight`],[`glyphName`,`glyph-name`],[`glyphOrientationHorizontal`,`glyph-orientation-horizontal`],[`glyphOrientationVertical`,`glyph-orientation-vertical`],[`horizAdvX`,`horiz-adv-x`],[`horizOriginX`,`horiz-origin-x`],[`imageRendering`,`image-rendering`],[`letterSpacing`,`letter-spacing`],[`lightingColor`,`lighting-color`],[`markerEnd`,`marker-end`],[`markerMid`,`marker-mid`],[`markerStart`,`marker-start`],[`overlinePosition`,`overline-position`],[`overlineThickness`,`overline-thickness`],[`paintOrder`,`paint-order`],[`panose-1`,`panose-1`],[`pointerEvents`,`pointer-events`],[`renderingIntent`,`rendering-intent`],[`shapeRendering`,`shape-rendering`],[`stopColor`,`stop-color`],[`stopOpacity`,`stop-opacity`],[`strikethroughPosition`,`strikethrough-position`],[`strikethroughThickness`,`strikethrough-thickness`],[`strokeDasharray`,`stroke-dasharray`],[`strokeDashoffset`,`stroke-dashoffset`],[`strokeLinecap`,`stroke-linecap`],[`strokeLinejoin`,`stroke-linejoin`],[`strokeMiterlimit`,`stroke-miterlimit`],[`strokeOpacity`,`stroke-opacity`],[`strokeWidth`,`stroke-width`],[`textAnchor`,`text-anchor`],[`textDecoration`,`text-decoration`],[`textRendering`,`text-rendering`],[`transformOrigin`,`transform-origin`],[`underlinePosition`,`underline-position`],[`underlineThickness`,`underline-thickness`],[`unicodeBidi`,`unicode-bidi`],[`unicodeRange`,`unicode-range`],[`unitsPerEm`,`units-per-em`],[`vAlphabetic`,`v-alphabetic`],[`vHanging`,`v-hanging`],[`vIdeographic`,`v-ideographic`],[`vMathematical`,`v-mathematical`],[`vectorEffect`,`vector-effect`],[`vertAdvY`,`vert-adv-y`],[`vertOriginX`,`vert-origin-x`],[`vertOriginY`,`vert-origin-y`],[`wordSpacing`,`word-spacing`],[`writingMode`,`writing-mode`],[`xmlnsXlink`,`xmlns:xlink`],[`xHeight`,`x-height`]]),sn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function cn(e){return sn.test(``+e)?`javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')`:e}function ln(){}var un=null;function dn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var fn=null,pn=null;function mn(e){var t=Et(e);if(t&&(e=t.stateNode)){var n=e[_t]||null;a:switch(e=t.stateNode,t.type){case`input`:if(Jt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type===`radio`&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll(`input[name="`+qt(``+t)+`"][type="radio"]`),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=r[_t]||null;if(!i)throw Error(s(90));Jt(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)r=n[t],r.form===e.form&&Wt(r)}break a;case`textarea`:Qt(e,n.value,n.defaultValue);break a;case`select`:t=n.value,t!=null&&Zt(e,!!n.multiple,t,!1)}}}var hn=!1;function gn(e,t,n){if(hn)return e(t,n);hn=!0;try{return e(t)}finally{if(hn=!1,(fn!==null||pn!==null)&&(Cu(),fn&&(t=fn,e=pn,pn=fn=null,mn(t),e)))for(t=0;t<e.length;t++)mn(e[t])}}function _n(e,t){var n=e.stateNode;if(n===null)return null;var r=n[_t]||null;if(r===null)return null;n=r[t];a:switch(t){case`onClick`:case`onClickCapture`:case`onDoubleClick`:case`onDoubleClickCapture`:case`onMouseDown`:case`onMouseDownCapture`:case`onMouseMove`:case`onMouseMoveCapture`:case`onMouseUp`:case`onMouseUpCapture`:case`onMouseEnter`:(r=!r.disabled)||(e=e.type,r=!(e===`button`||e===`input`||e===`select`||e===`textarea`)),e=!r;break a;default:e=!1}if(e)return null;if(n&&typeof n!=`function`)throw Error(s(231,t,typeof n));return n}var vn=!(typeof window>`u`||window.document===void 0||window.document.createElement===void 0),yn=!1;if(vn)try{var bn={};Object.defineProperty(bn,`passive`,{get:function(){yn=!0}}),window.addEventListener(`test`,bn,bn),window.removeEventListener(`test`,bn,bn)}catch{yn=!1}var xn=null,Sn=null,Cn=null;function wn(){if(Cn)return Cn;var e,t=Sn,n=t.length,r,i=`value`in xn?xn.value:xn.textContent,a=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[a-r];r++);return Cn=i.slice(e,1<r?1-r:void 0)}function Tn(e){var t=e.keyCode;return`charCode`in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function En(){return!0}function Dn(){return!1}function On(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented==null?!1===i.returnValue:i.defaultPrevented)?En:Dn,this.isPropagationStopped=Dn,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!=`unknown`&&(e.returnValue=!1),this.isDefaultPrevented=En)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!=`unknown`&&(e.cancelBubble=!0),this.isPropagationStopped=En)},persist:function(){},isPersistent:En}),t}var kn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},An=On(kn),jn=h({},kn,{view:0,detail:0}),Mn=On(jn),Nn,Pn,Fn,In=h({},jn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kn,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return`movementX`in e?e.movementX:(e!==Fn&&(Fn&&e.type===`mousemove`?(Nn=e.screenX-Fn.screenX,Pn=e.screenY-Fn.screenY):Pn=Nn=0,Fn=e),Nn)},movementY:function(e){return`movementY`in e?e.movementY:Pn}}),Ln=On(In),Rn=On(h({},In,{dataTransfer:0})),zn=On(h({},jn,{relatedTarget:0})),Bn=On(h({},kn,{animationName:0,elapsedTime:0,pseudoElement:0})),Vn=On(h({},kn,{clipboardData:function(e){return`clipboardData`in e?e.clipboardData:window.clipboardData}})),Hn=On(h({},kn,{data:0})),Un={Esc:`Escape`,Spacebar:` `,Left:`ArrowLeft`,Up:`ArrowUp`,Right:`ArrowRight`,Down:`ArrowDown`,Del:`Delete`,Win:`OS`,Menu:`ContextMenu`,Apps:`ContextMenu`,Scroll:`ScrollLock`,MozPrintableKey:`Unidentified`},Wn={8:`Backspace`,9:`Tab`,12:`Clear`,13:`Enter`,16:`Shift`,17:`Control`,18:`Alt`,19:`Pause`,20:`CapsLock`,27:`Escape`,32:` `,33:`PageUp`,34:`PageDown`,35:`End`,36:`Home`,37:`ArrowLeft`,38:`ArrowUp`,39:`ArrowRight`,40:`ArrowDown`,45:`Insert`,46:`Delete`,112:`F1`,113:`F2`,114:`F3`,115:`F4`,116:`F5`,117:`F6`,118:`F7`,119:`F8`,120:`F9`,121:`F10`,122:`F11`,123:`F12`,144:`NumLock`,145:`ScrollLock`,224:`Meta`},A={Alt:`altKey`,Control:`ctrlKey`,Meta:`metaKey`,Shift:`shiftKey`};function Gn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=A[e])?!!t[e]:!1}function Kn(){return Gn}var qn=On(h({},jn,{key:function(e){if(e.key){var t=Un[e.key]||e.key;if(t!==`Unidentified`)return t}return e.type===`keypress`?(e=Tn(e),e===13?`Enter`:String.fromCharCode(e)):e.type===`keydown`||e.type===`keyup`?Wn[e.keyCode]||`Unidentified`:``},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kn,charCode:function(e){return e.type===`keypress`?Tn(e):0},keyCode:function(e){return e.type===`keydown`||e.type===`keyup`?e.keyCode:0},which:function(e){return e.type===`keypress`?Tn(e):e.type===`keydown`||e.type===`keyup`?e.keyCode:0}})),j=On(h({},In,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Jn=On(h({},jn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kn})),M=On(h({},kn,{propertyName:0,elapsedTime:0,pseudoElement:0})),N=On(h({},In,{deltaX:function(e){return`deltaX`in e?e.deltaX:`wheelDeltaX`in e?-e.wheelDeltaX:0},deltaY:function(e){return`deltaY`in e?e.deltaY:`wheelDeltaY`in e?-e.wheelDeltaY:`wheelDelta`in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),P=On(h({},kn,{newState:0,oldState:0})),F=[9,13,27,32],Yn=vn&&`CompositionEvent`in window,Xn=null;vn&&`documentMode`in document&&(Xn=document.documentMode);var Zn=vn&&`TextEvent`in window&&!Xn,Qn=vn&&(!Yn||Xn&&8<Xn&&11>=Xn),$n=` `,er=!1;function tr(e,t){switch(e){case`keyup`:return F.indexOf(t.keyCode)!==-1;case`keydown`:return t.keyCode!==229;case`keypress`:case`mousedown`:case`focusout`:return!0;default:return!1}}function nr(e){return e=e.detail,typeof e==`object`&&`data`in e?e.data:null}var rr=!1;function ir(e,t){switch(e){case`compositionend`:return nr(t);case`keypress`:return t.which===32?(er=!0,$n):null;case`textInput`:return e=t.data,e===$n&&er?null:e;default:return null}}function ar(e,t){if(rr)return e===`compositionend`||!Yn&&tr(e,t)?(e=wn(),Cn=Sn=xn=null,rr=!1,e):null;switch(e){case`paste`:return null;case`keypress`:if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case`compositionend`:return Qn&&t.locale!==`ko`?null:t.data;default:return null}}var I={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function or(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t===`input`?!!I[e.type]:t===`textarea`}function sr(e,t,n,r){fn?pn?pn.push(r):pn=[r]:fn=r,t=kd(t,`onChange`),0<t.length&&(n=new An(`onChange`,`change`,null,n,r),e.push({event:n,listeners:t}))}var cr=null,lr=null;function ur(e){Sd(e,0)}function dr(e){if(Wt(Dt(e)))return e}function fr(e,t){if(e===`change`)return t}var pr=!1;if(vn){var mr;if(vn){var hr=`oninput`in document;if(!hr){var L=document.createElement(`div`);L.setAttribute(`oninput`,`return;`),hr=typeof L.oninput==`function`}mr=hr}else mr=!1;pr=mr&&(!document.documentMode||9<document.documentMode)}function gr(){cr&&(cr.detachEvent(`onpropertychange`,_r),lr=cr=null)}function _r(e){if(e.propertyName===`value`&&dr(lr)){var t=[];sr(t,lr,e,dn(e)),gn(ur,t)}}function vr(e,t,n){e===`focusin`?(gr(),cr=t,lr=n,cr.attachEvent(`onpropertychange`,_r)):e===`focusout`&&gr()}function yr(e){if(e===`selectionchange`||e===`keyup`||e===`keydown`)return dr(lr)}function br(e,t){if(e===`click`)return dr(t)}function xr(e,t){if(e===`input`||e===`change`)return dr(t)}function Sr(e,t){return e===t&&(e!==0||1/e==1/t)||e!==e&&t!==t}var Cr=typeof Object.is==`function`?Object.is:Sr;function wr(e,t){if(Cr(e,t))return!0;if(typeof e!=`object`||!e||typeof t!=`object`||!t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!je.call(t,i)||!Cr(e[i],t[i]))return!1}return!0}function Tr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Er(e,t){var n=Tr(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}a:{for(;n;){if(n.nextSibling){n=n.nextSibling;break a}n=n.parentNode}n=void 0}n=Tr(n)}}function Dr(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Dr(e,t.parentNode):`contains`in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Or(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Gt(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href==`string`}catch{n=!1}if(n)e=t.contentWindow;else break;t=Gt(e.document)}return t}function R(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t===`input`&&(e.type===`text`||e.type===`search`||e.type===`tel`||e.type===`url`||e.type===`password`)||t===`textarea`||e.contentEditable===`true`)}var kr=vn&&`documentMode`in document&&11>=document.documentMode,Ar=null,jr=null,Mr=null,Nr=!1;function Pr(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Nr||Ar==null||Ar!==Gt(r)||(r=Ar,`selectionStart`in r&&R(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Mr&&wr(Mr,r)||(Mr=r,r=kd(jr,`onSelect`),0<r.length&&(t=new An(`onSelect`,`select`,null,t,n),e.push({event:t,listeners:r}),t.target=Ar)))}function Fr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n[`Webkit`+e]=`webkit`+t,n[`Moz`+e]=`moz`+t,n}var Ir={animationend:Fr(`Animation`,`AnimationEnd`),animationiteration:Fr(`Animation`,`AnimationIteration`),animationstart:Fr(`Animation`,`AnimationStart`),transitionrun:Fr(`Transition`,`TransitionRun`),transitionstart:Fr(`Transition`,`TransitionStart`),transitioncancel:Fr(`Transition`,`TransitionCancel`),transitionend:Fr(`Transition`,`TransitionEnd`)},Lr={},z={};vn&&(z=document.createElement(`div`).style,`AnimationEvent`in window||(delete Ir.animationend.animation,delete Ir.animationiteration.animation,delete Ir.animationstart.animation),`TransitionEvent`in window||delete Ir.transitionend.transition);function Rr(e){if(Lr[e])return Lr[e];if(!Ir[e])return e;var t=Ir[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in z)return Lr[e]=t[n];return e}var zr=Rr(`animationend`),Br=Rr(`animationiteration`),Vr=Rr(`animationstart`),Hr=Rr(`transitionrun`),Ur=Rr(`transitionstart`),Wr=Rr(`transitioncancel`),Gr=Rr(`transitionend`),Kr=new Map,qr=`abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel`.split(` `);qr.push(`scrollEnd`);function Jr(e,t){Kr.set(e,t),Mt(t,[e])}var Yr=typeof reportError==`function`?reportError:function(e){if(typeof window==`object`&&typeof window.ErrorEvent==`function`){var t=new window.ErrorEvent(`error`,{bubbles:!0,cancelable:!0,message:typeof e==`object`&&e&&typeof e.message==`string`?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process==`object`&&typeof process.emit==`function`){process.emit(`uncaughtException`,e);return}console.error(e)},Xr=[],Zr=0,Qr=0;function $r(){for(var e=Zr,t=Qr=Zr=0;t<e;){var n=Xr[t];Xr[t++]=null;var r=Xr[t];Xr[t++]=null;var i=Xr[t];Xr[t++]=null;var a=Xr[t];if(Xr[t++]=null,r!==null&&i!==null){var o=r.pending;o===null?i.next=i:(i.next=o.next,o.next=i),r.pending=i}a!==0&&ri(n,i,a)}}function ei(e,t,n,r){Xr[Zr++]=e,Xr[Zr++]=t,Xr[Zr++]=n,Xr[Zr++]=r,Qr|=r,e.lanes|=r,e=e.alternate,e!==null&&(e.lanes|=r)}function ti(e,t,n,r){return ei(e,t,n,r),ii(e)}function ni(e,t){return ei(e,null,null,t),ii(e)}function ri(e,t,n){e.lanes|=n;var r=e.alternate;r!==null&&(r.lanes|=n);for(var i=!1,a=e.return;a!==null;)a.childLanes|=n,r=a.alternate,r!==null&&(r.childLanes|=n),a.tag===22&&(e=a.stateNode,e===null||e._visibility&1||(i=!0)),e=a,a=a.return;return e.tag===3?(a=e.stateNode,i&&t!==null&&(i=31-qe(n),e=a.hiddenUpdates,r=e[i],r===null?e[i]=[t]:r.push(t),t.lane=n|536870912),a):null}function ii(e){if(50<mu)throw mu=0,hu=null,Error(s(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ai={};function oi(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function si(e,t,n,r){return new oi(e,t,n,r)}function ci(e){return e=e.prototype,!(!e||!e.isReactComponent)}function li(e,t){var n=e.alternate;return n===null?(n=si(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function ui(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function di(e,t,n,r,i,a){var o=0;if(r=e,typeof e==`function`)ci(e)&&(o=1);else if(typeof e==`string`)o=Kf(e,n,ge.current)?26:e===`html`||e===`head`||e===`body`?27:5;else a:switch(e){case ie:return e=si(31,n,t,i),e.elementType=ie,e.lanes=a,e;case y:return fi(n.children,i,a,t);case b:o=8,i|=24;break;case x:return e=si(12,n,t,i|2),e.elementType=x,e.lanes=a,e;case w:return e=si(13,n,t,i),e.elementType=w,e.lanes=a,e;case te:return e=si(19,n,t,i),e.elementType=te,e.lanes=a,e;default:if(typeof e==`object`&&e)switch(e.$$typeof){case S:o=10;break a;case ee:o=9;break a;case C:o=11;break a;case ne:o=14;break a;case re:o=16,r=null;break a}o=29,n=Error(s(130,e===null?`null`:typeof e,``)),r=null}return t=si(o,n,t,i),t.elementType=e,t.type=r,t.lanes=a,t}function fi(e,t,n,r){return e=si(7,e,r,t),e.lanes=n,e}function pi(e,t,n){return e=si(6,e,null,t),e.lanes=n,e}function mi(e){var t=si(18,null,null,0);return t.stateNode=e,t}function hi(e,t,n){return t=si(4,e.children===null?[]:e.children,e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var gi=new WeakMap;function _i(e,t){if(typeof e==`object`&&e){var n=gi.get(e);return n===void 0?(t={value:e,source:t,stack:Ae(t)},gi.set(e,t),t):n}return{value:e,source:t,stack:Ae(t)}}var vi=[],yi=0,bi=null,xi=0,Si=[],Ci=0,wi=null,Ti=1,Ei=``;function Di(e,t){vi[yi++]=xi,vi[yi++]=bi,bi=e,xi=t}function Oi(e,t,n){Si[Ci++]=Ti,Si[Ci++]=Ei,Si[Ci++]=wi,wi=e;var r=Ti;e=Ei;var i=32-qe(r)-1;r&=~(1<<i),n+=1;var a=32-qe(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ti=1<<32-qe(t)+i|n<<i|r,Ei=a+e}else Ti=1<<a|n<<i|r,Ei=e}function ki(e){e.return!==null&&(Di(e,1),Oi(e,1,0))}function Ai(e){for(;e===bi;)bi=vi[--yi],vi[yi]=null,xi=vi[--yi],vi[yi]=null;for(;e===wi;)wi=Si[--Ci],Si[Ci]=null,Ei=Si[--Ci],Si[Ci]=null,Ti=Si[--Ci],Si[Ci]=null}function ji(e,t){Si[Ci++]=Ti,Si[Ci++]=Ei,Si[Ci++]=wi,Ti=t.id,Ei=t.overflow,wi=e}var Mi=null,Ni=null,B=!1,Pi=null,Fi=!1,Ii=Error(s(519));function Li(e){throw Ui(_i(Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?`text`:`HTML`,``)),e)),Ii}function Ri(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[gt]=e,t[_t]=r,n){case`dialog`:Y(`cancel`,t),Y(`close`,t);break;case`iframe`:case`object`:case`embed`:Y(`load`,t);break;case`video`:case`audio`:for(n=0;n<bd.length;n++)Y(bd[n],t);break;case`source`:Y(`error`,t);break;case`img`:case`image`:case`link`:Y(`error`,t),Y(`load`,t);break;case`details`:Y(`toggle`,t);break;case`input`:Y(`invalid`,t),Yt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case`select`:Y(`invalid`,t);break;case`textarea`:Y(`invalid`,t),$t(t,r.value,r.defaultValue,r.children)}n=r.children,typeof n!=`string`&&typeof n!=`number`&&typeof n!=`bigint`||t.textContent===``+n||!0===r.suppressHydrationWarning||Fd(t.textContent,n)?(r.popover!=null&&(Y(`beforetoggle`,t),Y(`toggle`,t)),r.onScroll!=null&&Y(`scroll`,t),r.onScrollEnd!=null&&Y(`scrollend`,t),r.onClick!=null&&(t.onclick=ln),t=!0):t=!1,t||Li(e,!0)}function zi(e){for(Mi=e.return;Mi;)switch(Mi.tag){case 5:case 31:case 13:Fi=!1;return;case 27:case 3:Fi=!0;return;default:Mi=Mi.return}}function Bi(e){if(e!==Mi)return!1;if(!B)return zi(e),B=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!==`form`&&n!==`button`)||qd(e.type,e.memoizedProps)),n=!n),n&&Ni&&Li(e),zi(e),t===13){if(e=e.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(s(317));Ni=mf(e)}else if(t===31){if(e=e.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(s(317));Ni=mf(e)}else t===27?(t=Ni,tf(e.type)?(e=pf,pf=null,Ni=e):Ni=t):Ni=Mi?ff(e.stateNode.nextSibling):null;return!0}function Vi(){Ni=Mi=null,B=!1}function Hi(){var e=Pi;return e!==null&&(eu===null?eu=e:eu.push.apply(eu,e),Pi=null),e}function Ui(e){Pi===null?Pi=[e]:Pi.push(e)}var Wi=pe(null),Gi=null,Ki=null;function qi(e,t,n){he(Wi,t._currentValue),t._currentValue=n}function Ji(e){e._currentValue=Wi.current,me(Wi)}function Yi(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)===t?r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t):(e.childLanes|=t,r!==null&&(r.childLanes|=t)),e===n)break;e=e.return}}function Xi(e,t,n,r){var i=e.child;for(i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){var o=i.child;a=a.firstContext;a:for(;a!==null;){var c=a;a=i;for(var l=0;l<t.length;l++)if(c.context===t[l]){a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),Yi(a.return,n,e),r||(o=null);break a}a=c.next}}else if(i.tag===18){if(o=i.return,o===null)throw Error(s(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Yi(o,n,e),o=null}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}}function Zi(e,t,n,r){e=null;for(var i=t,a=!1;i!==null;){if(!a){if(i.flags&524288)a=!0;else if(i.flags&262144)break}if(i.tag===10){var o=i.alternate;if(o===null)throw Error(s(387));if(o=o.memoizedProps,o!==null){var c=i.type;Cr(i.pendingProps.value,o.value)||(e===null?e=[c]:e.push(c))}}else if(i===ye.current){if(o=i.alternate,o===null)throw Error(s(387));o.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(e===null?e=[tp]:e.push(tp))}i=i.return}e!==null&&Xi(t,e,n,r),t.flags|=262144}function Qi(e){for(e=e.firstContext;e!==null;){if(!Cr(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function $i(e){Gi=e,Ki=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ea(e){return na(Gi,e)}function ta(e,t){return Gi===null&&$i(e),na(e,t)}function na(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Ki===null){if(e===null)throw Error(s(308));Ki=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ki=Ki.next=t;return n}var ra=typeof AbortController<`u`?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},ia=t.unstable_scheduleCallback,aa=t.unstable_NormalPriority,oa={$$typeof:S,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function sa(){return{controller:new ra,data:new Map,refCount:0}}function ca(e){e.refCount--,e.refCount===0&&ia(aa,function(){e.controller.abort()})}var la=null,ua=0,da=0,fa=null;function pa(e,t){if(la===null){var n=la=[];ua=0,da=md(),fa={status:`pending`,value:void 0,then:function(e){n.push(e)}}}return ua++,t.then(ma,ma),t}function ma(){if(--ua===0&&la!==null){fa!==null&&(fa.status=`fulfilled`);var e=la;la=null,da=0,fa=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function ha(e,t){var n=[],r={status:`pending`,value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status=`fulfilled`,r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status=`rejected`,r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}var ga=E.S;E.S=function(e,t){ru=Ie(),typeof t==`object`&&t&&typeof t.then==`function`&&pa(e,t),ga!==null&&ga(e,t)};var _a=pe(null);function va(){var e=_a.current;return e===null?Bl.pooledCache:e}function ya(e,t){t===null?he(_a,_a.current):he(_a,t.pool)}function ba(){var e=va();return e===null?null:{parent:oa._currentValue,pool:e}}var xa=Error(s(460)),Sa=Error(s(474)),Ca=Error(s(542)),wa={then:function(){}};function Ta(e){return e=e.status,e===`fulfilled`||e===`rejected`}function Ea(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(ln,ln),t=n),t.status){case`fulfilled`:return t.value;case`rejected`:throw e=t.reason,Aa(e),e;default:if(typeof t.status==`string`)t.then(ln,ln);else{if(e=Bl,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=t,e.status=`pending`,e.then(function(e){if(t.status===`pending`){var n=t;n.status=`fulfilled`,n.value=e}},function(e){if(t.status===`pending`){var n=t;n.status=`rejected`,n.reason=e}})}switch(t.status){case`fulfilled`:return t.value;case`rejected`:throw e=t.reason,Aa(e),e}throw Oa=t,xa}}function Da(e){try{var t=e._init;return t(e._payload)}catch(e){throw typeof e==`object`&&e&&typeof e.then==`function`?(Oa=e,xa):e}}var Oa=null;function ka(){if(Oa===null)throw Error(s(459));var e=Oa;return Oa=null,e}function Aa(e){if(e===xa||e===Ca)throw Error(s(483))}var ja=null,Ma=0;function Na(e){var t=Ma;return Ma+=1,ja===null&&(ja=[]),Ea(ja,e,t)}function Pa(e,t){t=t.props.ref,e.ref=t===void 0?null:t}function Fa(e,t){throw t.$$typeof===g?Error(s(525)):(e=Object.prototype.toString.call(t),Error(s(31,e===`[object Object]`?`object with keys {`+Object.keys(t).join(`, `)+`}`:e)))}function Ia(e){function t(t,n){if(e){var r=t.deletions;r===null?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;r!==null;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;e!==null;)e.key===null?t.set(e.index,e):t.set(e.key,e),e=e.sibling;return t}function i(e,t){return e=li(e,t),e.index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?(r=t.alternate,r===null?(t.flags|=67108866,n):(r=r.index,r<n?(t.flags|=67108866,n):r)):(t.flags|=1048576,n)}function o(t){return e&&t.alternate===null&&(t.flags|=67108866),t}function c(e,t,n,r){return t===null||t.tag!==6?(t=pi(n,e.mode,r),t.return=e,t):(t=i(t,n),t.return=e,t)}function l(e,t,n,r){var a=n.type;return a===y?d(e,t,n.props.children,r,n.key):t!==null&&(t.elementType===a||typeof a==`object`&&a&&a.$$typeof===re&&Da(a)===t.type)?(t=i(t,n.props),Pa(t,n),t.return=e,t):(t=di(n.type,n.key,n.props,null,e.mode,r),Pa(t,n),t.return=e,t)}function u(e,t,n,r){return t===null||t.tag!==4||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(t=hi(n,e.mode,r),t.return=e,t):(t=i(t,n.children||[]),t.return=e,t)}function d(e,t,n,r,a){return t===null||t.tag!==7?(t=fi(n,e.mode,r,a),t.return=e,t):(t=i(t,n),t.return=e,t)}function f(e,t,n){if(typeof t==`string`&&t!==``||typeof t==`number`||typeof t==`bigint`)return t=pi(``+t,e.mode,n),t.return=e,t;if(typeof t==`object`&&t){switch(t.$$typeof){case _:return n=di(t.type,t.key,t.props,null,e.mode,n),Pa(n,t),n.return=e,n;case v:return t=hi(t,e.mode,n),t.return=e,t;case re:return t=Da(t),f(e,t,n)}if(le(t)||se(t))return t=fi(t,e.mode,n,null),t.return=e,t;if(typeof t.then==`function`)return f(e,Na(t),n);if(t.$$typeof===S)return f(e,ta(e,t),n);Fa(e,t)}return null}function p(e,t,n,r){var i=t===null?null:t.key;if(typeof n==`string`&&n!==``||typeof n==`number`||typeof n==`bigint`)return i===null?c(e,t,``+n,r):null;if(typeof n==`object`&&n){switch(n.$$typeof){case _:return n.key===i?l(e,t,n,r):null;case v:return n.key===i?u(e,t,n,r):null;case re:return n=Da(n),p(e,t,n,r)}if(le(n)||se(n))return i===null?d(e,t,n,r,null):null;if(typeof n.then==`function`)return p(e,t,Na(n),r);if(n.$$typeof===S)return p(e,t,ta(e,n),r);Fa(e,n)}return null}function m(e,t,n,r,i){if(typeof r==`string`&&r!==``||typeof r==`number`||typeof r==`bigint`)return e=e.get(n)||null,c(t,e,``+r,i);if(typeof r==`object`&&r){switch(r.$$typeof){case _:return e=e.get(r.key===null?n:r.key)||null,l(t,e,r,i);case v:return e=e.get(r.key===null?n:r.key)||null,u(t,e,r,i);case re:return r=Da(r),m(e,t,n,r,i)}if(le(r)||se(r))return e=e.get(n)||null,d(t,e,r,i,null);if(typeof r.then==`function`)return m(e,t,n,Na(r),i);if(r.$$typeof===S)return m(e,t,n,ta(t,r),i);Fa(t,r)}return null}function h(i,o,s,c){for(var l=null,u=null,d=o,h=o=0,g=null;d!==null&&h<s.length;h++){d.index>h?(g=d,d=null):g=d.sibling;var _=p(i,d,s[h],c);if(_===null){d===null&&(d=g);break}e&&d&&_.alternate===null&&t(i,d),o=a(_,o,h),u===null?l=_:u.sibling=_,u=_,d=g}if(h===s.length)return n(i,d),B&&Di(i,h),l;if(d===null){for(;h<s.length;h++)d=f(i,s[h],c),d!==null&&(o=a(d,o,h),u===null?l=d:u.sibling=d,u=d);return B&&Di(i,h),l}for(d=r(d);h<s.length;h++)g=m(d,i,h,s[h],c),g!==null&&(e&&g.alternate!==null&&d.delete(g.key===null?h:g.key),o=a(g,o,h),u===null?l=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(i,e)}),B&&Di(i,h),l}function g(i,o,c,l){if(c==null)throw Error(s(151));for(var u=null,d=null,h=o,g=o=0,_=null,v=c.next();h!==null&&!v.done;g++,v=c.next()){h.index>g?(_=h,h=null):_=h.sibling;var y=p(i,h,v.value,l);if(y===null){h===null&&(h=_);break}e&&h&&y.alternate===null&&t(i,h),o=a(y,o,g),d===null?u=y:d.sibling=y,d=y,h=_}if(v.done)return n(i,h),B&&Di(i,g),u;if(h===null){for(;!v.done;g++,v=c.next())v=f(i,v.value,l),v!==null&&(o=a(v,o,g),d===null?u=v:d.sibling=v,d=v);return B&&Di(i,g),u}for(h=r(h);!v.done;g++,v=c.next())v=m(h,i,g,v.value,l),v!==null&&(e&&v.alternate!==null&&h.delete(v.key===null?g:v.key),o=a(v,o,g),d===null?u=v:d.sibling=v,d=v);return e&&h.forEach(function(e){return t(i,e)}),B&&Di(i,g),u}function b(e,r,a,c){if(typeof a==`object`&&a&&a.type===y&&a.key===null&&(a=a.props.children),typeof a==`object`&&a){switch(a.$$typeof){case _:a:{for(var l=a.key;r!==null;){if(r.key===l){if(l=a.type,l===y){if(r.tag===7){n(e,r.sibling),c=i(r,a.props.children),c.return=e,e=c;break a}}else if(r.elementType===l||typeof l==`object`&&l&&l.$$typeof===re&&Da(l)===r.type){n(e,r.sibling),c=i(r,a.props),Pa(c,a),c.return=e,e=c;break a}n(e,r);break}else t(e,r);r=r.sibling}a.type===y?(c=fi(a.props.children,e.mode,c,a.key),c.return=e,e=c):(c=di(a.type,a.key,a.props,null,e.mode,c),Pa(c,a),c.return=e,e=c)}return o(e);case v:a:{for(l=a.key;r!==null;){if(r.key===l)if(r.tag===4&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),c=i(r,a.children||[]),c.return=e,e=c;break a}else{n(e,r);break}else t(e,r);r=r.sibling}c=hi(a,e.mode,c),c.return=e,e=c}return o(e);case re:return a=Da(a),b(e,r,a,c)}if(le(a))return h(e,r,a,c);if(se(a)){if(l=se(a),typeof l!=`function`)throw Error(s(150));return a=l.call(a),g(e,r,a,c)}if(typeof a.then==`function`)return b(e,r,Na(a),c);if(a.$$typeof===S)return b(e,r,ta(e,a),c);Fa(e,a)}return typeof a==`string`&&a!==``||typeof a==`number`||typeof a==`bigint`?(a=``+a,r!==null&&r.tag===6?(n(e,r.sibling),c=i(r,a),c.return=e,e=c):(n(e,r),c=pi(a,e.mode,c),c.return=e,e=c),o(e)):n(e,r)}return function(e,t,n,r){try{Ma=0;var i=b(e,t,n,r);return ja=null,i}catch(t){if(t===xa||t===Ca)throw t;var a=si(29,t,null,e.mode);return a.lanes=r,a.return=e,a}}}var La=Ia(!0),Ra=Ia(!1),za=!1;function Ba(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Va(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ha(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ua(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,zl&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=ii(e),ri(e,null,n),t}return ei(e,r,t,n),ii(e)}function Wa(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,n&4194048)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,lt(e,n)}}function Ga(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=t:a=a.next=t}else i=a=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,callbacks:r.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var V=!1;function Ka(){if(V){var e=fa;if(e!==null)throw e}}function qa(e,t,n,r){V=!1;var i=e.updateQueue;za=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var c=s,l=c.next;c.next=null,o===null?a=l:o.next=l,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,s=u.lastBaseUpdate,s!==o&&(s===null?u.firstBaseUpdate=l:s.next=l,u.lastBaseUpdate=c))}if(a!==null){var d=i.baseState;o=0,u=l=c=null,s=a;do{var f=s.lane&-536870913,p=f!==s.lane;if(p?(q&f)===f:(r&f)===f){f!==0&&f===da&&(V=!0),u!==null&&(u=u.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});a:{var m=e,g=s;f=t;var _=n;switch(g.tag){case 1:if(m=g.payload,typeof m==`function`){d=m.call(_,d,f);break a}d=m;break a;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,f=typeof m==`function`?m.call(_,d,f):m,f==null)break a;d=h({},d,f);break a;case 2:za=!0}}f=s.callback,f!==null&&(e.flags|=64,p&&(e.flags|=8192),p=i.callbacks,p===null?i.callbacks=[f]:p.push(f))}else p={lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},u===null?(l=u=p,c=d):u=u.next=p,o|=f;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;p=s,s=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(1);u===null&&(c=d),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,a===null&&(i.shared.lanes=0),Jl|=o,e.lanes=o,e.memoizedState=d}}function Ja(e,t){if(typeof e!=`function`)throw Error(s(191,e));e.call(t)}function Ya(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)Ja(n[e],t)}var Xa=pe(null),Za=pe(0);function Qa(e,t){e=Kl,he(Za,e),he(Xa,t),Kl=e|t.baseLanes}function $a(){he(Za,Kl),he(Xa,Xa.current)}function eo(){Kl=Za.current,me(Xa),me(Za)}var to=pe(null),no=null;function ro(e){var t=e.alternate;he(co,co.current&1),he(to,e),no===null&&(t===null||Xa.current!==null||t.memoizedState!==null)&&(no=e)}function io(e){he(co,co.current),he(to,e),no===null&&(no=e)}function ao(e){e.tag===22?(he(co,co.current),he(to,e),no===null&&(no=e)):oo(e)}function oo(){he(co,co.current),he(to,to.current)}function so(e){me(to),no===e&&(no=null),me(co)}var co=pe(0);function lo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||lf(n)||uf(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder===`forwards`||t.memoizedProps.revealOrder===`backwards`||t.memoizedProps.revealOrder===`unstable_legacy-backwards`||t.memoizedProps.revealOrder===`together`)){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var uo=0,H=null,U=null,fo=null,po=!1,mo=!1,ho=!1,go=0,_o=0,vo=null,yo=0;function bo(){throw Error(s(321))}function xo(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Cr(e[n],t[n]))return!1;return!0}function So(e,t,n,r,i,a){return uo=a,H=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,E.H=e===null||e.memoizedState===null?Ls:Rs,ho=!1,a=n(r,i),ho=!1,mo&&(a=wo(t,n,r,i)),Co(e),a}function Co(e){E.H=Is;var t=U!==null&&U.next!==null;if(uo=0,fo=U=H=null,po=!1,_o=0,vo=null,t)throw Error(s(300));e===null||tc||(e=e.dependencies,e!==null&&Qi(e)&&(tc=!0))}function wo(e,t,n,r){H=e;var i=0;do{if(mo&&(vo=null),_o=0,mo=!1,25<=i)throw Error(s(301));if(i+=1,fo=U=null,e.updateQueue!=null){var a=e.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,a.memoCache!=null&&(a.memoCache.index=0)}E.H=zs,a=t(n,r)}while(mo);return a}function To(){var e=E.H,t=e.useState()[0];return t=typeof t.then==`function`?Ao(t):t,e=e.useState()[0],(U===null?null:U.memoizedState)!==e&&(H.flags|=1024),t}function Eo(){var e=go!==0;return go=0,e}function Do(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Oo(e){if(po){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}po=!1}uo=0,fo=U=H=null,mo=!1,_o=go=0,vo=null}function ko(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fo===null?H.memoizedState=fo=e:fo=fo.next=e,fo}function W(){if(U===null){var e=H.alternate;e=e===null?null:e.memoizedState}else e=U.next;var t=fo===null?H.memoizedState:fo.next;if(t!==null)fo=t,U=e;else{if(e===null)throw H.alternate===null?Error(s(467)):Error(s(310));U=e,e={memoizedState:U.memoizedState,baseState:U.baseState,baseQueue:U.baseQueue,queue:U.queue,next:null},fo===null?H.memoizedState=fo=e:fo=fo.next=e}return fo}function G(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ao(e){var t=_o;return _o+=1,vo===null&&(vo=[]),e=Ea(vo,e,t),t=H,(fo===null?t.memoizedState:fo.next)===null&&(t=t.alternate,E.H=t===null||t.memoizedState===null?Ls:Rs),e}function jo(e){if(typeof e==`object`&&e){if(typeof e.then==`function`)return Ao(e);if(e.$$typeof===S)return ea(e)}throw Error(s(438,String(e)))}function Mo(e){var t=null,n=H.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var r=H.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(t??={data:[],index:0},n===null&&(n=G(),H.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=ae;return t.index++,n}function No(e,t){return typeof t==`function`?t(e):t}function Po(e){return Fo(W(),U,e)}function Fo(e,t,n){var r=e.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=n;var i=e.baseQueue,a=r.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}t.baseQueue=i=a,r.pending=null}if(a=e.baseState,i===null)e.memoizedState=a;else{t=i.next;var c=o=null,l=null,u=t,d=!1;do{var f=u.lane&-536870913;if(f===u.lane?(uo&f)===f:(q&f)===f){var p=u.revertLane;if(p===0)l!==null&&(l=l.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),f===da&&(d=!0);else if((uo&p)===p){u=u.next,p===da&&(d=!0);continue}else f={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(c=l=f,o=a):l=l.next=f,H.lanes|=p,Jl|=p;f=u.action,ho&&n(a,f),a=u.hasEagerState?u.eagerState:n(a,f)}else p={lane:f,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(c=l=p,o=a):l=l.next=p,H.lanes|=f,Jl|=f;u=u.next}while(u!==null&&u!==t);if(l===null?o=a:l.next=c,!Cr(a,e.memoizedState)&&(tc=!0,d&&(n=fa,n!==null)))throw n;e.memoizedState=a,e.baseState=o,e.baseQueue=l,r.lastRenderedState=a}return i===null&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Io(e){var t=W(),n=t.queue;if(n===null)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do a=e(a,o.action),o=o.next;while(o!==i);Cr(a,t.memoizedState)||(tc=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Lo(e,t,n){var r=H,i=W(),a=B;if(a){if(n===void 0)throw Error(s(407));n=n()}else n=t();var o=!Cr((U||i).memoizedState,n);if(o&&(i.memoizedState=n,tc=!0),i=i.queue,cs(Bo.bind(null,r,i,e),[e]),i.getSnapshot!==t||o||fo!==null&&fo.memoizedState.tag&1){if(r.flags|=2048,rs(9,{destroy:void 0},zo.bind(null,r,i,n,t),null),Bl===null)throw Error(s(349));a||uo&127||Ro(r,t,n)}return n}function Ro(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=H.updateQueue,t===null?(t=G(),H.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function zo(e,t,n,r){t.value=n,t.getSnapshot=r,Vo(t)&&Ho(e)}function Bo(e,t,n){return n(function(){Vo(t)&&Ho(e)})}function Vo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Cr(e,n)}catch{return!0}}function Ho(e){var t=ni(e,2);t!==null&&vu(t,e,2)}function Uo(e){var t=ko();if(typeof e==`function`){var n=e;if(e=n(),ho){Ke(!0);try{n()}finally{Ke(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:No,lastRenderedState:e},t}function Wo(e,t,n,r){return e.baseState=n,Fo(e,U,typeof r==`function`?r:No)}function Go(e,t,n,r,i){if(Ns(e))throw Error(s(485));if(e=t.action,e!==null){var a={payload:i,action:e,next:null,isTransition:!0,status:`pending`,value:null,reason:null,listeners:[],then:function(e){a.listeners.push(e)}};E.T===null?a.isTransition=!1:n(!0),r(a),n=t.pending,n===null?(a.next=t.pending=a,Ko(t,a)):(a.next=n.next,t.pending=n.next=a)}}function Ko(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var a=E.T,o={};E.T=o;try{var s=n(i,r),c=E.S;c!==null&&c(o,s),qo(e,t,s)}catch(n){Yo(e,t,n)}finally{a!==null&&o.types!==null&&(a.types=o.types),E.T=a}}else try{a=n(i,r),qo(e,t,a)}catch(n){Yo(e,t,n)}}function qo(e,t,n){typeof n==`object`&&n&&typeof n.then==`function`?n.then(function(n){Jo(e,t,n)},function(n){return Yo(e,t,n)}):Jo(e,t,n)}function Jo(e,t,n){t.status=`fulfilled`,t.value=n,Xo(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,Ko(e,n)))}function Yo(e,t,n){var r=e.pending;if(e.pending=null,r!==null){r=r.next;do t.status=`rejected`,t.reason=n,Xo(t),t=t.next;while(t!==r)}e.action=null}function Xo(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Zo(e,t){return t}function Qo(e,t){if(B){var n=Bl.formState;if(n!==null){a:{var r=H;if(B){if(Ni){b:{for(var i=Ni,a=Fi;i.nodeType!==8;){if(!a){i=null;break b}if(i=ff(i.nextSibling),i===null){i=null;break b}}a=i.data,i=a===`F!`||a===`F`?i:null}if(i){Ni=ff(i.nextSibling),r=i.data===`F!`;break a}}Li(r)}r=!1}r&&(t=n[0])}}return n=ko(),n.memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zo,lastRenderedState:t},n.queue=r,n=As.bind(null,H,r),r.dispatch=n,r=Uo(!1),a=Ms.bind(null,H,!1,r.queue),r=ko(),i={state:t,dispatch:null,action:e,pending:null},r.queue=i,n=Go.bind(null,H,i,a,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function $o(e){return es(W(),U,e)}function es(e,t,n){if(t=Fo(e,t,Zo)[0],e=Po(No)[0],typeof t==`object`&&t&&typeof t.then==`function`)try{var r=Ao(t)}catch(e){throw e===xa?Ca:e}else r=t;t=W();var i=t.queue,a=i.dispatch;return n!==t.memoizedState&&(H.flags|=2048,rs(9,{destroy:void 0},ts.bind(null,i,n),null)),[r,a,e]}function ts(e,t){e.action=t}function ns(e){var t=W(),n=U;if(n!==null)return es(t,n,e);W(),t=t.memoizedState,n=W();var r=n.queue.dispatch;return n.memoizedState=e,[t,r,!1]}function rs(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},t=H.updateQueue,t===null&&(t=G(),H.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function is(){return W().memoizedState}function as(e,t,n,r){var i=ko();H.flags|=e,i.memoizedState=rs(1|t,{destroy:void 0},n,r===void 0?null:r)}function os(e,t,n,r){var i=W();r=r===void 0?null:r;var a=i.memoizedState.inst;U!==null&&r!==null&&xo(r,U.memoizedState.deps)?i.memoizedState=rs(t,a,n,r):(H.flags|=e,i.memoizedState=rs(1|t,a,n,r))}function ss(e,t){as(8390656,8,e,t)}function cs(e,t){os(2048,8,e,t)}function ls(e){H.flags|=4;var t=H.updateQueue;if(t===null)t=G(),H.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function us(e){var t=W().memoizedState;return ls({ref:t,nextImpl:e}),function(){if(zl&2)throw Error(s(440));return t.impl.apply(void 0,arguments)}}function ds(e,t){return os(4,2,e,t)}function fs(e,t){return os(4,4,e,t)}function ps(e,t){if(typeof t==`function`){e=e();var n=t(e);return function(){typeof n==`function`?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ms(e,t,n){n=n==null?null:n.concat([e]),os(4,4,ps.bind(null,t,e),n)}function hs(){}function gs(e,t){var n=W();t=t===void 0?null:t;var r=n.memoizedState;return t!==null&&xo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function _s(e,t){var n=W();t=t===void 0?null:t;var r=n.memoizedState;if(t!==null&&xo(t,r[1]))return r[0];if(r=e(),ho){Ke(!0);try{e()}finally{Ke(!1)}}return n.memoizedState=[r,t],r}function vs(e,t,n){return n===void 0||uo&1073741824&&!(q&261930)?e.memoizedState=t:(e.memoizedState=n,e=_u(),H.lanes|=e,Jl|=e,n)}function ys(e,t,n,r){return Cr(n,t)?n:Xa.current===null?!(uo&42)||uo&1073741824&&!(q&261930)?(tc=!0,e.memoizedState=n):(e=_u(),H.lanes|=e,Jl|=e,t):(e=vs(e,n,r),Cr(e,t)||(tc=!0),e)}function bs(e,t,n,r,i){var a=D.p;D.p=a!==0&&8>a?a:8;var o=E.T,s={};E.T=s,Ms(e,!1,t,n);try{var c=i(),l=E.S;l!==null&&l(s,c),typeof c==`object`&&c&&typeof c.then==`function`?js(e,t,ha(c,r),gu(e)):js(e,t,r,gu(e))}catch(n){js(e,t,{then:function(){},status:`rejected`,reason:n},gu())}finally{D.p=a,o!==null&&s.types!==null&&(o.types=s.types),E.T=o}}function xs(){}function Ss(e,t,n,r){if(e.tag!==5)throw Error(s(476));var i=Cs(e).queue;bs(e,i,t,ue,n===null?xs:function(){return ws(e),n(r)})}function Cs(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:ue,baseState:ue,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:No,lastRenderedState:ue},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:No,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function ws(e){var t=Cs(e);t.next===null&&(t=e.alternate.memoizedState),js(e,t.next.queue,{},gu())}function Ts(){return ea(tp)}function Es(){return W().memoizedState}function Ds(){return W().memoizedState}function Os(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=gu();e=Ha(n);var r=Ua(t,e,n);r!==null&&(vu(r,t,n),Wa(r,t,n)),t={cache:sa()},e.payload=t;return}t=t.return}}function ks(e,t,n){var r=gu();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Ns(e)?Ps(t,n):(n=ti(e,t,n,r),n!==null&&(vu(n,e,r),Fs(n,t,r)))}function As(e,t,n){js(e,t,n,gu())}function js(e,t,n,r){var i={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ns(e))Ps(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,Cr(s,o))return ei(e,t,i,0),Bl===null&&$r(),!1}catch{}if(n=ti(e,t,i,r),n!==null)return vu(n,e,r),Fs(n,t,r),!0}return!1}function Ms(e,t,n,r){if(r={lane:2,revertLane:md(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Ns(e)){if(t)throw Error(s(479))}else t=ti(e,n,r,2),t!==null&&vu(t,e,2)}function Ns(e){var t=e.alternate;return e===H||t!==null&&t===H}function Ps(e,t){mo=po=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Fs(e,t,n){if(n&4194048){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,lt(e,n)}}var Is={readContext:ea,use:jo,useCallback:bo,useContext:bo,useEffect:bo,useImperativeHandle:bo,useLayoutEffect:bo,useInsertionEffect:bo,useMemo:bo,useReducer:bo,useRef:bo,useState:bo,useDebugValue:bo,useDeferredValue:bo,useTransition:bo,useSyncExternalStore:bo,useId:bo,useHostTransitionStatus:bo,useFormState:bo,useActionState:bo,useOptimistic:bo,useMemoCache:bo,useCacheRefresh:bo};Is.useEffectEvent=bo;var Ls={readContext:ea,use:jo,useCallback:function(e,t){return ko().memoizedState=[e,t===void 0?null:t],e},useContext:ea,useEffect:ss,useImperativeHandle:function(e,t,n){n=n==null?null:n.concat([e]),as(4194308,4,ps.bind(null,t,e),n)},useLayoutEffect:function(e,t){return as(4194308,4,e,t)},useInsertionEffect:function(e,t){as(4,2,e,t)},useMemo:function(e,t){var n=ko();t=t===void 0?null:t;var r=e();if(ho){Ke(!0);try{e()}finally{Ke(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=ko();if(n!==void 0){var i=n(t);if(ho){Ke(!0);try{n(t)}finally{Ke(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=ks.bind(null,H,e),[r.memoizedState,e]},useRef:function(e){var t=ko();return e={current:e},t.memoizedState=e},useState:function(e){e=Uo(e);var t=e.queue,n=As.bind(null,H,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:hs,useDeferredValue:function(e,t){return vs(ko(),e,t)},useTransition:function(){var e=Uo(!1);return e=bs.bind(null,H,e.queue,!0,!1),ko().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=H,i=ko();if(B){if(n===void 0)throw Error(s(407));n=n()}else{if(n=t(),Bl===null)throw Error(s(349));q&127||Ro(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,ss(Bo.bind(null,r,a,e),[e]),r.flags|=2048,rs(9,{destroy:void 0},zo.bind(null,r,a,n,t),null),n},useId:function(){var e=ko(),t=Bl.identifierPrefix;if(B){var n=Ei,r=Ti;n=(r&~(1<<32-qe(r)-1)).toString(32)+n,t=`_`+t+`R_`+n,n=go++,0<n&&(t+=`H`+n.toString(32)),t+=`_`}else n=yo++,t=`_`+t+`r_`+n.toString(32)+`_`;return e.memoizedState=t},useHostTransitionStatus:Ts,useFormState:Qo,useActionState:Qo,useOptimistic:function(e){var t=ko();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Ms.bind(null,H,!0,n),n.dispatch=t,[e,t]},useMemoCache:Mo,useCacheRefresh:function(){return ko().memoizedState=Os.bind(null,H)},useEffectEvent:function(e){var t=ko(),n={impl:e};return t.memoizedState=n,function(){if(zl&2)throw Error(s(440));return n.impl.apply(void 0,arguments)}}},Rs={readContext:ea,use:jo,useCallback:gs,useContext:ea,useEffect:cs,useImperativeHandle:ms,useInsertionEffect:ds,useLayoutEffect:fs,useMemo:_s,useReducer:Po,useRef:is,useState:function(){return Po(No)},useDebugValue:hs,useDeferredValue:function(e,t){return ys(W(),U.memoizedState,e,t)},useTransition:function(){var e=Po(No)[0],t=W().memoizedState;return[typeof e==`boolean`?e:Ao(e),t]},useSyncExternalStore:Lo,useId:Es,useHostTransitionStatus:Ts,useFormState:$o,useActionState:$o,useOptimistic:function(e,t){return Wo(W(),U,e,t)},useMemoCache:Mo,useCacheRefresh:Ds};Rs.useEffectEvent=us;var zs={readContext:ea,use:jo,useCallback:gs,useContext:ea,useEffect:cs,useImperativeHandle:ms,useInsertionEffect:ds,useLayoutEffect:fs,useMemo:_s,useReducer:Io,useRef:is,useState:function(){return Io(No)},useDebugValue:hs,useDeferredValue:function(e,t){var n=W();return U===null?vs(n,e,t):ys(n,U.memoizedState,e,t)},useTransition:function(){var e=Io(No)[0],t=W().memoizedState;return[typeof e==`boolean`?e:Ao(e),t]},useSyncExternalStore:Lo,useId:Es,useHostTransitionStatus:Ts,useFormState:ns,useActionState:ns,useOptimistic:function(e,t){var n=W();return U===null?(n.baseState=e,[e,n.queue.dispatch]):Wo(n,U,e,t)},useMemoCache:Mo,useCacheRefresh:Ds};zs.useEffectEvent=us;function Bs(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:h({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Vs={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=gu(),i=Ha(r);i.payload=t,n!=null&&(i.callback=n),t=Ua(e,i,r),t!==null&&(vu(t,e,r),Wa(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=gu(),i=Ha(r);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Ua(e,i,r),t!==null&&(vu(t,e,r),Wa(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=gu(),r=Ha(n);r.tag=2,t!=null&&(r.callback=t),t=Ua(e,r,n),t!==null&&(vu(t,e,n),Wa(t,e,n))}};function Hs(e,t,n,r,i,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate==`function`?e.shouldComponentUpdate(r,a,o):t.prototype&&t.prototype.isPureReactComponent?!wr(n,r)||!wr(i,a):!0}function Us(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps==`function`&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps==`function`&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Vs.enqueueReplaceState(t,t.state,null)}function Ws(e,t){var n=t;if(`ref`in t)for(var r in n={},t)r!==`ref`&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=h({},n)),e)n[i]===void 0&&(n[i]=e[i]);return n}function Gs(e){Yr(e)}function Ks(e){console.error(e)}function qs(e){Yr(e)}function Js(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(e){setTimeout(function(){throw e})}}function Ys(e,t,n){try{var r=e.onCaughtError;r(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(e){setTimeout(function(){throw e})}}function Xs(e,t,n){return n=Ha(n),n.tag=3,n.payload={element:null},n.callback=function(){Js(e,t)},n}function Zs(e){return e=Ha(e),e.tag=3,e}function Qs(e,t,n,r){var i=n.type.getDerivedStateFromError;if(typeof i==`function`){var a=r.value;e.payload=function(){return i(a)},e.callback=function(){Ys(t,n,r)}}var o=n.stateNode;o!==null&&typeof o.componentDidCatch==`function`&&(e.callback=function(){Ys(t,n,r),typeof i!=`function`&&(ou===null?ou=new Set([this]):ou.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:e===null?``:e})})}function $s(e,t,n,r,i){if(n.flags|=32768,typeof r==`object`&&r&&typeof r.then==`function`){if(t=n.alternate,t!==null&&Zi(t,n,i,!0),n=to.current,n!==null){switch(n.tag){case 31:case 13:return no===null?Au():n.alternate===null&&ql===0&&(ql=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===wa?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([r]):t.add(r),Ju(e,r,i)),!1;case 22:return n.flags|=65536,r===wa?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([r]):n.add(r)),Ju(e,r,i)),!1}throw Error(s(435,n.tag))}return Ju(e,r,i),Au(),!1}if(B)return t=to.current,t===null?(r!==Ii&&(t=Error(s(423),{cause:r}),Ui(_i(t,n))),e=e.current.alternate,e.flags|=65536,i&=-i,e.lanes|=i,r=_i(r,n),i=Xs(e.stateNode,r,i),Ga(e,i),ql!==4&&(ql=2)):(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=i,r!==Ii&&(e=Error(s(422),{cause:r}),Ui(_i(e,n)))),!1;var a=Error(s(520),{cause:r});if(a=_i(a,n),$l===null?$l=[a]:$l.push(a),ql!==4&&(ql=2),t===null)return!0;r=_i(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,e=Xs(n.stateNode,r,e),Ga(n,e),!1;case 1:if(t=n.type,a=n.stateNode,!(n.flags&128)&&(typeof t.getDerivedStateFromError==`function`||a!==null&&typeof a.componentDidCatch==`function`&&(ou===null||!ou.has(a))))return n.flags|=65536,i&=-i,n.lanes|=i,i=Zs(i),Qs(i,e,n,r),Ga(n,i),!1}n=n.return}while(n!==null);return!1}var ec=Error(s(461)),tc=!1;function nc(e,t,n,r){t.child=e===null?Ra(t,null,n,r):La(t,e.child,n,r)}function rc(e,t,n,r,i){n=n.render;var a=t.ref;if(`ref`in r){var o={};for(var s in r)s!==`ref`&&(o[s]=r[s])}else o=r;return $i(t),r=So(e,t,n,o,a,i),s=Eo(),e!==null&&!tc?(Do(e,t,i),Dc(e,t,i)):(B&&s&&ki(t),t.flags|=1,nc(e,t,r,i),t.child)}function ic(e,t,n,r,i){if(e===null){var a=n.type;return typeof a==`function`&&!ci(a)&&a.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=a,ac(e,t,a,r,i)):(e=di(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!Oc(e,i)){var o=a.memoizedProps;if(n=n.compare,n=n===null?wr:n,n(o,r)&&e.ref===t.ref)return Dc(e,t,i)}return t.flags|=1,e=li(a,r),e.ref=t.ref,e.return=t,t.child=e}function ac(e,t,n,r,i){if(e!==null){var a=e.memoizedProps;if(wr(a,r)&&e.ref===t.ref)if(tc=!1,t.pendingProps=r=a,Oc(e,i))e.flags&131072&&(tc=!0);else return t.lanes=e.lanes,Dc(e,t,i)}return pc(e,t,n,r,i)}function oc(e,t,n,r){var i=r.children,a=e===null?null:e.memoizedState;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.mode===`hidden`){if(t.flags&128){if(a=a===null?n:a.baseLanes|n,e!==null){for(r=t.child=e.child,i=0;r!==null;)i=i|r.lanes|r.childLanes,r=r.sibling;r=i&~a}else r=0,t.child=null;return cc(e,t,a,n,r)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&ya(t,a===null?null:a.cachePool),a===null?$a():Qa(t,a),ao(t);else return r=t.lanes=536870912,cc(e,t,a===null?n:a.baseLanes|n,n,r)}else a===null?(e!==null&&ya(t,null),$a(),oo(t)):(ya(t,a.cachePool),Qa(t,a),oo(t),t.memoizedState=null);return nc(e,t,i,n),t.child}function sc(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function cc(e,t,n,r,i){var a=va();return a=a===null?null:{parent:oa._currentValue,pool:a},t.memoizedState={baseLanes:n,cachePool:a},e!==null&&ya(t,null),$a(),ao(t),e!==null&&Zi(e,t,r,!0),t.childLanes=i,null}function lc(e,t){return t=Sc({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function uc(e,t,n){return La(t,e.child,null,n),e=lc(t,t.pendingProps),e.flags|=2,so(t),t.memoizedState=null,e}function dc(e,t,n){var r=t.pendingProps,i=(t.flags&128)!=0;if(t.flags&=-129,e===null){if(B){if(r.mode===`hidden`)return e=lc(t,r),t.lanes=536870912,sc(null,e);if(io(t),(e=Ni)?(e=cf(e,Fi),e=e!==null&&e.data===`&`?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:wi===null?null:{id:Ti,overflow:Ei},retryLane:536870912,hydrationErrors:null},n=mi(e),n.return=t,t.child=n,Mi=t,Ni=null)):e=null,e===null)throw Li(t);return t.lanes=536870912,null}return lc(t,r)}var a=e.memoizedState;if(a!==null){var o=a.dehydrated;if(io(t),i)if(t.flags&256)t.flags&=-257,t=uc(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(s(558));else if(tc||Zi(e,t,n,!1),i=(n&e.childLanes)!==0,tc||i){if(r=Bl,r!==null&&(o=ut(r,n),o!==0&&o!==a.retryLane))throw a.retryLane=o,ni(e,o),vu(r,e,o),ec;Au(),t=uc(e,t,n)}else e=a.treeContext,Ni=ff(o.nextSibling),Mi=t,B=!0,Pi=null,Fi=!1,e!==null&&ji(t,e),t=lc(t,r),t.flags|=4096;return t}return e=li(e.child,{mode:r.mode,children:r.children}),e.ref=t.ref,t.child=e,e.return=t,e}function fc(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!=`function`&&typeof n!=`object`)throw Error(s(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function pc(e,t,n,r,i){return $i(t),n=So(e,t,n,r,void 0,i),r=Eo(),e!==null&&!tc?(Do(e,t,i),Dc(e,t,i)):(B&&r&&ki(t),t.flags|=1,nc(e,t,n,i),t.child)}function mc(e,t,n,r,i,a){return $i(t),t.updateQueue=null,n=wo(t,r,n,i),Co(e),r=Eo(),e!==null&&!tc?(Do(e,t,a),Dc(e,t,a)):(B&&r&&ki(t),t.flags|=1,nc(e,t,n,a),t.child)}function hc(e,t,n,r,i){if($i(t),t.stateNode===null){var a=ai,o=n.contextType;typeof o==`object`&&o&&(a=ea(o)),a=new n(r,a),t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Vs,t.stateNode=a,a._reactInternals=t,a=t.stateNode,a.props=r,a.state=t.memoizedState,a.refs={},Ba(t),o=n.contextType,a.context=typeof o==`object`&&o?ea(o):ai,a.state=t.memoizedState,o=n.getDerivedStateFromProps,typeof o==`function`&&(Bs(t,n,o,r),a.state=t.memoizedState),typeof n.getDerivedStateFromProps==`function`||typeof a.getSnapshotBeforeUpdate==`function`||typeof a.UNSAFE_componentWillMount!=`function`&&typeof a.componentWillMount!=`function`||(o=a.state,typeof a.componentWillMount==`function`&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount==`function`&&a.UNSAFE_componentWillMount(),o!==a.state&&Vs.enqueueReplaceState(a,a.state,null),qa(t,r,a,i),Ka(),a.state=t.memoizedState),typeof a.componentDidMount==`function`&&(t.flags|=4194308),r=!0}else if(e===null){a=t.stateNode;var s=t.memoizedProps,c=Ws(n,s);a.props=c;var l=a.context,u=n.contextType;o=ai,typeof u==`object`&&u&&(o=ea(u));var d=n.getDerivedStateFromProps;u=typeof d==`function`||typeof a.getSnapshotBeforeUpdate==`function`,s=t.pendingProps!==s,u||typeof a.UNSAFE_componentWillReceiveProps!=`function`&&typeof a.componentWillReceiveProps!=`function`||(s||l!==o)&&Us(t,a,r,o),za=!1;var f=t.memoizedState;a.state=f,qa(t,r,a,i),Ka(),l=t.memoizedState,s||f!==l||za?(typeof d==`function`&&(Bs(t,n,d,r),l=t.memoizedState),(c=za||Hs(t,n,c,r,f,l,o))?(u||typeof a.UNSAFE_componentWillMount!=`function`&&typeof a.componentWillMount!=`function`||(typeof a.componentWillMount==`function`&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount==`function`&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount==`function`&&(t.flags|=4194308)):(typeof a.componentDidMount==`function`&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=o,r=c):(typeof a.componentDidMount==`function`&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Va(e,t),o=t.memoizedProps,u=Ws(n,o),a.props=u,d=t.pendingProps,f=a.context,l=n.contextType,c=ai,typeof l==`object`&&l&&(c=ea(l)),s=n.getDerivedStateFromProps,(l=typeof s==`function`||typeof a.getSnapshotBeforeUpdate==`function`)||typeof a.UNSAFE_componentWillReceiveProps!=`function`&&typeof a.componentWillReceiveProps!=`function`||(o!==d||f!==c)&&Us(t,a,r,c),za=!1,f=t.memoizedState,a.state=f,qa(t,r,a,i),Ka();var p=t.memoizedState;o!==d||f!==p||za||e!==null&&e.dependencies!==null&&Qi(e.dependencies)?(typeof s==`function`&&(Bs(t,n,s,r),p=t.memoizedState),(u=za||Hs(t,n,u,r,f,p,c)||e!==null&&e.dependencies!==null&&Qi(e.dependencies))?(l||typeof a.UNSAFE_componentWillUpdate!=`function`&&typeof a.componentWillUpdate!=`function`||(typeof a.componentWillUpdate==`function`&&a.componentWillUpdate(r,p,c),typeof a.UNSAFE_componentWillUpdate==`function`&&a.UNSAFE_componentWillUpdate(r,p,c)),typeof a.componentDidUpdate==`function`&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate==`function`&&(t.flags|=1024)):(typeof a.componentDidUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=c,r=u):(typeof a.componentDidUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return a=r,fc(e,t),r=(t.flags&128)!=0,a||r?(a=t.stateNode,n=r&&typeof n.getDerivedStateFromError!=`function`?null:a.render(),t.flags|=1,e!==null&&r?(t.child=La(t,e.child,null,i),t.child=La(t,null,n,i)):nc(e,t,n,i),t.memoizedState=a.state,e=t.child):e=Dc(e,t,i),e}function gc(e,t,n,r){return Vi(),t.flags|=256,nc(e,t,n,r),t.child}var _c={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function vc(e){return{baseLanes:e,cachePool:ba()}}function yc(e,t,n){return e=e===null?0:e.childLanes&~n,t&&(e|=Zl),e}function bc(e,t,n){var r=t.pendingProps,i=!1,a=(t.flags&128)!=0,o;if((o=a)||(o=e!==null&&e.memoizedState===null?!1:(co.current&2)!=0),o&&(i=!0,t.flags&=-129),o=(t.flags&32)!=0,t.flags&=-33,e===null){if(B){if(i?ro(t):oo(t),(e=Ni)?(e=cf(e,Fi),e=e!==null&&e.data!==`&`?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:wi===null?null:{id:Ti,overflow:Ei},retryLane:536870912,hydrationErrors:null},n=mi(e),n.return=t,t.child=n,Mi=t,Ni=null)):e=null,e===null)throw Li(t);return uf(e)?t.lanes=32:t.lanes=536870912,null}var c=r.children;return r=r.fallback,i?(oo(t),i=t.mode,c=Sc({mode:`hidden`,children:c},i),r=fi(r,i,n,null),c.return=t,r.return=t,c.sibling=r,t.child=c,r=t.child,r.memoizedState=vc(n),r.childLanes=yc(e,o,n),t.memoizedState=_c,sc(null,r)):(ro(t),xc(t,c))}var l=e.memoizedState;if(l!==null&&(c=l.dehydrated,c!==null)){if(a)t.flags&256?(ro(t),t.flags&=-257,t=Cc(e,t,n)):t.memoizedState===null?(oo(t),c=r.fallback,i=t.mode,r=Sc({mode:`visible`,children:r.children},i),c=fi(c,i,n,null),c.flags|=2,r.return=t,c.return=t,r.sibling=c,t.child=r,La(t,e.child,null,n),r=t.child,r.memoizedState=vc(n),r.childLanes=yc(e,o,n),t.memoizedState=_c,t=sc(null,r)):(oo(t),t.child=e.child,t.flags|=128,t=null);else if(ro(t),uf(c)){if(o=c.nextSibling&&c.nextSibling.dataset,o)var u=o.dgst;o=u,r=Error(s(419)),r.stack=``,r.digest=o,Ui({value:r,source:null,stack:null}),t=Cc(e,t,n)}else if(tc||Zi(e,t,n,!1),o=(n&e.childLanes)!==0,tc||o){if(o=Bl,o!==null&&(r=ut(o,n),r!==0&&r!==l.retryLane))throw l.retryLane=r,ni(e,r),vu(o,e,r),ec;lf(c)||Au(),t=Cc(e,t,n)}else lf(c)?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,Ni=ff(c.nextSibling),Mi=t,B=!0,Pi=null,Fi=!1,e!==null&&ji(t,e),t=xc(t,r.children),t.flags|=4096);return t}return i?(oo(t),c=r.fallback,i=t.mode,l=e.child,u=l.sibling,r=li(l,{mode:`hidden`,children:r.children}),r.subtreeFlags=l.subtreeFlags&65011712,u===null?(c=fi(c,i,n,null),c.flags|=2):c=li(u,c),c.return=t,r.return=t,r.sibling=c,t.child=r,sc(null,r),r=t.child,c=e.child.memoizedState,c===null?c=vc(n):(i=c.cachePool,i===null?i=ba():(l=oa._currentValue,i=i.parent===l?i:{parent:l,pool:l}),c={baseLanes:c.baseLanes|n,cachePool:i}),r.memoizedState=c,r.childLanes=yc(e,o,n),t.memoizedState=_c,sc(e.child,r)):(ro(t),n=e.child,e=n.sibling,n=li(n,{mode:`visible`,children:r.children}),n.return=t,n.sibling=null,e!==null&&(o=t.deletions,o===null?(t.deletions=[e],t.flags|=16):o.push(e)),t.child=n,t.memoizedState=null,n)}function xc(e,t){return t=Sc({mode:`visible`,children:t},e.mode),t.return=e,e.child=t}function Sc(e,t){return e=si(22,e,null,t),e.lanes=0,e}function Cc(e,t,n){return La(t,e.child,null,n),e=xc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function wc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Yi(e.return,t,n)}function Tc(e,t,n,r,i,a){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,treeForkCount:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.treeForkCount=a)}function Ec(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;r=r.children;var o=co.current,s=(o&2)!=0;if(s?(o=o&1|2,t.flags|=128):o&=1,he(co,o),nc(e,t,r,n),r=B?xi:0,!s&&e!==null&&e.flags&128)a:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&wc(e,n,t);else if(e.tag===19)wc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break a;for(;e.sibling===null;){if(e.return===null||e.return===t)break a;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(i){case`forwards`:for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&lo(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Tc(t,!1,i,n,a,r);break;case`backwards`:case`unstable_legacy-backwards`:for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&lo(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Tc(t,!0,n,null,a,r);break;case`together`:Tc(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function Dc(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Jl|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(Zi(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,n=li(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=li(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Oc(e,t){return(e.lanes&t)===0?(e=e.dependencies,!!(e!==null&&Qi(e))):!0}function kc(e,t,n){switch(t.tag){case 3:be(t,t.stateNode.containerInfo),qi(t,oa,e.memoizedState.cache),Vi();break;case 27:case 5:Se(t);break;case 4:be(t,t.stateNode.containerInfo);break;case 10:qi(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,io(t),null;break;case 13:var r=t.memoizedState;if(r!==null)return r.dehydrated===null?(n&t.child.childLanes)===0?(ro(t),e=Dc(e,t,n),e===null?null:e.sibling):bc(e,t,n):(ro(t),t.flags|=128,null);ro(t);break;case 19:var i=(e.flags&128)!=0;if(r=(n&t.childLanes)!==0,r||=(Zi(e,t,n,!1),(n&t.childLanes)!==0),i){if(r)return Ec(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),he(co,co.current),r)break;return null;case 22:return t.lanes=0,oc(e,t,n,t.pendingProps);case 24:qi(t,oa,e.memoizedState.cache)}return Dc(e,t,n)}function Ac(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)tc=!0;else{if(!Oc(e,n)&&!(t.flags&128))return tc=!1,kc(e,t,n);tc=!!(e.flags&131072)}else tc=!1,B&&t.flags&1048576&&Oi(t,xi,t.index);switch(t.lanes=0,t.tag){case 16:a:{var r=t.pendingProps;if(e=Da(t.elementType),t.type=e,typeof e==`function`)ci(e)?(r=Ws(e,r),t.tag=1,t=hc(null,t,e,r,n)):(t.tag=0,t=pc(null,t,e,r,n));else{if(e!=null){var i=e.$$typeof;if(i===C){t.tag=11,t=rc(null,t,e,r,n);break a}else if(i===ne){t.tag=14,t=ic(null,t,e,r,n);break a}}throw t=T(e)||e,Error(s(306,t,``))}}return t;case 0:return pc(e,t,t.type,t.pendingProps,n);case 1:return r=t.type,i=Ws(r,t.pendingProps),hc(e,t,r,i,n);case 3:a:{if(be(t,t.stateNode.containerInfo),e===null)throw Error(s(387));r=t.pendingProps;var a=t.memoizedState;i=a.element,Va(e,t),qa(t,r,null,n);var o=t.memoizedState;if(r=o.cache,qi(t,oa,r),r!==a.cache&&Xi(t,[oa],n,!0),Ka(),r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){t=gc(e,t,r,n);break a}else if(r!==i){i=_i(Error(s(424)),t),Ui(i),t=gc(e,t,r,n);break a}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName===`HTML`?e.ownerDocument.body:e}for(Ni=ff(e.firstChild),Mi=t,B=!0,Pi=null,Fi=!0,n=Ra(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Vi(),r===i){t=Dc(e,t,n);break a}nc(e,t,r,n)}t=t.child}return t;case 26:return fc(e,t),e===null?(n=Mf(t.type,null,t.pendingProps,null))?t.memoizedState=n:B||(n=t.type,e=t.pendingProps,r=Wd(ve.current).createElement(n),r[gt]=t,r[_t]=e,Rd(r,n,e),kt(r),t.stateNode=r):t.memoizedState=Mf(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Se(t),e===null&&B&&(r=t.stateNode=gf(t.type,t.pendingProps,ve.current),Mi=t,Fi=!0,i=Ni,tf(t.type)?(pf=i,Ni=ff(r.firstChild)):Ni=i),nc(e,t,t.pendingProps.children,n),fc(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&B&&((i=r=Ni)&&(r=of(r,t.type,t.pendingProps,Fi),r===null?i=!1:(t.stateNode=r,Mi=t,Ni=ff(r.firstChild),Fi=!1,i=!0)),i||Li(t)),Se(t),i=t.type,a=t.pendingProps,o=e===null?null:e.memoizedProps,r=a.children,qd(i,a)?r=null:o!==null&&qd(i,o)&&(t.flags|=32),t.memoizedState!==null&&(i=So(e,t,To,null,null,n),tp._currentValue=i),fc(e,t),nc(e,t,r,n),t.child;case 6:return e===null&&B&&((e=n=Ni)&&(n=sf(n,t.pendingProps,Fi),n===null?e=!1:(t.stateNode=n,Mi=t,Ni=null,e=!0)),e||Li(t)),null;case 13:return bc(e,t,n);case 4:return be(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=La(t,null,r,n):nc(e,t,r,n),t.child;case 11:return rc(e,t,t.type,t.pendingProps,n);case 7:return nc(e,t,t.pendingProps,n),t.child;case 8:return nc(e,t,t.pendingProps.children,n),t.child;case 12:return nc(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,qi(t,t.type,r.value),nc(e,t,r.children,n),t.child;case 9:return i=t.type._context,r=t.pendingProps.children,$i(t),i=ea(i),r=r(i),t.flags|=1,nc(e,t,r,n),t.child;case 14:return ic(e,t,t.type,t.pendingProps,n);case 15:return ac(e,t,t.type,t.pendingProps,n);case 19:return Ec(e,t,n);case 31:return dc(e,t,n);case 22:return oc(e,t,n,t.pendingProps);case 24:return $i(t),r=ea(oa),e===null?(i=va(),i===null&&(i=Bl,a=sa(),i.pooledCache=a,a.refCount++,a!==null&&(i.pooledCacheLanes|=n),i=a),t.memoizedState={parent:r,cache:i},Ba(t),qi(t,oa,i)):((e.lanes&n)!==0&&(Va(e,t),qa(t,null,null,n),Ka()),i=e.memoizedState,a=t.memoizedState,i.parent===r?(r=a.cache,qi(t,oa,r),r!==i.cache&&Xi(t,[oa],n,!0)):(i={parent:r,cache:r},t.memoizedState=i,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=i),qi(t,oa,r))),nc(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function jc(e){e.flags|=4}function Mc(e,t,n,r,i){if((t=(e.mode&32)!=0)&&(t=!1),t){if(e.flags|=16777216,(i&335544128)===i)if(e.stateNode.complete)e.flags|=8192;else if(Du())e.flags|=8192;else throw Oa=wa,Sa}else e.flags&=-16777217}function Nc(e,t){if(t.type!==`stylesheet`||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!qf(t))if(Du())e.flags|=8192;else throw Oa=wa,Sa}function Pc(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag===22?536870912:it(),e.lanes|=t,Ql|=t)}function Fc(e,t){if(!B)switch(e.tailMode){case`hidden`:t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case`collapsed`:n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ic(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&65011712,r|=i.flags&65011712,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Lc(e,t,n){var r=t.pendingProps;switch(Ai(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ic(t),null;case 1:return Ic(t),null;case 3:return n=t.stateNode,r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Ji(oa),xe(),n.pendingContext&&=(n.context=n.pendingContext,null),(e===null||e.child===null)&&(Bi(t)?jc(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Hi())),Ic(t),null;case 26:var i=t.type,a=t.memoizedState;return e===null?(jc(t),a===null?(Ic(t),Mc(t,i,null,r,n)):(Ic(t),Nc(t,a))):a?a===e.memoizedState?(Ic(t),t.flags&=-16777217):(jc(t),Ic(t),Nc(t,a)):(e=e.memoizedProps,e!==r&&jc(t),Ic(t),Mc(t,i,e,r,n)),null;case 27:if(Ce(t),n=ve.current,i=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&jc(t);else{if(!r){if(t.stateNode===null)throw Error(s(166));return Ic(t),null}e=ge.current,Bi(t)?Ri(t,e):(e=gf(i,r,n),t.stateNode=e,jc(t))}return Ic(t),null;case 5:if(Ce(t),i=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&jc(t);else{if(!r){if(t.stateNode===null)throw Error(s(166));return Ic(t),null}if(a=ge.current,Bi(t))Ri(t,a);else{var o=Wd(ve.current);switch(a){case 1:a=o.createElementNS(`http://www.w3.org/2000/svg`,i);break;case 2:a=o.createElementNS(`http://www.w3.org/1998/Math/MathML`,i);break;default:switch(i){case`svg`:a=o.createElementNS(`http://www.w3.org/2000/svg`,i);break;case`math`:a=o.createElementNS(`http://www.w3.org/1998/Math/MathML`,i);break;case`script`:a=o.createElement(`div`),a.innerHTML=`<script><\/script>`,a=a.removeChild(a.firstChild);break;case`select`:a=typeof r.is==`string`?o.createElement(`select`,{is:r.is}):o.createElement(`select`),r.multiple?a.multiple=!0:r.size&&(a.size=r.size);break;default:a=typeof r.is==`string`?o.createElement(i,{is:r.is}):o.createElement(i)}}a[gt]=t,a[_t]=r;a:for(o=t.child;o!==null;){if(o.tag===5||o.tag===6)a.appendChild(o.stateNode);else if(o.tag!==4&&o.tag!==27&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===t)break a;for(;o.sibling===null;){if(o.return===null||o.return===t)break a;o=o.return}o.sibling.return=o.return,o=o.sibling}t.stateNode=a;a:switch(Rd(a,i,r),i){case`button`:case`input`:case`select`:case`textarea`:r=!!r.autoFocus;break a;case`img`:r=!0;break a;default:r=!1}r&&jc(t)}}return Ic(t),Mc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==r&&jc(t);else{if(typeof r!=`string`&&t.stateNode===null)throw Error(s(166));if(e=ve.current,Bi(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,i=Mi,i!==null)switch(i.tag){case 27:case 5:r=i.memoizedProps}e[gt]=t,e=!!(e.nodeValue===n||r!==null&&!0===r.suppressHydrationWarning||Fd(e.nodeValue,n)),e||Li(t,!0)}else e=Wd(e).createTextNode(r),e[gt]=t,t.stateNode=e}return Ic(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(r=Bi(t),n!==null){if(e===null){if(!r)throw Error(s(318));if(e=t.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(s(557));e[gt]=t}else Vi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ic(t),e=!1}else n=Hi(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(so(t),t):(so(t),null);if(t.flags&128)throw Error(s(558))}return Ic(t),null;case 13:if(r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(i=Bi(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(s(318));if(i=t.memoizedState,i=i===null?null:i.dehydrated,!i)throw Error(s(317));i[gt]=t}else Vi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ic(t),i=!1}else i=Hi(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return t.flags&256?(so(t),t):(so(t),null)}return so(t),t.flags&128?(t.lanes=n,t):(n=r!==null,e=e!==null&&e.memoizedState!==null,n&&(r=t.child,i=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(i=r.alternate.memoizedState.cachePool.pool),a=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(a=r.memoizedState.cachePool.pool),a!==i&&(r.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),Pc(t,t.updateQueue),Ic(t),null);case 4:return xe(),e===null&&Td(t.stateNode.containerInfo),Ic(t),null;case 10:return Ji(t.type),Ic(t),null;case 19:if(me(co),r=t.memoizedState,r===null)return Ic(t),null;if(i=(t.flags&128)!=0,a=r.rendering,a===null)if(i)Fc(r,!1);else{if(ql!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=lo(e),a!==null){for(t.flags|=128,Fc(r,!1),e=a.updateQueue,t.updateQueue=e,Pc(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)ui(n,e),n=n.sibling;return he(co,co.current&1|2),B&&Di(t,r.treeForkCount),t.child}e=e.sibling}r.tail!==null&&Ie()>iu&&(t.flags|=128,i=!0,Fc(r,!1),t.lanes=4194304)}else{if(!i)if(e=lo(a),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,Pc(t,e),Fc(r,!0),r.tail===null&&r.tailMode===`hidden`&&!a.alternate&&!B)return Ic(t),null}else 2*Ie()-r.renderingStartTime>iu&&n!==536870912&&(t.flags|=128,i=!0,Fc(r,!1),t.lanes=4194304);r.isBackwards?(a.sibling=t.child,t.child=a):(e=r.last,e===null?t.child=a:e.sibling=a,r.last=a)}return r.tail===null?(Ic(t),null):(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=Ie(),e.sibling=null,n=co.current,he(co,i?n&1|2:n&1),B&&Di(t,r.treeForkCount),e);case 22:case 23:return so(t),eo(),r=t.memoizedState!==null,e===null?r&&(t.flags|=8192):e.memoizedState!==null!==r&&(t.flags|=8192),r?n&536870912&&!(t.flags&128)&&(Ic(t),t.subtreeFlags&6&&(t.flags|=8192)):Ic(t),n=t.updateQueue,n!==null&&Pc(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),r=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),e!==null&&me(_a),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Ji(oa),Ic(t),null;case 25:return null;case 30:return null}throw Error(s(156,t.tag))}function Rc(e,t){switch(Ai(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ji(oa),xe(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Ce(t),null;case 31:if(t.memoizedState!==null){if(so(t),t.alternate===null)throw Error(s(340));Vi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(so(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));Vi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return me(co),null;case 4:return xe(),null;case 10:return Ji(t.type),null;case 22:case 23:return so(t),eo(),e!==null&&me(_a),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Ji(oa),null;case 25:return null;default:return null}}function zc(e,t){switch(Ai(t),t.tag){case 3:Ji(oa),xe();break;case 26:case 27:case 5:Ce(t);break;case 4:xe();break;case 31:t.memoizedState!==null&&so(t);break;case 13:so(t);break;case 19:me(co);break;case 10:Ji(t.type);break;case 22:case 23:so(t),eo(),e!==null&&me(_a);break;case 24:Ji(oa)}}function Bc(e,t){try{var n=t.updateQueue,r=n===null?null:n.lastEffect;if(r!==null){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var a=n.create,o=n.inst;r=a(),o.destroy=r}n=n.next}while(n!==i)}}catch(e){qu(t,t.return,e)}}function Vc(e,t,n){try{var r=t.updateQueue,i=r===null?null:r.lastEffect;if(i!==null){var a=i.next;r=a;do{if((r.tag&e)===e){var o=r.inst,s=o.destroy;if(s!==void 0){o.destroy=void 0,i=t;var c=n,l=s;try{l()}catch(e){qu(i,c,e)}}}r=r.next}while(r!==a)}}catch(e){qu(t,t.return,e)}}function Hc(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{Ya(t,n)}catch(t){qu(e,e.return,t)}}}function Uc(e,t,n){n.props=Ws(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(n){qu(e,t,n)}}function Wc(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;case 30:r=e.stateNode;break;default:r=e.stateNode}typeof n==`function`?e.refCleanup=n(r):n.current=r}}catch(n){qu(e,t,n)}}function Gc(e,t){var n=e.ref,r=e.refCleanup;if(n!==null)if(typeof r==`function`)try{r()}catch(n){qu(e,t,n)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n==`function`)try{n(null)}catch(n){qu(e,t,n)}else n.current=null}function Kc(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{a:switch(t){case`button`:case`input`:case`select`:case`textarea`:n.autoFocus&&r.focus();break a;case`img`:n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(t){qu(e,e.return,t)}}function qc(e,t,n){try{var r=e.stateNode;zd(r,e.type,n,t),r[_t]=t}catch(t){qu(e,e.return,t)}}function Jc(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&tf(e.type)||e.tag===4}function Yc(e){a:for(;;){for(;e.sibling===null;){if(e.return===null||Jc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&tf(e.type)||e.flags&2||e.child===null||e.tag===4)continue a;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Xc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName===`HTML`?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName===`HTML`?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ln));else if(r!==4&&(r===27&&tf(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Xc(e,t,n),e=e.sibling;e!==null;)Xc(e,t,n),e=e.sibling}function Zc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(r===27&&tf(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Zc(e,t,n),e=e.sibling;e!==null;)Zc(e,t,n),e=e.sibling}function Qc(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Rd(t,r,n),t[gt]=e,t[_t]=n}catch(t){qu(e,e.return,t)}}var $c=!1,el=!1,tl=!1,nl=typeof WeakSet==`function`?WeakSet:Set,rl=null;function il(e,t){if(e=e.containerInfo,Hd=up,e=Or(e),R(e)){if(`selectionStart`in e)var n={start:e.selectionStart,end:e.selectionEnd};else a:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break a}var o=0,c=-1,l=-1,u=0,d=0,f=e,p=null;b:for(;;){for(var m;f!==n||i!==0&&f.nodeType!==3||(c=o+i),f!==a||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===e)break b;if(p===n&&++u===i&&(c=o),p===a&&++d===r&&(l=o),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}n=c===-1||l===-1?null:{start:c,end:l}}else n=null}n||={start:0,end:0}}else n=null;for(Ud={focusedElem:e,selectionRange:n},up=!1,rl=t;rl!==null;)if(t=rl,e=t.child,t.subtreeFlags&1028&&e!==null)e.return=t,rl=e;else for(;rl!==null;){switch(t=rl,a=t.alternate,e=t.flags,t.tag){case 0:if(e&4&&(e=t.updateQueue,e=e===null?null:e.events,e!==null))for(n=0;n<e.length;n++)i=e[n],i.ref.impl=i.nextImpl;break;case 11:case 15:break;case 1:if(e&1024&&a!==null){e=void 0,n=t,i=a.memoizedProps,a=a.memoizedState,r=n.stateNode;try{var h=Ws(n.type,i);e=r.getSnapshotBeforeUpdate(h,a),r.__reactInternalSnapshotBeforeUpdate=e}catch(e){qu(n,n.return,e)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)af(e);else if(n===1)switch(e.nodeName){case`HEAD`:case`HTML`:case`BODY`:af(e);break;default:e.textContent=``}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(s(163))}if(e=t.sibling,e!==null){e.return=t.return,rl=e;break}rl=t.return}}function al(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:bl(e,n),r&4&&Bc(5,n);break;case 1:if(bl(e,n),r&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(e){qu(n,n.return,e)}else{var i=Ws(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(e){qu(n,n.return,e)}}r&64&&Hc(n),r&512&&Wc(n,n.return);break;case 3:if(bl(e,n),r&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{Ya(e,t)}catch(e){qu(n,n.return,e)}}break;case 27:t===null&&r&4&&Qc(n);case 26:case 5:bl(e,n),t===null&&r&4&&Kc(n),r&512&&Wc(n,n.return);break;case 12:bl(e,n);break;case 31:bl(e,n),r&4&&dl(e,n);break;case 13:bl(e,n),r&4&&fl(e,n),r&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=Zu.bind(null,n),df(e,n))));break;case 22:if(r=n.memoizedState!==null||$c,!r){t=t!==null&&t.memoizedState!==null||el,i=$c;var a=el;$c=r,(el=t)&&!a?Sl(e,n,(n.subtreeFlags&8772)!=0):bl(e,n),$c=i,el=a}break;case 30:break;default:bl(e,n)}}function ol(e){var t=e.alternate;t!==null&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&wt(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var sl=null,cl=!1;function ll(e,t,n){for(n=n.child;n!==null;)ul(e,t,n),n=n.sibling}function ul(e,t,n){if(Ge&&typeof Ge.onCommitFiberUnmount==`function`)try{Ge.onCommitFiberUnmount(We,n)}catch{}switch(n.tag){case 26:el||Gc(n,t),ll(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:el||Gc(n,t);var r=sl,i=cl;tf(n.type)&&(sl=n.stateNode,cl=!1),ll(e,t,n),_f(n.stateNode),sl=r,cl=i;break;case 5:el||Gc(n,t);case 6:if(r=sl,i=cl,sl=null,ll(e,t,n),sl=r,cl=i,sl!==null)if(cl)try{(sl.nodeType===9?sl.body:sl.nodeName===`HTML`?sl.ownerDocument.body:sl).removeChild(n.stateNode)}catch(e){qu(n,t,e)}else try{sl.removeChild(n.stateNode)}catch(e){qu(n,t,e)}break;case 18:sl!==null&&(cl?(e=sl,nf(e.nodeType===9?e.body:e.nodeName===`HTML`?e.ownerDocument.body:e,n.stateNode),Ip(e)):nf(sl,n.stateNode));break;case 4:r=sl,i=cl,sl=n.stateNode.containerInfo,cl=!0,ll(e,t,n),sl=r,cl=i;break;case 0:case 11:case 14:case 15:Vc(2,n,t),el||Vc(4,n,t),ll(e,t,n);break;case 1:el||(Gc(n,t),r=n.stateNode,typeof r.componentWillUnmount==`function`&&Uc(n,t,r)),ll(e,t,n);break;case 21:ll(e,t,n);break;case 22:el=(r=el)||n.memoizedState!==null,ll(e,t,n),el=r;break;default:ll(e,t,n)}}function dl(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Ip(e)}catch(e){qu(t,t.return,e)}}}function fl(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ip(e)}catch(e){qu(t,t.return,e)}}function pl(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new nl),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new nl),t;default:throw Error(s(435,e.tag))}}function ml(e,t){var n=pl(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var r=Qu.bind(null,e,t);t.then(r,r)}})}function hl(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r],a=e,o=t,c=o;a:for(;c!==null;){switch(c.tag){case 27:if(tf(c.type)){sl=c.stateNode,cl=!1;break a}break;case 5:sl=c.stateNode,cl=!1;break a;case 3:case 4:sl=c.stateNode.containerInfo,cl=!0;break a}c=c.return}if(sl===null)throw Error(s(160));ul(a,o,i),sl=null,cl=!1,a=i.alternate,a!==null&&(a.return=null),i.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)_l(t,e),t=t.sibling}var gl=null;function _l(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:hl(t,e),vl(e),r&4&&(Vc(3,e,e.return),Bc(3,e),Vc(5,e,e.return));break;case 1:hl(t,e),vl(e),r&512&&(el||n===null||Gc(n,n.return)),r&64&&$c&&(e=e.updateQueue,e!==null&&(r=e.callbacks,r!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?r:n.concat(r))));break;case 26:var i=gl;if(hl(t,e),vl(e),r&512&&(el||n===null||Gc(n,n.return)),r&4){var a=n===null?null:n.memoizedState;if(r=e.memoizedState,n===null)if(r===null)if(e.stateNode===null){a:{r=e.type,n=e.memoizedProps,i=i.ownerDocument||i;b:switch(r){case`title`:a=i.getElementsByTagName(`title`)[0],(!a||a[Ct]||a[gt]||a.namespaceURI===`http://www.w3.org/2000/svg`||a.hasAttribute(`itemprop`))&&(a=i.createElement(r),i.head.insertBefore(a,i.querySelector(`head > title`))),Rd(a,r,n),a[gt]=e,kt(a),r=a;break a;case`link`:var o=Wf(`link`,`href`,i).get(r+(n.href||``));if(o){for(var c=0;c<o.length;c++)if(a=o[c],a.getAttribute(`href`)===(n.href==null||n.href===``?null:n.href)&&a.getAttribute(`rel`)===(n.rel==null?null:n.rel)&&a.getAttribute(`title`)===(n.title==null?null:n.title)&&a.getAttribute(`crossorigin`)===(n.crossOrigin==null?null:n.crossOrigin)){o.splice(c,1);break b}}a=i.createElement(r),Rd(a,r,n),i.head.appendChild(a);break;case`meta`:if(o=Wf(`meta`,`content`,i).get(r+(n.content||``))){for(c=0;c<o.length;c++)if(a=o[c],a.getAttribute(`content`)===(n.content==null?null:``+n.content)&&a.getAttribute(`name`)===(n.name==null?null:n.name)&&a.getAttribute(`property`)===(n.property==null?null:n.property)&&a.getAttribute(`http-equiv`)===(n.httpEquiv==null?null:n.httpEquiv)&&a.getAttribute(`charset`)===(n.charSet==null?null:n.charSet)){o.splice(c,1);break b}}a=i.createElement(r),Rd(a,r,n),i.head.appendChild(a);break;default:throw Error(s(468,r))}a[gt]=e,kt(a),r=a}e.stateNode=r}else Gf(i,e.type,e.stateNode);else e.stateNode=zf(i,r,e.memoizedProps);else a===r?r===null&&e.stateNode!==null&&qc(e,e.memoizedProps,n.memoizedProps):(a===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):a.count--,r===null?Gf(i,e.type,e.stateNode):zf(i,r,e.memoizedProps))}break;case 27:hl(t,e),vl(e),r&512&&(el||n===null||Gc(n,n.return)),n!==null&&r&4&&qc(e,e.memoizedProps,n.memoizedProps);break;case 5:if(hl(t,e),vl(e),r&512&&(el||n===null||Gc(n,n.return)),e.flags&32){i=e.stateNode;try{en(i,``)}catch(t){qu(e,e.return,t)}}r&4&&e.stateNode!=null&&(i=e.memoizedProps,qc(e,i,n===null?i:n.memoizedProps)),r&1024&&(tl=!0);break;case 6:if(hl(t,e),vl(e),r&4){if(e.stateNode===null)throw Error(s(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(t){qu(e,e.return,t)}}break;case 3:if(Uf=null,i=gl,gl=bf(t.containerInfo),hl(t,e),gl=i,vl(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ip(t.containerInfo)}catch(t){qu(e,e.return,t)}tl&&(tl=!1,yl(e));break;case 4:r=gl,gl=bf(e.stateNode.containerInfo),hl(t,e),vl(e),gl=r;break;case 12:hl(t,e),vl(e);break;case 31:hl(t,e),vl(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,ml(e,r)));break;case 13:hl(t,e),vl(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(nu=Ie()),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,ml(e,r)));break;case 22:i=e.memoizedState!==null;var l=n!==null&&n.memoizedState!==null,u=$c,d=el;if($c=u||i,el=d||l,hl(t,e),el=d,$c=u,vl(e),r&8192)a:for(t=e.stateNode,t._visibility=i?t._visibility&-2:t._visibility|1,i&&(n===null||l||$c||el||xl(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){l=n=t;try{if(a=l.stateNode,i)o=a.style,typeof o.setProperty==`function`?o.setProperty(`display`,`none`,`important`):o.display=`none`;else{c=l.stateNode;var f=l.memoizedProps.style,p=f!=null&&f.hasOwnProperty(`display`)?f.display:null;c.style.display=p==null||typeof p==`boolean`?``:(``+p).trim()}}catch(e){qu(l,l.return,e)}}}else if(t.tag===6){if(n===null){l=t;try{l.stateNode.nodeValue=i?``:l.memoizedProps}catch(e){qu(l,l.return,e)}}}else if(t.tag===18){if(n===null){l=t;try{var m=l.stateNode;i?rf(m,!0):rf(l.stateNode,!1)}catch(e){qu(l,l.return,e)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break a;for(;t.sibling===null;){if(t.return===null||t.return===e)break a;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}r&4&&(r=e.updateQueue,r!==null&&(n=r.retryQueue,n!==null&&(r.retryQueue=null,ml(e,n))));break;case 19:hl(t,e),vl(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,ml(e,r)));break;case 30:break;case 21:break;default:hl(t,e),vl(e)}}function vl(e){var t=e.flags;if(t&2){try{for(var n,r=e.return;r!==null;){if(Jc(r)){n=r;break}r=r.return}if(n==null)throw Error(s(160));switch(n.tag){case 27:var i=n.stateNode;Zc(e,Yc(e),i);break;case 5:var a=n.stateNode;n.flags&32&&(en(a,``),n.flags&=-33),Zc(e,Yc(e),a);break;case 3:case 4:var o=n.stateNode.containerInfo;Xc(e,Yc(e),o);break;default:throw Error(s(161))}}catch(t){qu(e,e.return,t)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function yl(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;yl(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function bl(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)al(e,t.alternate,t),t=t.sibling}function xl(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Vc(4,t,t.return),xl(t);break;case 1:Gc(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount==`function`&&Uc(t,t.return,n),xl(t);break;case 27:_f(t.stateNode);case 26:case 5:Gc(t,t.return),xl(t);break;case 22:t.memoizedState===null&&xl(t);break;case 30:xl(t);break;default:xl(t)}e=e.sibling}}function Sl(e,t,n){for(n&&=(t.subtreeFlags&8772)!=0,t=t.child;t!==null;){var r=t.alternate,i=e,a=t,o=a.flags;switch(a.tag){case 0:case 11:case 15:Sl(i,a,n),Bc(4,a);break;case 1:if(Sl(i,a,n),r=a,i=r.stateNode,typeof i.componentDidMount==`function`)try{i.componentDidMount()}catch(e){qu(r,r.return,e)}if(r=a,i=r.updateQueue,i!==null){var s=r.stateNode;try{var c=i.shared.hiddenCallbacks;if(c!==null)for(i.shared.hiddenCallbacks=null,i=0;i<c.length;i++)Ja(c[i],s)}catch(e){qu(r,r.return,e)}}n&&o&64&&Hc(a),Wc(a,a.return);break;case 27:Qc(a);case 26:case 5:Sl(i,a,n),n&&r===null&&o&4&&Kc(a),Wc(a,a.return);break;case 12:Sl(i,a,n);break;case 31:Sl(i,a,n),n&&o&4&&dl(i,a);break;case 13:Sl(i,a,n),n&&o&4&&fl(i,a);break;case 22:a.memoizedState===null&&Sl(i,a,n),Wc(a,a.return);break;case 30:break;default:Sl(i,a,n)}t=t.sibling}}function Cl(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&ca(n))}function wl(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ca(e))}function Tl(e,t,n,r){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)El(e,t,n,r),t=t.sibling}function El(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Tl(e,t,n,r),i&2048&&Bc(9,t);break;case 1:Tl(e,t,n,r);break;case 3:Tl(e,t,n,r),i&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ca(e)));break;case 12:if(i&2048){Tl(e,t,n,r),e=t.stateNode;try{var a=t.memoizedProps,o=a.id,s=a.onPostCommit;typeof s==`function`&&s(o,t.alternate===null?`mount`:`update`,e.passiveEffectDuration,-0)}catch(e){qu(t,t.return,e)}}else Tl(e,t,n,r);break;case 31:Tl(e,t,n,r);break;case 13:Tl(e,t,n,r);break;case 23:break;case 22:a=t.stateNode,o=t.alternate,t.memoizedState===null?a._visibility&2?Tl(e,t,n,r):(a._visibility|=2,Dl(e,t,n,r,(t.subtreeFlags&10256)!=0||!1)):a._visibility&2?Tl(e,t,n,r):Ol(e,t),i&2048&&Cl(o,t);break;case 24:Tl(e,t,n,r),i&2048&&wl(t.alternate,t);break;default:Tl(e,t,n,r)}}function Dl(e,t,n,r,i){for(i&&=(t.subtreeFlags&10256)!=0||!1,t=t.child;t!==null;){var a=e,o=t,s=n,c=r,l=o.flags;switch(o.tag){case 0:case 11:case 15:Dl(a,o,s,c,i),Bc(8,o);break;case 23:break;case 22:var u=o.stateNode;o.memoizedState===null?(u._visibility|=2,Dl(a,o,s,c,i)):u._visibility&2?Dl(a,o,s,c,i):Ol(a,o),i&&l&2048&&Cl(o.alternate,o);break;case 24:Dl(a,o,s,c,i),i&&l&2048&&wl(o.alternate,o);break;default:Dl(a,o,s,c,i)}t=t.sibling}}function Ol(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:Ol(n,r),i&2048&&Cl(r.alternate,r);break;case 24:Ol(n,r),i&2048&&wl(r.alternate,r);break;default:Ol(n,r)}t=t.sibling}}var kl=8192;function Al(e,t,n){if(e.subtreeFlags&kl)for(e=e.child;e!==null;)jl(e,t,n),e=e.sibling}function jl(e,t,n){switch(e.tag){case 26:Al(e,t,n),e.flags&kl&&e.memoizedState!==null&&Jf(n,gl,e.memoizedState,e.memoizedProps);break;case 5:Al(e,t,n);break;case 3:case 4:var r=gl;gl=bf(e.stateNode.containerInfo),Al(e,t,n),gl=r;break;case 22:e.memoizedState===null&&(r=e.alternate,r!==null&&r.memoizedState!==null?(r=kl,kl=16777216,Al(e,t,n),kl=r):Al(e,t,n));break;default:Al(e,t,n)}}function Ml(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Nl(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];rl=r,Il(r,e)}Ml(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Pl(e),e=e.sibling}function Pl(e){switch(e.tag){case 0:case 11:case 15:Nl(e),e.flags&2048&&Vc(9,e,e.return);break;case 3:Nl(e);break;case 12:Nl(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Fl(e)):Nl(e);break;default:Nl(e)}}function Fl(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];rl=r,Il(r,e)}Ml(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Vc(8,t,t.return),Fl(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Fl(t));break;default:Fl(t)}e=e.sibling}}function Il(e,t){for(;rl!==null;){var n=rl;switch(n.tag){case 0:case 11:case 15:Vc(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var r=n.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:ca(n.memoizedState.cache)}if(r=n.child,r!==null)r.return=n,rl=r;else a:for(n=e;rl!==null;){r=rl;var i=r.sibling,a=r.return;if(ol(r),r===n){rl=null;break a}if(i!==null){i.return=a,rl=i;break a}rl=a}}}var Ll={getCacheForType:function(e){var t=ea(oa),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return ea(oa).controller.signal}},Rl=typeof WeakMap==`function`?WeakMap:Map,zl=0,Bl=null,K=null,q=0,Vl=0,Hl=null,Ul=!1,Wl=!1,Gl=!1,Kl=0,ql=0,Jl=0,Yl=0,Xl=0,Zl=0,Ql=0,$l=null,eu=null,tu=!1,nu=0,ru=0,iu=1/0,au=null,ou=null,su=0,cu=null,lu=null,uu=0,du=0,fu=null,pu=null,mu=0,hu=null;function gu(){return zl&2&&q!==0?q&-q:E.T===null?pt():md()}function _u(){if(Zl===0)if(!(q&536870912)||B){var e=Qe;Qe<<=1,!(Qe&3932160)&&(Qe=262144),Zl=e}else Zl=536870912;return e=to.current,e!==null&&(e.flags|=32),Zl}function vu(e,t,n){(e===Bl&&(Vl===2||Vl===9)||e.cancelPendingCommit!==null)&&(Tu(e,0),Su(e,q,Zl,!1)),ot(e,n),(!(zl&2)||e!==Bl)&&(e===Bl&&(!(zl&2)&&(Yl|=n),ql===4&&Su(e,q,Zl,!1)),od(e))}function yu(e,t,n){if(zl&6)throw Error(s(327));var r=!n&&(t&127)==0&&(t&e.expiredLanes)===0||nt(e,t),i=r?Nu(e,t):ju(e,t,!0),a=r;do{if(i===0){Wl&&!r&&Su(e,t,0,!1);break}else{if(n=e.current.alternate,a&&!xu(n)){i=ju(e,t,!1),a=!1;continue}if(i===2){if(a=t,e.errorRecoveryDisabledLanes&a)var o=0;else o=e.pendingLanes&-536870913,o=o===0?o&536870912?536870912:0:o;if(o!==0){t=o;a:{var c=e;i=$l;var l=c.current.memoizedState.isDehydrated;if(l&&(Tu(c,o).flags|=256),o=ju(c,o,!1),o!==2){if(Gl&&!l){c.errorRecoveryDisabledLanes|=a,Yl|=a,i=4;break a}a=eu,eu=i,a!==null&&(eu===null?eu=a:eu.push.apply(eu,a))}i=o}if(a=!1,i!==2)continue}}if(i===1){Tu(e,0),Su(e,t,0,!0);break}a:{switch(r=e,a=i,a){case 0:case 1:throw Error(s(345));case 4:if((t&4194048)!==t)break;case 6:Su(r,t,Zl,!Ul);break a;case 2:eu=null;break;case 3:case 5:break;default:throw Error(s(329))}if((t&62914560)===t&&(i=nu+300-Ie(),10<i)){if(Su(r,t,Zl,!Ul),tt(r,0,!0)!==0)break a;uu=t,r.timeoutHandle=Xd(bu.bind(null,r,n,eu,au,tu,t,Zl,Yl,Ql,Ul,a,`Throttled`,-0,0),i);break a}bu(r,n,eu,au,tu,t,Zl,Yl,Ql,Ul,a,null,-0,0)}}break}while(1);od(e)}function bu(e,t,n,r,i,a,o,s,c,l,u,d,f,p){if(e.timeoutHandle=-1,d=t.subtreeFlags,d&8192||(d&16785408)==16785408){d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ln},jl(t,a,d);var m=(a&62914560)===a?nu-Ie():(a&4194048)===a?ru-Ie():0;if(m=Xf(d,m),m!==null){uu=a,e.cancelPendingCommit=m(Bu.bind(null,e,t,a,n,r,i,o,s,c,u,d,null,f,p)),Su(e,a,o,!l);return}}Bu(e,t,a,n,r,i,o,s,c)}function xu(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!Cr(a(),i))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Su(e,t,n,r){t&=~Xl,t&=~Yl,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var a=31-qe(i),o=1<<a;r[a]=-1,i&=~o}n!==0&&ct(e,n,t)}function Cu(){return zl&6?!0:(sd(0,!1),!1)}function wu(){if(K!==null){if(Vl===0)var e=K.return;else e=K,Ki=Gi=null,Oo(e),ja=null,Ma=0,e=K;for(;e!==null;)zc(e.alternate,e),e=e.return;K=null}}function Tu(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,Zd(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),uu=0,wu(),Bl=e,K=n=li(e.current,null),q=t,Vl=0,Hl=null,Ul=!1,Wl=nt(e,t),Gl=!1,Ql=Zl=Xl=Yl=Jl=ql=0,eu=$l=null,tu=!1,t&8&&(t|=t&32);var r=e.entangledLanes;if(r!==0)for(e=e.entanglements,r&=t;0<r;){var i=31-qe(r),a=1<<i;t|=e[i],r&=~a}return Kl=t,$r(),n}function Eu(e,t){H=null,E.H=Is,t===xa||t===Ca?(t=ka(),Vl=3):t===Sa?(t=ka(),Vl=4):Vl=t===ec?8:typeof t==`object`&&t&&typeof t.then==`function`?6:1,Hl=t,K===null&&(ql=1,Js(e,_i(t,e.current)))}function Du(){var e=to.current;return e===null?!0:(q&4194048)===q?no===null:(q&62914560)===q||q&536870912?e===no:!1}function Ou(){var e=E.H;return E.H=Is,e===null?Is:e}function ku(){var e=E.A;return E.A=Ll,e}function Au(){ql=4,Ul||(q&4194048)!==q&&to.current!==null||(Wl=!0),!(Jl&134217727)&&!(Yl&134217727)||Bl===null||Su(Bl,q,Zl,!1)}function ju(e,t,n){var r=zl;zl|=2;var i=Ou(),a=ku();(Bl!==e||q!==t)&&(au=null,Tu(e,t)),t=!1;var o=ql;a:do try{if(Vl!==0&&K!==null){var s=K,c=Hl;switch(Vl){case 8:wu(),o=6;break a;case 3:case 2:case 9:case 6:to.current===null&&(t=!0);var l=Vl;if(Vl=0,Hl=null,Lu(e,s,c,l),n&&Wl){o=0;break a}break;default:l=Vl,Vl=0,Hl=null,Lu(e,s,c,l)}}Mu(),o=ql;break}catch(t){Eu(e,t)}while(1);return t&&e.shellSuspendCounter++,Ki=Gi=null,zl=r,E.H=i,E.A=a,K===null&&(Bl=null,q=0,$r()),o}function Mu(){for(;K!==null;)Fu(K)}function Nu(e,t){var n=zl;zl|=2;var r=Ou(),i=ku();Bl!==e||q!==t?(au=null,iu=Ie()+500,Tu(e,t)):Wl=nt(e,t);a:do try{if(Vl!==0&&K!==null){t=K;var a=Hl;b:switch(Vl){case 1:Vl=0,Hl=null,Lu(e,t,a,1);break;case 2:case 9:if(Ta(a)){Vl=0,Hl=null,Iu(t);break}t=function(){Vl!==2&&Vl!==9||Bl!==e||(Vl=7),od(e)},a.then(t,t);break a;case 3:Vl=7;break a;case 4:Vl=5;break a;case 7:Ta(a)?(Vl=0,Hl=null,Iu(t)):(Vl=0,Hl=null,Lu(e,t,a,7));break;case 5:var o=null;switch(K.tag){case 26:o=K.memoizedState;case 5:case 27:var c=K;if(o?qf(o):c.stateNode.complete){Vl=0,Hl=null;var l=c.sibling;if(l!==null)K=l;else{var u=c.return;u===null?K=null:(K=u,Ru(u))}break b}}Vl=0,Hl=null,Lu(e,t,a,5);break;case 6:Vl=0,Hl=null,Lu(e,t,a,6);break;case 8:wu(),ql=6;break a;default:throw Error(s(462))}}Pu();break}catch(t){Eu(e,t)}while(1);return Ki=Gi=null,E.H=r,E.A=i,zl=n,K===null?(Bl=null,q=0,$r(),ql):0}function Pu(){for(;K!==null&&!Pe();)Fu(K)}function Fu(e){var t=Ac(e.alternate,e,Kl);e.memoizedProps=e.pendingProps,t===null?Ru(e):K=t}function Iu(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=mc(n,t,t.pendingProps,t.type,void 0,q);break;case 11:t=mc(n,t,t.pendingProps,t.type.render,t.ref,q);break;case 5:Oo(t);default:zc(n,t),t=K=ui(t,Kl),t=Ac(n,t,Kl)}e.memoizedProps=e.pendingProps,t===null?Ru(e):K=t}function Lu(e,t,n,r){Ki=Gi=null,Oo(t),ja=null,Ma=0;var i=t.return;try{if($s(e,i,t,n,q)){ql=1,Js(e,_i(n,e.current)),K=null;return}}catch(t){if(i!==null)throw K=i,t;ql=1,Js(e,_i(n,e.current)),K=null;return}t.flags&32768?(B||r===1?e=!0:Wl||q&536870912?e=!1:(Ul=e=!0,(r===2||r===9||r===3||r===6)&&(r=to.current,r!==null&&r.tag===13&&(r.flags|=16384))),zu(t,e)):Ru(t)}function Ru(e){var t=e;do{if(t.flags&32768){zu(t,Ul);return}e=t.return;var n=Lc(t.alternate,t,Kl);if(n!==null){K=n;return}if(t=t.sibling,t!==null){K=t;return}K=t=e}while(t!==null);ql===0&&(ql=5)}function zu(e,t){do{var n=Rc(e.alternate,e);if(n!==null){n.flags&=32767,K=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){K=e;return}K=e=n}while(e!==null);ql=6,K=null}function Bu(e,t,n,r,i,a,o,c,l){e.cancelPendingCommit=null;do Wu();while(su!==0);if(zl&6)throw Error(s(327));if(t!==null){if(t===e.current)throw Error(s(177));if(a=t.lanes|t.childLanes,a|=Qr,st(e,n,a,o,c,l),e===Bl&&(K=Bl=null,q=0),lu=t,cu=e,uu=n,du=a,fu=i,pu=r,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,$u(Be,function(){return Gu(),null})):(e.callbackNode=null,e.callbackPriority=0),r=(t.flags&13878)!=0,t.subtreeFlags&13878||r){r=E.T,E.T=null,i=D.p,D.p=2,o=zl,zl|=4;try{il(e,t,n)}finally{zl=o,D.p=i,E.T=r}}su=1,Vu(),Hu(),Uu()}}function Vu(){if(su===1){su=0;var e=cu,t=lu,n=(t.flags&13878)!=0;if(t.subtreeFlags&13878||n){n=E.T,E.T=null;var r=D.p;D.p=2;var i=zl;zl|=4;try{_l(t,e);var a=Ud,o=Or(e.containerInfo),s=a.focusedElem,c=a.selectionRange;if(o!==s&&s&&s.ownerDocument&&Dr(s.ownerDocument.documentElement,s)){if(c!==null&&R(s)){var l=c.start,u=c.end;if(u===void 0&&(u=l),`selectionStart`in s)s.selectionStart=l,s.selectionEnd=Math.min(u,s.value.length);else{var d=s.ownerDocument||document,f=d&&d.defaultView||window;if(f.getSelection){var p=f.getSelection(),m=s.textContent.length,h=Math.min(c.start,m),g=c.end===void 0?h:Math.min(c.end,m);!p.extend&&h>g&&(o=g,g=h,h=o);var _=Er(s,h),v=Er(s,g);if(_&&v&&(p.rangeCount!==1||p.anchorNode!==_.node||p.anchorOffset!==_.offset||p.focusNode!==v.node||p.focusOffset!==v.offset)){var y=d.createRange();y.setStart(_.node,_.offset),p.removeAllRanges(),h>g?(p.addRange(y),p.extend(v.node,v.offset)):(y.setEnd(v.node,v.offset),p.addRange(y))}}}}for(d=[],p=s;p=p.parentNode;)p.nodeType===1&&d.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof s.focus==`function`&&s.focus(),s=0;s<d.length;s++){var b=d[s];b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}up=!!Hd,Ud=Hd=null}finally{zl=i,D.p=r,E.T=n}}e.current=t,su=2}}function Hu(){if(su===2){su=0;var e=cu,t=lu,n=(t.flags&8772)!=0;if(t.subtreeFlags&8772||n){n=E.T,E.T=null;var r=D.p;D.p=2;var i=zl;zl|=4;try{al(e,t.alternate,t)}finally{zl=i,D.p=r,E.T=n}}su=3}}function Uu(){if(su===4||su===3){su=0,Fe();var e=cu,t=lu,n=uu,r=pu;t.subtreeFlags&10256||t.flags&10256?su=5:(su=0,lu=cu=null,J(e,e.pendingLanes));var i=e.pendingLanes;if(i===0&&(ou=null),ft(n),t=t.stateNode,Ge&&typeof Ge.onCommitFiberRoot==`function`)try{Ge.onCommitFiberRoot(We,t,void 0,(t.current.flags&128)==128)}catch{}if(r!==null){t=E.T,i=D.p,D.p=2,E.T=null;try{for(var a=e.onRecoverableError,o=0;o<r.length;o++){var s=r[o];a(s.value,{componentStack:s.stack})}}finally{E.T=t,D.p=i}}uu&3&&Wu(),od(e),i=e.pendingLanes,n&261930&&i&42?e===hu?mu++:(mu=0,hu=e):mu=0,sd(0,!1)}}function J(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,ca(t)))}function Wu(){return Vu(),Hu(),Uu(),Gu()}function Gu(){if(su!==5)return!1;var e=cu,t=du;du=0;var n=ft(uu),r=E.T,i=D.p;try{D.p=32>n?32:n,E.T=null,n=fu,fu=null;var a=cu,o=uu;if(su=0,lu=cu=null,uu=0,zl&6)throw Error(s(331));var c=zl;if(zl|=4,Pl(a.current),El(a,a.current,o,n),zl=c,sd(0,!1),Ge&&typeof Ge.onPostCommitFiberRoot==`function`)try{Ge.onPostCommitFiberRoot(We,a)}catch{}return!0}finally{D.p=i,E.T=r,J(e,t)}}function Ku(e,t,n){t=_i(n,t),t=Xs(e.stateNode,t,2),e=Ua(e,t,2),e!==null&&(ot(e,2),od(e))}function qu(e,t,n){if(e.tag===3)Ku(e,e,n);else for(;t!==null;){if(t.tag===3){Ku(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError==`function`||typeof r.componentDidCatch==`function`&&(ou===null||!ou.has(r))){e=_i(n,e),n=Zs(2),r=Ua(t,n,2),r!==null&&(Qs(n,r,t,e),ot(r,2),od(r));break}}t=t.return}}function Ju(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Rl;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(Gl=!0,i.add(n),e=Yu.bind(null,e,t,n),t.then(e,e))}function Yu(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Bl===e&&(q&n)===n&&(ql===4||ql===3&&(q&62914560)===q&&300>Ie()-nu?!(zl&2)&&Tu(e,0):Xl|=n,Ql===q&&(Ql=0)),od(e)}function Xu(e,t){t===0&&(t=it()),e=ni(e,t),e!==null&&(ot(e,t),od(e))}function Zu(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Xu(e,n)}function Qu(e,t){var n=0;switch(e.tag){case 31:case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(s(314))}r!==null&&r.delete(t),Xu(e,n)}function $u(e,t){return Me(e,t)}var ed=null,td=null,nd=!1,rd=!1,id=!1,ad=0;function od(e){e!==td&&e.next===null&&(td===null?ed=td=e:td=td.next=e),rd=!0,nd||(nd=!0,pd())}function sd(e,t){if(!id&&rd){id=!0;do for(var n=!1,r=ed;r!==null;){if(!t)if(e!==0){var i=r.pendingLanes;if(i===0)var a=0;else{var o=r.suspendedLanes,s=r.pingedLanes;a=(1<<31-qe(42|e)+1)-1,a&=i&~(o&~s),a=a&201326741?a&201326741|1:a?a|2:0}a!==0&&(n=!0,fd(r,a))}else a=q,a=tt(r,r===Bl?a:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),!(a&3)||nt(r,a)||(n=!0,fd(r,a));r=r.next}while(n);id=!1}}function cd(){ld()}function ld(){rd=nd=!1;var e=0;ad!==0&&Yd()&&(e=ad);for(var t=Ie(),n=null,r=ed;r!==null;){var i=r.next,a=ud(r,t);a===0?(r.next=null,n===null?ed=i:n.next=i,i===null&&(td=n)):(n=r,(e!==0||a&3)&&(rd=!0)),r=i}su!==0&&su!==5||sd(e,!1),ad!==0&&(ad=0)}function ud(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes&-62914561;0<a;){var o=31-qe(a),s=1<<o,c=i[o];c===-1?((s&n)===0||(s&r)!==0)&&(i[o]=rt(s,t)):c<=t&&(e.expiredLanes|=s),a&=~s}if(t=Bl,n=q,n=tt(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r=e.callbackNode,n===0||e===t&&(Vl===2||Vl===9)||e.cancelPendingCommit!==null)return r!==null&&r!==null&&Ne(r),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||nt(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(r!==null&&Ne(r),ft(n)){case 2:case 8:n=ze;break;case 32:n=Be;break;case 268435456:n=Ve;break;default:n=Be}return r=dd.bind(null,e),n=Me(n,r),e.callbackPriority=t,e.callbackNode=n,t}return r!==null&&r!==null&&Ne(r),e.callbackPriority=2,e.callbackNode=null,2}function dd(e,t){if(su!==0&&su!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Wu()&&e.callbackNode!==n)return null;var r=q;return r=tt(e,e===Bl?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r===0?null:(yu(e,r,t),ud(e,Ie()),e.callbackNode!=null&&e.callbackNode===n?dd.bind(null,e):null)}function fd(e,t){if(Wu())return null;yu(e,t,!0)}function pd(){$d(function(){zl&6?Me(Re,cd):ld()})}function md(){if(ad===0){var e=da;e===0&&(e=Ze,Ze<<=1,!(Ze&261888)&&(Ze=256)),ad=e}return ad}function hd(e){return e==null||typeof e==`symbol`||typeof e==`boolean`?null:typeof e==`function`?e:cn(``+e)}function gd(e,t){var n=t.ownerDocument.createElement(`input`);return n.name=t.name,n.value=t.value,e.id&&n.setAttribute(`form`,e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function _d(e,t,n,r,i){if(t===`submit`&&n&&n.stateNode===i){var a=hd((i[_t]||null).action),o=r.submitter;o&&(t=(t=o[_t]||null)?hd(t.formAction):o.getAttribute(`formAction`),t!==null&&(a=t,o=null));var s=new An(`action`,`action`,null,r,i);e.push({event:s,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(ad!==0){var e=o?gd(i,o):new FormData(i);Ss(n,{pending:!0,data:e,method:i.method,action:a},null,e)}}else typeof a==`function`&&(s.preventDefault(),e=o?gd(i,o):new FormData(i),Ss(n,{pending:!0,data:e,method:i.method,action:a},a,e))},currentTarget:i}]})}}for(var vd=0;vd<qr.length;vd++){var yd=qr[vd];Jr(yd.toLowerCase(),`on`+(yd[0].toUpperCase()+yd.slice(1)))}Jr(zr,`onAnimationEnd`),Jr(Br,`onAnimationIteration`),Jr(Vr,`onAnimationStart`),Jr(`dblclick`,`onDoubleClick`),Jr(`focusin`,`onFocus`),Jr(`focusout`,`onBlur`),Jr(Hr,`onTransitionRun`),Jr(Ur,`onTransitionStart`),Jr(Wr,`onTransitionCancel`),Jr(Gr,`onTransitionEnd`),Nt(`onMouseEnter`,[`mouseout`,`mouseover`]),Nt(`onMouseLeave`,[`mouseout`,`mouseover`]),Nt(`onPointerEnter`,[`pointerout`,`pointerover`]),Nt(`onPointerLeave`,[`pointerout`,`pointerover`]),Mt(`onChange`,`change click focusin focusout input keydown keyup selectionchange`.split(` `)),Mt(`onSelect`,`focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange`.split(` `)),Mt(`onBeforeInput`,[`compositionend`,`keypress`,`textInput`,`paste`]),Mt(`onCompositionEnd`,`compositionend focusout keydown keypress keyup mousedown`.split(` `)),Mt(`onCompositionStart`,`compositionstart focusout keydown keypress keyup mousedown`.split(` `)),Mt(`onCompositionUpdate`,`compositionupdate focusout keydown keypress keyup mousedown`.split(` `));var bd=`abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting`.split(` `),xd=new Set(`beforetoggle cancel close invalid load scroll scrollend toggle`.split(` `).concat(bd));function Sd(e,t){t=(t&4)!=0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;a:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],c=s.instance,l=s.currentTarget;if(s=s.listener,c!==a&&i.isPropagationStopped())break a;a=s,i.currentTarget=l;try{a(i)}catch(e){Yr(e)}i.currentTarget=null,a=c}else for(o=0;o<r.length;o++){if(s=r[o],c=s.instance,l=s.currentTarget,s=s.listener,c!==a&&i.isPropagationStopped())break a;a=s,i.currentTarget=l;try{a(i)}catch(e){Yr(e)}i.currentTarget=null,a=c}}}}function Y(e,t){var n=t[yt];n===void 0&&(n=t[yt]=new Set);var r=e+`__bubble`;n.has(r)||(Ed(t,e,2,!1),n.add(r))}function Cd(e,t,n){var r=0;t&&(r|=4),Ed(n,e,r,t)}var wd=`_reactListening`+Math.random().toString(36).slice(2);function Td(e){if(!e[wd]){e[wd]=!0,At.forEach(function(t){t!==`selectionchange`&&(xd.has(t)||Cd(t,!1,e),Cd(t,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[wd]||(t[wd]=!0,Cd(`selectionchange`,!1,t))}}function Ed(e,t,n,r){switch(_p(t)){case 2:var i=dp;break;case 8:i=fp;break;default:i=pp}n=i.bind(null,t,n,e),i=void 0,!yn||t!==`touchstart`&&t!==`touchmove`&&t!==`wheel`||(i=!0),r?i===void 0?e.addEventListener(t,n,!0):e.addEventListener(t,n,{capture:!0,passive:i}):i===void 0?e.addEventListener(t,n,!1):e.addEventListener(t,n,{passive:i})}function Dd(e,t,n,r,i){var a=r;if(!(t&1)&&!(t&2)&&r!==null)a:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var s=r.stateNode.containerInfo;if(s===i)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&o.stateNode.containerInfo===i)return;o=o.return}for(;s!==null;){if(o=Tt(s),o===null)return;if(c=o.tag,c===5||c===6||c===26||c===27){r=a=o;continue a}s=s.parentNode}}r=r.return}gn(function(){var r=a,i=dn(n),o=[];a:{var s=Kr.get(e);if(s!==void 0){var c=An,u=e;switch(e){case`keypress`:if(Tn(n)===0)break a;case`keydown`:case`keyup`:c=qn;break;case`focusin`:u=`focus`,c=zn;break;case`focusout`:u=`blur`,c=zn;break;case`beforeblur`:case`afterblur`:c=zn;break;case`click`:if(n.button===2)break a;case`auxclick`:case`dblclick`:case`mousedown`:case`mousemove`:case`mouseup`:case`mouseout`:case`mouseover`:case`contextmenu`:c=Ln;break;case`drag`:case`dragend`:case`dragenter`:case`dragexit`:case`dragleave`:case`dragover`:case`dragstart`:case`drop`:c=Rn;break;case`touchcancel`:case`touchend`:case`touchmove`:case`touchstart`:c=Jn;break;case zr:case Br:case Vr:c=Bn;break;case Gr:c=M;break;case`scroll`:case`scrollend`:c=Mn;break;case`wheel`:c=N;break;case`copy`:case`cut`:case`paste`:c=Vn;break;case`gotpointercapture`:case`lostpointercapture`:case`pointercancel`:case`pointerdown`:case`pointermove`:case`pointerout`:case`pointerover`:case`pointerup`:c=j;break;case`toggle`:case`beforetoggle`:c=P}var d=(t&4)!=0,f=!d&&(e===`scroll`||e===`scrollend`),p=d?s===null?null:s+`Capture`:s;d=[];for(var m=r,h;m!==null;){var g=m;if(h=g.stateNode,g=g.tag,g!==5&&g!==26&&g!==27||h===null||p===null||(g=_n(m,p),g!=null&&d.push(Od(m,g,h))),f)break;m=m.return}0<d.length&&(s=new c(s,u,null,n,i),o.push({event:s,listeners:d}))}}if(!(t&7)){a:{if(s=e===`mouseover`||e===`pointerover`,c=e===`mouseout`||e===`pointerout`,s&&n!==un&&(u=n.relatedTarget||n.fromElement)&&(Tt(u)||u[vt]))break a;if((c||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,c?(u=n.relatedTarget||n.toElement,c=r,u=u?Tt(u):null,u!==null&&(f=l(u),d=u.tag,u!==f||d!==5&&d!==27&&d!==6)&&(u=null)):(c=null,u=r),c!==u)){if(d=Ln,g=`onMouseLeave`,p=`onMouseEnter`,m=`mouse`,(e===`pointerout`||e===`pointerover`)&&(d=j,g=`onPointerLeave`,p=`onPointerEnter`,m=`pointer`),f=c==null?s:Dt(c),h=u==null?s:Dt(u),s=new d(g,m+`leave`,c,n,i),s.target=f,s.relatedTarget=h,g=null,Tt(i)===r&&(d=new d(p,m+`enter`,u,n,i),d.target=h,d.relatedTarget=f,g=d),f=g,c&&u)b:{for(d=Ad,p=c,m=u,h=0,g=p;g;g=d(g))h++;g=0;for(var _=m;_;_=d(_))g++;for(;0<h-g;)p=d(p),h--;for(;0<g-h;)m=d(m),g--;for(;h--;){if(p===m||m!==null&&p===m.alternate){d=p;break b}p=d(p),m=d(m)}d=null}else d=null;c!==null&&jd(o,s,c,d,!1),u!==null&&f!==null&&jd(o,f,u,d,!0)}}a:{if(s=r?Dt(r):window,c=s.nodeName&&s.nodeName.toLowerCase(),c===`select`||c===`input`&&s.type===`file`)var v=fr;else if(or(s))if(pr)v=xr;else{v=yr;var y=vr}else c=s.nodeName,!c||c.toLowerCase()!==`input`||s.type!==`checkbox`&&s.type!==`radio`?r&&an(r.elementType)&&(v=fr):v=br;if(v&&=v(e,r)){sr(o,v,n,i);break a}y&&y(e,s,r),e===`focusout`&&r&&s.type===`number`&&r.memoizedProps.value!=null&&Xt(s,`number`,s.value)}switch(y=r?Dt(r):window,e){case`focusin`:(or(y)||y.contentEditable===`true`)&&(Ar=y,jr=r,Mr=null);break;case`focusout`:Mr=jr=Ar=null;break;case`mousedown`:Nr=!0;break;case`contextmenu`:case`mouseup`:case`dragend`:Nr=!1,Pr(o,n,i);break;case`selectionchange`:if(kr)break;case`keydown`:case`keyup`:Pr(o,n,i)}var b;if(Yn)b:{switch(e){case`compositionstart`:var x=`onCompositionStart`;break b;case`compositionend`:x=`onCompositionEnd`;break b;case`compositionupdate`:x=`onCompositionUpdate`;break b}x=void 0}else rr?tr(e,n)&&(x=`onCompositionEnd`):e===`keydown`&&n.keyCode===229&&(x=`onCompositionStart`);x&&(Qn&&n.locale!==`ko`&&(rr||x!==`onCompositionStart`?x===`onCompositionEnd`&&rr&&(b=wn()):(xn=i,Sn=`value`in xn?xn.value:xn.textContent,rr=!0)),y=kd(r,x),0<y.length&&(x=new Hn(x,e,null,n,i),o.push({event:x,listeners:y}),b?x.data=b:(b=nr(n),b!==null&&(x.data=b)))),(b=Zn?ir(e,n):ar(e,n))&&(x=kd(r,`onBeforeInput`),0<x.length&&(y=new Hn(`onBeforeInput`,`beforeinput`,null,n,i),o.push({event:y,listeners:x}),y.data=b)),_d(o,e,r,n,i)}Sd(o,t)})}function Od(e,t,n){return{instance:e,listener:t,currentTarget:n}}function kd(e,t){for(var n=t+`Capture`,r=[];e!==null;){var i=e,a=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||a===null||(i=_n(e,n),i!=null&&r.unshift(Od(e,i,a)),i=_n(e,t),i!=null&&r.push(Od(e,i,a))),e.tag===3)return r;e=e.return}return[]}function Ad(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function jd(e,t,n,r,i){for(var a=t._reactName,o=[];n!==null&&n!==r;){var s=n,c=s.alternate,l=s.stateNode;if(s=s.tag,c!==null&&c===r)break;s!==5&&s!==26&&s!==27||l===null||(c=l,i?(l=_n(n,a),l!=null&&o.unshift(Od(n,l,c))):i||(l=_n(n,a),l!=null&&o.push(Od(n,l,c)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Md=/\r\n?/g,Nd=/\u0000|\uFFFD/g;function Pd(e){return(typeof e==`string`?e:``+e).replace(Md,`
`).replace(Nd,``)}function Fd(e,t){return t=Pd(t),Pd(e)===t}function Id(e,t,n,r,i,a){switch(n){case`children`:typeof r==`string`?t===`body`||t===`textarea`&&r===``||en(e,r):(typeof r==`number`||typeof r==`bigint`)&&t!==`body`&&en(e,``+r);break;case`className`:zt(e,`class`,r);break;case`tabIndex`:zt(e,`tabindex`,r);break;case`dir`:case`role`:case`viewBox`:case`width`:case`height`:zt(e,n,r);break;case`style`:rn(e,r,a);break;case`data`:if(t!==`object`){zt(e,`data`,r);break}case`src`:case`href`:if(r===``&&(t!==`a`||n!==`href`)){e.removeAttribute(n);break}if(r==null||typeof r==`function`||typeof r==`symbol`||typeof r==`boolean`){e.removeAttribute(n);break}r=cn(``+r),e.setAttribute(n,r);break;case`action`:case`formAction`:if(typeof r==`function`){e.setAttribute(n,`javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')`);break}else typeof a==`function`&&(n===`formAction`?(t!==`input`&&Id(e,t,`name`,i.name,i,null),Id(e,t,`formEncType`,i.formEncType,i,null),Id(e,t,`formMethod`,i.formMethod,i,null),Id(e,t,`formTarget`,i.formTarget,i,null)):(Id(e,t,`encType`,i.encType,i,null),Id(e,t,`method`,i.method,i,null),Id(e,t,`target`,i.target,i,null)));if(r==null||typeof r==`symbol`||typeof r==`boolean`){e.removeAttribute(n);break}r=cn(``+r),e.setAttribute(n,r);break;case`onClick`:r!=null&&(e.onclick=ln);break;case`onScroll`:r!=null&&Y(`scroll`,e);break;case`onScrollEnd`:r!=null&&Y(`scrollend`,e);break;case`dangerouslySetInnerHTML`:if(r!=null){if(typeof r!=`object`||!(`__html`in r))throw Error(s(61));if(n=r.__html,n!=null){if(i.children!=null)throw Error(s(60));e.innerHTML=n}}break;case`multiple`:e.multiple=r&&typeof r!=`function`&&typeof r!=`symbol`;break;case`muted`:e.muted=r&&typeof r!=`function`&&typeof r!=`symbol`;break;case`suppressContentEditableWarning`:case`suppressHydrationWarning`:case`defaultValue`:case`defaultChecked`:case`innerHTML`:case`ref`:break;case`autoFocus`:break;case`xlinkHref`:if(r==null||typeof r==`function`||typeof r==`boolean`||typeof r==`symbol`){e.removeAttribute(`xlink:href`);break}n=cn(``+r),e.setAttributeNS(`http://www.w3.org/1999/xlink`,`xlink:href`,n);break;case`contentEditable`:case`spellCheck`:case`draggable`:case`value`:case`autoReverse`:case`externalResourcesRequired`:case`focusable`:case`preserveAlpha`:r!=null&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,``+r):e.removeAttribute(n);break;case`inert`:case`allowFullScreen`:case`async`:case`autoPlay`:case`controls`:case`default`:case`defer`:case`disabled`:case`disablePictureInPicture`:case`disableRemotePlayback`:case`formNoValidate`:case`hidden`:case`loop`:case`noModule`:case`noValidate`:case`open`:case`playsInline`:case`readOnly`:case`required`:case`reversed`:case`scoped`:case`seamless`:case`itemScope`:r&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,``):e.removeAttribute(n);break;case`capture`:case`download`:!0===r?e.setAttribute(n,``):!1!==r&&r!=null&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,r):e.removeAttribute(n);break;case`cols`:case`rows`:case`size`:case`span`:r!=null&&typeof r!=`function`&&typeof r!=`symbol`&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case`rowSpan`:case`start`:r==null||typeof r==`function`||typeof r==`symbol`||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case`popover`:Y(`beforetoggle`,e),Y(`toggle`,e),Rt(e,`popover`,r);break;case`xlinkActuate`:Bt(e,`http://www.w3.org/1999/xlink`,`xlink:actuate`,r);break;case`xlinkArcrole`:Bt(e,`http://www.w3.org/1999/xlink`,`xlink:arcrole`,r);break;case`xlinkRole`:Bt(e,`http://www.w3.org/1999/xlink`,`xlink:role`,r);break;case`xlinkShow`:Bt(e,`http://www.w3.org/1999/xlink`,`xlink:show`,r);break;case`xlinkTitle`:Bt(e,`http://www.w3.org/1999/xlink`,`xlink:title`,r);break;case`xlinkType`:Bt(e,`http://www.w3.org/1999/xlink`,`xlink:type`,r);break;case`xmlBase`:Bt(e,`http://www.w3.org/XML/1998/namespace`,`xml:base`,r);break;case`xmlLang`:Bt(e,`http://www.w3.org/XML/1998/namespace`,`xml:lang`,r);break;case`xmlSpace`:Bt(e,`http://www.w3.org/XML/1998/namespace`,`xml:space`,r);break;case`is`:Rt(e,`is`,r);break;case`innerText`:case`textContent`:break;default:(!(2<n.length)||n[0]!==`o`&&n[0]!==`O`||n[1]!==`n`&&n[1]!==`N`)&&(n=on.get(n)||n,Rt(e,n,r))}}function Ld(e,t,n,r,i,a){switch(n){case`style`:rn(e,r,a);break;case`dangerouslySetInnerHTML`:if(r!=null){if(typeof r!=`object`||!(`__html`in r))throw Error(s(61));if(n=r.__html,n!=null){if(i.children!=null)throw Error(s(60));e.innerHTML=n}}break;case`children`:typeof r==`string`?en(e,r):(typeof r==`number`||typeof r==`bigint`)&&en(e,``+r);break;case`onScroll`:r!=null&&Y(`scroll`,e);break;case`onScrollEnd`:r!=null&&Y(`scrollend`,e);break;case`onClick`:r!=null&&(e.onclick=ln);break;case`suppressContentEditableWarning`:case`suppressHydrationWarning`:case`innerHTML`:case`ref`:break;case`innerText`:case`textContent`:break;default:if(!jt.hasOwnProperty(n))a:{if(n[0]===`o`&&n[1]===`n`&&(i=n.endsWith(`Capture`),t=n.slice(2,i?n.length-7:void 0),a=e[_t]||null,a=a==null?null:a[n],typeof a==`function`&&e.removeEventListener(t,a,i),typeof r==`function`)){typeof a!=`function`&&a!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,i);break a}n in e?e[n]=r:!0===r?e.setAttribute(n,``):Rt(e,n,r)}}}function Rd(e,t,n){switch(t){case`div`:case`span`:case`svg`:case`path`:case`a`:case`g`:case`p`:case`li`:break;case`img`:Y(`error`,e),Y(`load`,e);var r=!1,i=!1,a;for(a in n)if(n.hasOwnProperty(a)){var o=n[a];if(o!=null)switch(a){case`src`:r=!0;break;case`srcSet`:i=!0;break;case`children`:case`dangerouslySetInnerHTML`:throw Error(s(137,t));default:Id(e,t,a,o,n,null)}}i&&Id(e,t,`srcSet`,n.srcSet,n,null),r&&Id(e,t,`src`,n.src,n,null);return;case`input`:Y(`invalid`,e);var c=a=o=i=null,l=null,u=null;for(r in n)if(n.hasOwnProperty(r)){var d=n[r];if(d!=null)switch(r){case`name`:i=d;break;case`type`:o=d;break;case`checked`:l=d;break;case`defaultChecked`:u=d;break;case`value`:a=d;break;case`defaultValue`:c=d;break;case`children`:case`dangerouslySetInnerHTML`:if(d!=null)throw Error(s(137,t));break;default:Id(e,t,r,d,n,null)}}Yt(e,a,c,l,u,o,i,!1);return;case`select`:for(i in Y(`invalid`,e),r=o=a=null,n)if(n.hasOwnProperty(i)&&(c=n[i],c!=null))switch(i){case`value`:a=c;break;case`defaultValue`:o=c;break;case`multiple`:r=c;default:Id(e,t,i,c,n,null)}t=a,n=o,e.multiple=!!r,t==null?n!=null&&Zt(e,!!r,n,!0):Zt(e,!!r,t,!1);return;case`textarea`:for(o in Y(`invalid`,e),a=i=r=null,n)if(n.hasOwnProperty(o)&&(c=n[o],c!=null))switch(o){case`value`:r=c;break;case`defaultValue`:i=c;break;case`children`:a=c;break;case`dangerouslySetInnerHTML`:if(c!=null)throw Error(s(91));break;default:Id(e,t,o,c,n,null)}$t(e,r,i,a);return;case`option`:for(l in n)if(n.hasOwnProperty(l)&&(r=n[l],r!=null))switch(l){case`selected`:e.selected=r&&typeof r!=`function`&&typeof r!=`symbol`;break;default:Id(e,t,l,r,n,null)}return;case`dialog`:Y(`beforetoggle`,e),Y(`toggle`,e),Y(`cancel`,e),Y(`close`,e);break;case`iframe`:case`object`:Y(`load`,e);break;case`video`:case`audio`:for(r=0;r<bd.length;r++)Y(bd[r],e);break;case`image`:Y(`error`,e),Y(`load`,e);break;case`details`:Y(`toggle`,e);break;case`embed`:case`source`:case`link`:Y(`error`,e),Y(`load`,e);case`area`:case`base`:case`br`:case`col`:case`hr`:case`keygen`:case`meta`:case`param`:case`track`:case`wbr`:case`menuitem`:for(u in n)if(n.hasOwnProperty(u)&&(r=n[u],r!=null))switch(u){case`children`:case`dangerouslySetInnerHTML`:throw Error(s(137,t));default:Id(e,t,u,r,n,null)}return;default:if(an(t)){for(d in n)n.hasOwnProperty(d)&&(r=n[d],r!==void 0&&Ld(e,t,d,r,n,void 0));return}}for(c in n)n.hasOwnProperty(c)&&(r=n[c],r!=null&&Id(e,t,c,r,n,null))}function zd(e,t,n,r){switch(t){case`div`:case`span`:case`svg`:case`path`:case`a`:case`g`:case`p`:case`li`:break;case`input`:var i=null,a=null,o=null,c=null,l=null,u=null,d=null;for(m in n){var f=n[m];if(n.hasOwnProperty(m)&&f!=null)switch(m){case`checked`:break;case`value`:break;case`defaultValue`:l=f;default:r.hasOwnProperty(m)||Id(e,t,m,null,r,f)}}for(var p in r){var m=r[p];if(f=n[p],r.hasOwnProperty(p)&&(m!=null||f!=null))switch(p){case`type`:a=m;break;case`name`:i=m;break;case`checked`:u=m;break;case`defaultChecked`:d=m;break;case`value`:o=m;break;case`defaultValue`:c=m;break;case`children`:case`dangerouslySetInnerHTML`:if(m!=null)throw Error(s(137,t));break;default:m!==f&&Id(e,t,p,m,r,f)}}Jt(e,o,c,l,u,d,a,i);return;case`select`:for(a in m=o=c=p=null,n)if(l=n[a],n.hasOwnProperty(a)&&l!=null)switch(a){case`value`:break;case`multiple`:m=l;default:r.hasOwnProperty(a)||Id(e,t,a,null,r,l)}for(i in r)if(a=r[i],l=n[i],r.hasOwnProperty(i)&&(a!=null||l!=null))switch(i){case`value`:p=a;break;case`defaultValue`:c=a;break;case`multiple`:o=a;default:a!==l&&Id(e,t,i,a,r,l)}t=c,n=o,r=m,p==null?!!r!=!!n&&(t==null?Zt(e,!!n,n?[]:``,!1):Zt(e,!!n,t,!0)):Zt(e,!!n,p,!1);return;case`textarea`:for(c in m=p=null,n)if(i=n[c],n.hasOwnProperty(c)&&i!=null&&!r.hasOwnProperty(c))switch(c){case`value`:break;case`children`:break;default:Id(e,t,c,null,r,i)}for(o in r)if(i=r[o],a=n[o],r.hasOwnProperty(o)&&(i!=null||a!=null))switch(o){case`value`:p=i;break;case`defaultValue`:m=i;break;case`children`:break;case`dangerouslySetInnerHTML`:if(i!=null)throw Error(s(91));break;default:i!==a&&Id(e,t,o,i,r,a)}Qt(e,p,m);return;case`option`:for(var h in n)if(p=n[h],n.hasOwnProperty(h)&&p!=null&&!r.hasOwnProperty(h))switch(h){case`selected`:e.selected=!1;break;default:Id(e,t,h,null,r,p)}for(l in r)if(p=r[l],m=n[l],r.hasOwnProperty(l)&&p!==m&&(p!=null||m!=null))switch(l){case`selected`:e.selected=p&&typeof p!=`function`&&typeof p!=`symbol`;break;default:Id(e,t,l,p,r,m)}return;case`img`:case`link`:case`area`:case`base`:case`br`:case`col`:case`embed`:case`hr`:case`keygen`:case`meta`:case`param`:case`source`:case`track`:case`wbr`:case`menuitem`:for(var g in n)p=n[g],n.hasOwnProperty(g)&&p!=null&&!r.hasOwnProperty(g)&&Id(e,t,g,null,r,p);for(u in r)if(p=r[u],m=n[u],r.hasOwnProperty(u)&&p!==m&&(p!=null||m!=null))switch(u){case`children`:case`dangerouslySetInnerHTML`:if(p!=null)throw Error(s(137,t));break;default:Id(e,t,u,p,r,m)}return;default:if(an(t)){for(var _ in n)p=n[_],n.hasOwnProperty(_)&&p!==void 0&&!r.hasOwnProperty(_)&&Ld(e,t,_,void 0,r,p);for(d in r)p=r[d],m=n[d],!r.hasOwnProperty(d)||p===m||p===void 0&&m===void 0||Ld(e,t,d,p,r,m);return}}for(var v in n)p=n[v],n.hasOwnProperty(v)&&p!=null&&!r.hasOwnProperty(v)&&Id(e,t,v,null,r,p);for(f in r)p=r[f],m=n[f],!r.hasOwnProperty(f)||p===m||p==null&&m==null||Id(e,t,f,p,r,m)}function Bd(e){switch(e){case`css`:case`script`:case`font`:case`img`:case`image`:case`input`:case`link`:return!0;default:return!1}}function Vd(){if(typeof performance.getEntriesByType==`function`){for(var e=0,t=0,n=performance.getEntriesByType(`resource`),r=0;r<n.length;r++){var i=n[r],a=i.transferSize,o=i.initiatorType,s=i.duration;if(a&&s&&Bd(o)){for(o=0,s=i.responseEnd,r+=1;r<n.length;r++){var c=n[r],l=c.startTime;if(l>s)break;var u=c.transferSize,d=c.initiatorType;u&&Bd(d)&&(c=c.responseEnd,o+=u*(c<s?1:(s-l)/(c-l)))}if(--r,t+=8*(a+o)/(i.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e==`number`)?e:5}var Hd=null,Ud=null;function Wd(e){return e.nodeType===9?e:e.ownerDocument}function Gd(e){switch(e){case`http://www.w3.org/2000/svg`:return 1;case`http://www.w3.org/1998/Math/MathML`:return 2;default:return 0}}function Kd(e,t){if(e===0)switch(t){case`svg`:return 1;case`math`:return 2;default:return 0}return e===1&&t===`foreignObject`?0:e}function qd(e,t){return e===`textarea`||e===`noscript`||typeof t.children==`string`||typeof t.children==`number`||typeof t.children==`bigint`||typeof t.dangerouslySetInnerHTML==`object`&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Jd=null;function Yd(){var e=window.event;return e&&e.type===`popstate`?e===Jd?!1:(Jd=e,!0):(Jd=null,!1)}var Xd=typeof setTimeout==`function`?setTimeout:void 0,Zd=typeof clearTimeout==`function`?clearTimeout:void 0,Qd=typeof Promise==`function`?Promise:void 0,$d=typeof queueMicrotask==`function`?queueMicrotask:Qd===void 0?Xd:function(e){return Qd.resolve(null).then(e).catch(ef)};function ef(e){setTimeout(function(){throw e})}function tf(e){return e===`head`}function nf(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n===`/$`||n===`/&`){if(r===0){e.removeChild(i),Ip(t);return}r--}else if(n===`$`||n===`$?`||n===`$~`||n===`$!`||n===`&`)r++;else if(n===`html`)_f(e.ownerDocument.documentElement);else if(n===`head`){n=e.ownerDocument.head,_f(n);for(var a=n.firstChild;a;){var o=a.nextSibling,s=a.nodeName;a[Ct]||s===`SCRIPT`||s===`STYLE`||s===`LINK`&&a.rel.toLowerCase()===`stylesheet`||n.removeChild(a),a=o}}else n===`body`&&_f(e.ownerDocument.body);n=i}while(n);Ip(t)}function rf(e,t){var n=e;e=0;do{var r=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display=`none`):(n.style.display=n._stashedDisplay||``,n.getAttribute(`style`)===``&&n.removeAttribute(`style`)):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=``):n.nodeValue=n._stashedText||``),r&&r.nodeType===8)if(n=r.data,n===`/$`){if(e===0)break;e--}else n!==`$`&&n!==`$?`&&n!==`$~`&&n!==`$!`||e++;n=r}while(n)}function af(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case`HTML`:case`HEAD`:case`BODY`:af(n),wt(n);continue;case`SCRIPT`:case`STYLE`:continue;case`LINK`:if(n.rel.toLowerCase()===`stylesheet`)continue}e.removeChild(n)}}function of(e,t,n,r){for(;e.nodeType===1;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&(e.nodeName!==`INPUT`||e.type!==`hidden`))break}else if(r){if(!e[Ct])switch(t){case`meta`:if(!e.hasAttribute(`itemprop`))break;return e;case`link`:if(a=e.getAttribute(`rel`),a===`stylesheet`&&e.hasAttribute(`data-precedence`)||a!==i.rel||e.getAttribute(`href`)!==(i.href==null||i.href===``?null:i.href)||e.getAttribute(`crossorigin`)!==(i.crossOrigin==null?null:i.crossOrigin)||e.getAttribute(`title`)!==(i.title==null?null:i.title))break;return e;case`style`:if(e.hasAttribute(`data-precedence`))break;return e;case`script`:if(a=e.getAttribute(`src`),(a!==(i.src==null?null:i.src)||e.getAttribute(`type`)!==(i.type==null?null:i.type)||e.getAttribute(`crossorigin`)!==(i.crossOrigin==null?null:i.crossOrigin))&&a&&e.hasAttribute(`async`)&&!e.hasAttribute(`itemprop`))break;return e;default:return e}}else if(t===`input`&&e.type===`hidden`){var a=i.name==null?null:``+i.name;if(i.type===`hidden`&&e.getAttribute(`name`)===a)return e}else return e;if(e=ff(e.nextSibling),e===null)break}return null}function sf(e,t,n){if(t===``)return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!==`INPUT`||e.type!==`hidden`)&&!n||(e=ff(e.nextSibling),e===null))return null;return e}function cf(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!==`INPUT`||e.type!==`hidden`)&&!t||(e=ff(e.nextSibling),e===null))return null;return e}function lf(e){return e.data===`$?`||e.data===`$~`}function uf(e){return e.data===`$!`||e.data===`$?`&&e.ownerDocument.readyState!==`loading`}function df(e,t){var n=e.ownerDocument;if(e.data===`$~`)e._reactRetry=t;else if(e.data!==`$?`||n.readyState!==`loading`)t();else{var r=function(){t(),n.removeEventListener(`DOMContentLoaded`,r)};n.addEventListener(`DOMContentLoaded`,r),e._reactRetry=r}}function ff(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t===`$`||t===`$!`||t===`$?`||t===`$~`||t===`&`||t===`F!`||t===`F`)break;if(t===`/$`||t===`/&`)return null}}return e}var pf=null;function mf(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n===`/$`||n===`/&`){if(t===0)return ff(e.nextSibling);t--}else n!==`$`&&n!==`$!`&&n!==`$?`&&n!==`$~`&&n!==`&`||t++}e=e.nextSibling}return null}function hf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n===`$`||n===`$!`||n===`$?`||n===`$~`||n===`&`){if(t===0)return e;t--}else n!==`/$`&&n!==`/&`||t++}e=e.previousSibling}return null}function gf(e,t,n){switch(t=Wd(n),e){case`html`:if(e=t.documentElement,!e)throw Error(s(452));return e;case`head`:if(e=t.head,!e)throw Error(s(453));return e;case`body`:if(e=t.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function _f(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);wt(e)}var vf=new Map,yf=new Set;function bf(e){return typeof e.getRootNode==`function`?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var xf=D.d;D.d={f:Sf,r:Cf,D:X,C:Ef,L:Df,m:Of,X:Af,S:kf,M:jf};function Sf(){var e=xf.f(),t=Cu();return e||t}function Cf(e){var t=Et(e);t!==null&&t.tag===5&&t.type===`form`?ws(t):xf.r(e)}var wf=typeof document>`u`?null:document;function Tf(e,t,n){var r=wf;if(r&&typeof t==`string`&&t){var i=qt(t);i=`link[rel="`+e+`"][href="`+i+`"]`,typeof n==`string`&&(i+=`[crossorigin="`+n+`"]`),yf.has(i)||(yf.add(i),e={rel:e,crossOrigin:n,href:t},r.querySelector(i)===null&&(t=r.createElement(`link`),Rd(t,`link`,e),kt(t),r.head.appendChild(t)))}}function X(e){xf.D(e),Tf(`dns-prefetch`,e,null)}function Ef(e,t){xf.C(e,t),Tf(`preconnect`,e,t)}function Df(e,t,n){xf.L(e,t,n);var r=wf;if(r&&e&&t){var i=`link[rel="preload"][as="`+qt(t)+`"]`;t===`image`&&n&&n.imageSrcSet?(i+=`[imagesrcset="`+qt(n.imageSrcSet)+`"]`,typeof n.imageSizes==`string`&&(i+=`[imagesizes="`+qt(n.imageSizes)+`"]`)):i+=`[href="`+qt(e)+`"]`;var a=i;switch(t){case`style`:a=Nf(e);break;case`script`:a=Lf(e)}vf.has(a)||(e=h({rel:`preload`,href:t===`image`&&n&&n.imageSrcSet?void 0:e,as:t},n),vf.set(a,e),r.querySelector(i)!==null||t===`style`&&r.querySelector(Pf(a))||t===`script`&&r.querySelector(Rf(a))||(t=r.createElement(`link`),Rd(t,`link`,e),kt(t),r.head.appendChild(t)))}}function Of(e,t){xf.m(e,t);var n=wf;if(n&&e){var r=t&&typeof t.as==`string`?t.as:`script`,i=`link[rel="modulepreload"][as="`+qt(r)+`"][href="`+qt(e)+`"]`,a=i;switch(r){case`audioworklet`:case`paintworklet`:case`serviceworker`:case`sharedworker`:case`worker`:case`script`:a=Lf(e)}if(!vf.has(a)&&(e=h({rel:`modulepreload`,href:e},t),vf.set(a,e),n.querySelector(i)===null)){switch(r){case`audioworklet`:case`paintworklet`:case`serviceworker`:case`sharedworker`:case`worker`:case`script`:if(n.querySelector(Rf(a)))return}r=n.createElement(`link`),Rd(r,`link`,e),kt(r),n.head.appendChild(r)}}}function kf(e,t,n){xf.S(e,t,n);var r=wf;if(r&&e){var i=Ot(r).hoistableStyles,a=Nf(e);t||=`default`;var o=i.get(a);if(!o){var s={loading:0,preload:null};if(o=r.querySelector(Pf(a)))s.loading=5;else{e=h({rel:`stylesheet`,href:e,"data-precedence":t},n),(n=vf.get(a))&&Vf(e,n);var c=o=r.createElement(`link`);kt(c),Rd(c,`link`,e),c._p=new Promise(function(e,t){c.onload=e,c.onerror=t}),c.addEventListener(`load`,function(){s.loading|=1}),c.addEventListener(`error`,function(){s.loading|=2}),s.loading|=4,Bf(o,t,r)}o={type:`stylesheet`,instance:o,count:1,state:s},i.set(a,o)}}}function Af(e,t){xf.X(e,t);var n=wf;if(n&&e){var r=Ot(n).hoistableScripts,i=Lf(e),a=r.get(i);a||(a=n.querySelector(Rf(i)),a||(e=h({src:e,async:!0},t),(t=vf.get(i))&&Hf(e,t),a=n.createElement(`script`),kt(a),Rd(a,`link`,e),n.head.appendChild(a)),a={type:`script`,instance:a,count:1,state:null},r.set(i,a))}}function jf(e,t){xf.M(e,t);var n=wf;if(n&&e){var r=Ot(n).hoistableScripts,i=Lf(e),a=r.get(i);a||(a=n.querySelector(Rf(i)),a||(e=h({src:e,async:!0,type:`module`},t),(t=vf.get(i))&&Hf(e,t),a=n.createElement(`script`),kt(a),Rd(a,`link`,e),n.head.appendChild(a)),a={type:`script`,instance:a,count:1,state:null},r.set(i,a))}}function Mf(e,t,n,r){var i=(i=ve.current)?bf(i):null;if(!i)throw Error(s(446));switch(e){case`meta`:case`title`:return null;case`style`:return typeof n.precedence==`string`&&typeof n.href==`string`?(t=Nf(n.href),n=Ot(i).hoistableStyles,r=n.get(t),r||(r={type:`style`,instance:null,count:0,state:null},n.set(t,r)),r):{type:`void`,instance:null,count:0,state:null};case`link`:if(n.rel===`stylesheet`&&typeof n.href==`string`&&typeof n.precedence==`string`){e=Nf(n.href);var a=Ot(i).hoistableStyles,o=a.get(e);if(o||(i=i.ownerDocument||i,o={type:`stylesheet`,instance:null,count:0,state:{loading:0,preload:null}},a.set(e,o),(a=i.querySelector(Pf(e)))&&!a._p&&(o.instance=a,o.state.loading=5),vf.has(e)||(n={rel:`preload`,as:`style`,href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},vf.set(e,n),a||If(i,e,n,o.state))),t&&r===null)throw Error(s(528,``));return o}if(t&&r!==null)throw Error(s(529,``));return null;case`script`:return t=n.async,n=n.src,typeof n==`string`&&t&&typeof t!=`function`&&typeof t!=`symbol`?(t=Lf(n),n=Ot(i).hoistableScripts,r=n.get(t),r||(r={type:`script`,instance:null,count:0,state:null},n.set(t,r)),r):{type:`void`,instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Nf(e){return`href="`+qt(e)+`"`}function Pf(e){return`link[rel="stylesheet"][`+e+`]`}function Ff(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function If(e,t,n,r){e.querySelector(`link[rel="preload"][as="style"][`+t+`]`)?r.loading=1:(t=e.createElement(`link`),r.preload=t,t.addEventListener(`load`,function(){return r.loading|=1}),t.addEventListener(`error`,function(){return r.loading|=2}),Rd(t,`link`,n),kt(t),e.head.appendChild(t))}function Lf(e){return`[src="`+qt(e)+`"]`}function Rf(e){return`script[async]`+e}function zf(e,t,n){if(t.count++,t.instance===null)switch(t.type){case`style`:var r=e.querySelector(`style[data-href~="`+qt(n.href)+`"]`);if(r)return t.instance=r,kt(r),r;var i=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return r=(e.ownerDocument||e).createElement(`style`),kt(r),Rd(r,`style`,i),Bf(r,n.precedence,e),t.instance=r;case`stylesheet`:i=Nf(n.href);var a=e.querySelector(Pf(i));if(a)return t.state.loading|=4,t.instance=a,kt(a),a;r=Ff(n),(i=vf.get(i))&&Vf(r,i),a=(e.ownerDocument||e).createElement(`link`),kt(a);var o=a;return o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),Rd(a,`link`,r),t.state.loading|=4,Bf(a,n.precedence,e),t.instance=a;case`script`:return a=Lf(n.src),(i=e.querySelector(Rf(a)))?(t.instance=i,kt(i),i):(r=n,(i=vf.get(a))&&(r=h({},n),Hf(r,i)),e=e.ownerDocument||e,i=e.createElement(`script`),kt(i),Rd(i,`link`,r),e.head.appendChild(i),t.instance=i);case`void`:return null;default:throw Error(s(443,t.type))}else t.type===`stylesheet`&&!(t.state.loading&4)&&(r=t.instance,t.state.loading|=4,Bf(r,n.precedence,e));return t.instance}function Bf(e,t,n){for(var r=n.querySelectorAll(`link[rel="stylesheet"][data-precedence],style[data-precedence]`),i=r.length?r[r.length-1]:null,a=i,o=0;o<r.length;o++){var s=r[o];if(s.dataset.precedence===t)a=s;else if(a!==i)break}a?a.parentNode.insertBefore(e,a.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Vf(e,t){e.crossOrigin??=t.crossOrigin,e.referrerPolicy??=t.referrerPolicy,e.title??=t.title}function Hf(e,t){e.crossOrigin??=t.crossOrigin,e.referrerPolicy??=t.referrerPolicy,e.integrity??=t.integrity}var Uf=null;function Wf(e,t,n){if(Uf===null){var r=new Map,i=Uf=new Map;i.set(n,r)}else i=Uf,r=i.get(n),r||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var a=n[i];if(!(a[Ct]||a[gt]||e===`link`&&a.getAttribute(`rel`)===`stylesheet`)&&a.namespaceURI!==`http://www.w3.org/2000/svg`){var o=a.getAttribute(t)||``;o=e+o;var s=r.get(o);s?s.push(a):r.set(o,[a])}}return r}function Gf(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t===`title`?e.querySelector(`head > title`):null)}function Kf(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case`meta`:case`title`:return!0;case`style`:if(typeof t.precedence!=`string`||typeof t.href!=`string`||t.href===``)break;return!0;case`link`:if(typeof t.rel!=`string`||typeof t.href!=`string`||t.href===``||t.onLoad||t.onError)break;switch(t.rel){case`stylesheet`:return e=t.disabled,typeof t.precedence==`string`&&e==null;default:return!0}case`script`:if(t.async&&typeof t.async!=`function`&&typeof t.async!=`symbol`&&!t.onLoad&&!t.onError&&t.src&&typeof t.src==`string`)return!0}return!1}function qf(e){return!(e.type===`stylesheet`&&!(e.state.loading&3))}function Jf(e,t,n,r){if(n.type===`stylesheet`&&(typeof r.media!=`string`||!1!==matchMedia(r.media).matches)&&!(n.state.loading&4)){if(n.instance===null){var i=Nf(r.href),a=t.querySelector(Pf(i));if(a){t=a._p,typeof t==`object`&&t&&typeof t.then==`function`&&(e.count++,e=Zf.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=a,kt(a);return}a=t.ownerDocument||t,r=Ff(r),(i=vf.get(i))&&Vf(r,i),a=a.createElement(`link`),kt(a);var o=a;o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),Rd(a,`link`,r),n.instance=a}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&!(n.state.loading&3)&&(e.count++,n=Zf.bind(e),t.addEventListener(`load`,n),t.addEventListener(`error`,n))}}var Yf=0;function Xf(e,t){return e.stylesheets&&e.count===0&&$f(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&$f(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&Yf===0&&(Yf=62500*Vd());var i=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&$f(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>Yf?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(i)}}:null}function Zf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)$f(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Qf=null;function $f(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Qf=new Map,t.forEach(ep,e),Qf=null,Zf.call(e))}function ep(e,t){if(!(t.state.loading&4)){var n=Qf.get(e);if(n)var r=n.get(null);else{n=new Map,Qf.set(e,n);for(var i=e.querySelectorAll(`link[data-precedence],style[data-precedence]`),a=0;a<i.length;a++){var o=i[a];(o.nodeName===`LINK`||o.getAttribute(`media`)!==`not all`)&&(n.set(o.dataset.precedence,o),r=o)}r&&n.set(null,r)}i=t.instance,o=i.getAttribute(`data-precedence`),a=n.get(o)||r,a===r&&n.set(null,i),n.set(o,i),this.count++,r=Zf.bind(this),i.addEventListener(`load`,r),i.addEventListener(`error`,r),a?a.parentNode.insertBefore(i,a.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(i,e.firstChild)),t.state.loading|=4}}var tp={$$typeof:S,Provider:null,Consumer:null,_currentValue:ue,_currentValue2:ue,_threadCount:0};function np(e,t,n,r,i,a,o,s,c){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=at(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=at(0),this.hiddenUpdates=at(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=a,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=c,this.incompleteTransitions=new Map}function rp(e,t,n,r,i,a,o,s,c,l,u,d){return e=new np(e,t,n,o,c,l,u,d,s),t=1,!0===a&&(t|=24),a=si(3,null,null,t),e.current=a,a.stateNode=e,t=sa(),t.refCount++,e.pooledCache=t,t.refCount++,a.memoizedState={element:r,isDehydrated:n,cache:t},Ba(a),e}function ip(e){return e?(e=ai,e):ai}function ap(e,t,n,r,i,a){i=ip(i),r.context===null?r.context=i:r.pendingContext=i,r=Ha(t),r.payload={element:n},a=a===void 0?null:a,a!==null&&(r.callback=a),n=Ua(e,r,t),n!==null&&(vu(n,e,t),Wa(n,e,t))}function op(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function sp(e,t){op(e,t),(e=e.alternate)&&op(e,t)}function cp(e){if(e.tag===13||e.tag===31){var t=ni(e,67108864);t!==null&&vu(t,e,67108864),sp(e,67108864)}}function lp(e){if(e.tag===13||e.tag===31){var t=gu();t=dt(t);var n=ni(e,t);n!==null&&vu(n,e,t),sp(e,t)}}var up=!0;function dp(e,t,n,r){var i=E.T;E.T=null;var a=D.p;try{D.p=2,pp(e,t,n,r)}finally{D.p=a,E.T=i}}function fp(e,t,n,r){var i=E.T;E.T=null;var a=D.p;try{D.p=8,pp(e,t,n,r)}finally{D.p=a,E.T=i}}function pp(e,t,n,r){if(up){var i=mp(r);if(i===null)Dd(e,t,r,hp,n),Ep(e,r);else if(Op(i,e,t,n,r))r.stopPropagation();else if(Ep(e,r),t&4&&-1<Tp.indexOf(e)){for(;i!==null;){var a=Et(i);if(a!==null)switch(a.tag){case 3:if(a=a.stateNode,a.current.memoizedState.isDehydrated){var o=et(a.pendingLanes);if(o!==0){var s=a;for(s.pendingLanes|=2,s.entangledLanes|=2;o;){var c=1<<31-qe(o);s.entanglements[1]|=c,o&=~c}od(a),!(zl&6)&&(iu=Ie()+500,sd(0,!1))}}break;case 31:case 13:s=ni(a,2),s!==null&&vu(s,a,2),Cu(),sp(a,2)}if(a=mp(r),a===null&&Dd(e,t,r,hp,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else Dd(e,t,r,null,n)}}function mp(e){return e=dn(e),gp(e)}var hp=null;function gp(e){if(hp=null,e=Tt(e),e!==null){var t=l(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=u(t),e!==null)return e;e=null}else if(n===31){if(e=d(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return hp=e,null}function _p(e){switch(e){case`beforetoggle`:case`cancel`:case`click`:case`close`:case`contextmenu`:case`copy`:case`cut`:case`auxclick`:case`dblclick`:case`dragend`:case`dragstart`:case`drop`:case`focusin`:case`focusout`:case`input`:case`invalid`:case`keydown`:case`keypress`:case`keyup`:case`mousedown`:case`mouseup`:case`paste`:case`pause`:case`play`:case`pointercancel`:case`pointerdown`:case`pointerup`:case`ratechange`:case`reset`:case`resize`:case`seeked`:case`submit`:case`toggle`:case`touchcancel`:case`touchend`:case`touchstart`:case`volumechange`:case`change`:case`selectionchange`:case`textInput`:case`compositionstart`:case`compositionend`:case`compositionupdate`:case`beforeblur`:case`afterblur`:case`beforeinput`:case`blur`:case`fullscreenchange`:case`focus`:case`hashchange`:case`popstate`:case`select`:case`selectstart`:return 2;case`drag`:case`dragenter`:case`dragexit`:case`dragleave`:case`dragover`:case`mousemove`:case`mouseout`:case`mouseover`:case`pointermove`:case`pointerout`:case`pointerover`:case`scroll`:case`touchmove`:case`wheel`:case`mouseenter`:case`mouseleave`:case`pointerenter`:case`pointerleave`:return 8;case`message`:switch(Le()){case Re:return 2;case ze:return 8;case Be:case O:return 32;case Ve:return 268435456;default:return 32}default:return 32}}var vp=!1,yp=null,bp=null,xp=null,Sp=new Map,Cp=new Map,wp=[],Tp=`mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset`.split(` `);function Ep(e,t){switch(e){case`focusin`:case`focusout`:yp=null;break;case`dragenter`:case`dragleave`:bp=null;break;case`mouseover`:case`mouseout`:xp=null;break;case`pointerover`:case`pointerout`:Sp.delete(t.pointerId);break;case`gotpointercapture`:case`lostpointercapture`:Cp.delete(t.pointerId)}}function Dp(e,t,n,r,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},t!==null&&(t=Et(t),t!==null&&cp(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Op(e,t,n,r,i){switch(t){case`focusin`:return yp=Dp(yp,e,t,n,r,i),!0;case`dragenter`:return bp=Dp(bp,e,t,n,r,i),!0;case`mouseover`:return xp=Dp(xp,e,t,n,r,i),!0;case`pointerover`:var a=i.pointerId;return Sp.set(a,Dp(Sp.get(a)||null,e,t,n,r,i)),!0;case`gotpointercapture`:return a=i.pointerId,Cp.set(a,Dp(Cp.get(a)||null,e,t,n,r,i)),!0}return!1}function kp(e){var t=Tt(e.target);if(t!==null){var n=l(t);if(n!==null){if(t=n.tag,t===13){if(t=u(n),t!==null){e.blockedOn=t,mt(e.priority,function(){lp(n)});return}}else if(t===31){if(t=d(n),t!==null){e.blockedOn=t,mt(e.priority,function(){lp(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ap(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=mp(e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);un=r,n.target.dispatchEvent(r),un=null}else return t=Et(n),t!==null&&cp(t),e.blockedOn=n,!1;t.shift()}return!0}function jp(e,t,n){Ap(e)&&n.delete(t)}function Mp(){vp=!1,yp!==null&&Ap(yp)&&(yp=null),bp!==null&&Ap(bp)&&(bp=null),xp!==null&&Ap(xp)&&(xp=null),Sp.forEach(jp),Cp.forEach(jp)}function Np(e,n){e.blockedOn===n&&(e.blockedOn=null,vp||(vp=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Mp)))}var Pp=null;function Fp(e){Pp!==e&&(Pp=e,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Pp===e&&(Pp=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if(typeof r!=`function`){if(gp(r||n)===null)continue;break}var a=Et(n);a!==null&&(e.splice(t,3),t-=3,Ss(a,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function Ip(e){function t(t){return Np(t,e)}yp!==null&&Np(yp,e),bp!==null&&Np(bp,e),xp!==null&&Np(xp,e),Sp.forEach(t),Cp.forEach(t);for(var n=0;n<wp.length;n++){var r=wp[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<wp.length&&(n=wp[0],n.blockedOn===null);)kp(n),n.blockedOn===null&&wp.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(r=0;r<n.length;r+=3){var i=n[r],a=n[r+1],o=i[_t]||null;if(typeof a==`function`)o||Fp(n);else if(o){var s=null;if(a&&a.hasAttribute(`formAction`)){if(i=a,o=a[_t]||null)s=o.formAction;else if(gp(i)!==null)continue}else s=o.action;typeof s==`function`?n[r+1]=s:(n.splice(r,3),r-=3),Fp(n)}}}function Lp(){function e(e){e.canIntercept&&e.info===`react-transition`&&e.intercept({handler:function(){return new Promise(function(e){return i=e})},focusReset:`manual`,scroll:`manual`})}function t(){i!==null&&(i(),i=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var e=navigation.currentEntry;e&&e.url!=null&&navigation.navigate(e.url,{state:e.getState(),info:`react-transition`,history:`replace`})}}if(typeof navigation==`object`){var r=!1,i=null;return navigation.addEventListener(`navigate`,e),navigation.addEventListener(`navigatesuccess`,t),navigation.addEventListener(`navigateerror`,t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener(`navigate`,e),navigation.removeEventListener(`navigatesuccess`,t),navigation.removeEventListener(`navigateerror`,t),i!==null&&(i(),i=null)}}}function Rp(e){this._internalRoot=e}zp.prototype.render=Rp.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));var n=t.current;ap(n,gu(),e,t,null,null)},zp.prototype.unmount=Rp.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ap(e.current,2,null,e,null,null),Cu(),t[vt]=null}};function zp(e){this._internalRoot=e}zp.prototype.unstable_scheduleHydration=function(e){if(e){var t=pt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<wp.length&&t!==0&&t<wp[n].priority;n++);wp.splice(n,0,e),n===0&&kp(e)}};var Bp=r.version;if(Bp!==`19.2.0`)throw Error(s(527,Bp,`19.2.0`));D.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render==`function`?Error(s(188)):(e=Object.keys(e).join(`,`),Error(s(268,e)));return e=p(t),e=e===null?null:m(e),e=e===null?null:e.stateNode,e};var Vp={bundleType:0,version:`19.2.0`,rendererPackageName:`react-dom`,currentDispatcherRef:E,reconcilerVersion:`19.2.0`};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<`u`){var Hp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hp.isDisabled&&Hp.supportsFiber)try{We=Hp.inject(Vp),Ge=Hp}catch{}}e.createRoot=function(e,t){if(!c(e))throw Error(s(299));var n=!1,r=``,i=Gs,a=Ks,o=qs;return t!=null&&(!0===t.unstable_strictMode&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onUncaughtError!==void 0&&(i=t.onUncaughtError),t.onCaughtError!==void 0&&(a=t.onCaughtError),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=rp(e,1,!1,null,null,n,r,null,i,a,o,Lp),e[vt]=t.current,Td(e),new Rp(t)}})),c=e(((e,t)=>{function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>`u`||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=`function`))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}n(),t.exports=s()}))(),l=n(),u=()=>void 0,d=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)==55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)==56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},f=function(e){let t=[],n=0,r=0;for(;n<e.length;){let i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){let a=e[n++];t[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){let a=e[n++],o=e[n++],s=e[n++],c=((i&7)<<18|(a&63)<<12|(o&63)<<6|s&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{let a=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return t.join(``)},p={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789`,get ENCODED_VALS(){return this.ENCODED_VALS_BASE+`+/=`},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+`-_.`},HAS_NATIVE_SUPPORT:typeof atob==`function`,encodeByteArray(e,t){if(!Array.isArray(e))throw Error(`encodeByteArray takes an array as a parameter`);this.init_();let n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){let i=e[t],a=t+1<e.length,o=a?e[t+1]:0,s=t+2<e.length,c=s?e[t+2]:0,l=i>>2,u=(i&3)<<4|o>>4,d=(o&15)<<2|c>>6,f=c&63;s||(f=64,a||(d=64)),r.push(n[l],n[u],n[d],n[f])}return r.join(``)},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(d(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):f(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){let i=n[e.charAt(t++)],a=t<e.length?n[e.charAt(t)]:0;++t;let o=t<e.length?n[e.charAt(t)]:64;++t;let s=t<e.length?n[e.charAt(t)]:64;if(++t,i==null||a==null||o==null||s==null)throw new m;let c=i<<2|a>>4;if(r.push(c),o!==64){let e=a<<4&240|o>>2;if(r.push(e),s!==64){let e=o<<6&192|s;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},m=class extends Error{constructor(){super(...arguments),this.name=`DecodeBase64StringError`}},h=function(e){let t=d(e);return p.encodeByteArray(t,!0)},g=function(e){return h(e).replace(/\./g,``)},_=function(e){try{return p.decodeString(e,!0)}catch(e){console.error(`base64Decode failed: `,e)}return null};function v(){if(typeof self<`u`)return self;if(typeof window<`u`)return window;if(typeof global<`u`)return global;throw Error(`Unable to locate global object.`)}var y=()=>v().__FIREBASE_DEFAULTS__,b=()=>{if(typeof process>`u`)return;let e={}.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},x=()=>{if(typeof document>`u`)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let t=e&&_(e[1]);return t&&JSON.parse(t)},ee=()=>{try{return u()||y()||b()||x()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},S=e=>ee()?.emulatorHosts?.[e],C=e=>{let t=S(e);if(!t)return;let n=t.lastIndexOf(`:`);if(n<=0||n+1===t.length)throw Error(`Invalid host ${t} with no separate hostname and port!`);let r=parseInt(t.substring(n+1),10);return t[0]===`[`?[t.substring(1,n-1),r]:[t.substring(0,n),r]},w=()=>ee()?.config,te=e=>ee()?.[`_${e}`],ne=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e==`function`&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}};function re(e){try{return(e.startsWith(`http://`)||e.startsWith(`https://`)?new URL(e).hostname:e).endsWith(`.cloudworkstations.dev`)}catch{return!1}}async function ie(e){return(await fetch(e,{credentials:`include`})).ok}function ae(e,t){if(e.uid)throw Error(`The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.`);let n={alg:`none`,type:`JWT`},r=t||`demo-project`,i=e.iat||0,a=e.sub||e.user_id;if(!a)throw Error(`mockUserToken must contain 'sub' or 'user_id' field!`);let o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:`custom`,identities:{}},...e};return[g(JSON.stringify(n)),g(JSON.stringify(o)),``].join(`.`)}var oe={};function se(){let e={prod:[],emulator:[]};for(let t of Object.keys(oe))oe[t]?e.emulator.push(t):e.prod.push(t);return e}function ce(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement(`div`),t.setAttribute(`id`,e),n=!0),{created:n,element:t}}var T=!1;function le(e,t){if(typeof window>`u`||typeof document>`u`||!re(window.location.host)||oe[e]===t||oe[e]||T)return;oe[e]=t;function n(e){return`__firebase__banner__${e}`}let r=`__firebase__banner`,i=se().prod.length>0;function a(){let e=document.getElementById(r);e&&e.remove()}function o(e){e.style.display=`flex`,e.style.background=`#7faaf0`,e.style.position=`fixed`,e.style.bottom=`5px`,e.style.left=`5px`,e.style.padding=`.5em`,e.style.borderRadius=`5px`,e.style.alignItems=`center`}function s(e,t){e.setAttribute(`width`,`24`),e.setAttribute(`id`,t),e.setAttribute(`height`,`24`),e.setAttribute(`viewBox`,`0 0 24 24`),e.setAttribute(`fill`,`none`),e.style.marginLeft=`-6px`}function c(){let e=document.createElement(`span`);return e.style.cursor=`pointer`,e.style.marginLeft=`16px`,e.style.fontSize=`24px`,e.innerHTML=` &times;`,e.onclick=()=>{T=!0,a()},e}function l(e,t){e.setAttribute(`id`,t),e.innerText=`Learn more`,e.href=`https://firebase.google.com/docs/studio/preview-apps#preview-backend`,e.setAttribute(`target`,`__blank`),e.style.paddingLeft=`5px`,e.style.textDecoration=`underline`}function u(){let e=ce(r),t=n(`text`),a=document.getElementById(t)||document.createElement(`span`),u=n(`learnmore`),d=document.getElementById(u)||document.createElement(`a`),f=n(`preprendIcon`),p=document.getElementById(f)||document.createElementNS(`http://www.w3.org/2000/svg`,`svg`);if(e.created){let t=e.element;o(t),l(d,u);let n=c();s(p,f),t.append(p,a,d,n),document.body.appendChild(t)}i?(a.innerText=`Preview backend disconnected.`,p.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(p.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,a.innerText=`Preview backend running in this workspace.`),a.setAttribute(`id`,t)}document.readyState===`loading`?window.addEventListener(`DOMContentLoaded`,u):u()}function E(){return typeof navigator<`u`&&typeof navigator.userAgent==`string`?navigator.userAgent:``}function D(){return typeof window<`u`&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(E())}function ue(){let e=ee()?.forceEnvironment;if(e===`node`)return!0;if(e===`browser`)return!1;try{return Object.prototype.toString.call(global.process)===`[object process]`}catch{return!1}}function de(){return typeof navigator<`u`&&navigator.userAgent===`Cloudflare-Workers`}function fe(){let e=typeof chrome==`object`?chrome.runtime:typeof browser==`object`?browser.runtime:void 0;return typeof e==`object`&&e.id!==void 0}function pe(){return typeof navigator==`object`&&navigator.product===`ReactNative`}function me(){let e=E();return e.indexOf(`MSIE `)>=0||e.indexOf(`Trident/`)>=0}function he(){return!ue()&&!!navigator.userAgent&&navigator.userAgent.includes(`Safari`)&&!navigator.userAgent.includes(`Chrome`)}function ge(){try{return typeof indexedDB==`object`}catch{return!1}}function _e(){return new Promise((e,t)=>{try{let n=!0,r=`validate-browser-context-for-indexeddb-analytics-module`,i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{t(i.error?.message||``)}}catch(e){t(e)}})}var ve=`FirebaseError`,ye=class e extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=ve,Object.setPrototypeOf(this,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,be.prototype.create)}},be=class{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){let n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],a=i?xe(i,n):`Error`;return new ye(r,`${this.serviceName}: ${a} (${r}).`,n)}};function xe(e,t){return e.replace(Se,(e,n)=>{let r=t[n];return r==null?`<${n}?>`:String(r)})}var Se=/\{\$([^}]+)}/g;function Ce(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function we(e,t){if(e===t)return!0;let n=Object.keys(e),r=Object.keys(t);for(let i of n){if(!r.includes(i))return!1;let n=e[i],a=t[i];if(Te(n)&&Te(a)){if(!we(n,a))return!1}else if(n!==a)return!1}for(let e of r)if(!n.includes(e))return!1;return!0}function Te(e){return typeof e==`object`&&!!e}function Ee(e){let t=[];for(let[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+`=`+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+`=`+encodeURIComponent(r));return t.length?`&`+t.join(`&`):``}function De(e){let t={};return e.replace(/^\?/,``).split(`&`).forEach(e=>{if(e){let[n,r]=e.split(`=`);t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function Oe(e){let t=e.indexOf(`?`);if(!t)return``;let n=e.indexOf(`#`,t);return e.substring(t,n>0?n:void 0)}function ke(e,t){let n=new Ae(e,t);return n.subscribe.bind(n)}var Ae=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(e===void 0&&t===void 0&&n===void 0)throw Error(`Missing Observer.`);r=je(e,[`next`,`error`,`complete`])?e:{next:e,error:t,complete:n},r.next===void 0&&(r.next=Me),r.error===void 0&&(r.error=Me),r.complete===void 0&&(r.complete=Me);let i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],--this.observerCount,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(e){typeof console<`u`&&console.error&&console.error(e)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function je(e,t){if(typeof e!=`object`||!e)return!1;for(let n of t)if(n in e&&typeof e[n]==`function`)return!0;return!1}function Me(){}function Ne(e){return e&&e._delegate?e._delegate:e}var Pe=class{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode=`LAZY`,this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}},Fe=`[DEFAULT]`,Ie=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let e=new ne;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{let n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(e){if(n)return null;throw e}else if(n)return null;else throw Error(`Service ${this.name} is not available`)}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(Re(e))try{this.getOrInitializeService({instanceIdentifier:Fe})}catch{}for(let[e,t]of this.instancesDeferred.entries()){let n=this.normalizeInstanceIdentifier(e);try{let e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch{}}}}clearInstance(e=Fe){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>`INTERNAL`in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>`_delete`in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Fe){return this.instances.has(e)}getOptions(e=Fe){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(let[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(r);return r}onInit(e,t){let n=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(n)??new Set;r.add(e),this.onInitCallbacks.set(n,r);let i=this.instances.get(n);return i&&e(i,n),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){let n=this.onInitCallbacks.get(t);if(n)for(let r of n)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:Le(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Fe){return this.component?this.component.multipleInstances?e:Fe:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!==`EXPLICIT`}};function Le(e){return e===Fe?void 0:e}function Re(e){return e.instantiationMode===`EAGER`}var ze=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Ie(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}},Be=[],O;(function(e){e[e.DEBUG=0]=`DEBUG`,e[e.VERBOSE=1]=`VERBOSE`,e[e.INFO=2]=`INFO`,e[e.WARN=3]=`WARN`,e[e.ERROR=4]=`ERROR`,e[e.SILENT=5]=`SILENT`})(O||={});var Ve={debug:O.DEBUG,verbose:O.VERBOSE,info:O.INFO,warn:O.WARN,error:O.ERROR,silent:O.SILENT},He=O.INFO,Ue={[O.DEBUG]:`log`,[O.VERBOSE]:`log`,[O.INFO]:`info`,[O.WARN]:`warn`,[O.ERROR]:`error`},We=(e,t,...n)=>{if(t<e.logLevel)return;let r=new Date().toISOString(),i=Ue[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw Error(`Attempted to log a message with an invalid logType (value: ${t})`)},Ge=class{constructor(e){this.name=e,this._logLevel=He,this._logHandler=We,this._userLogHandler=null,Be.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in O))throw TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e==`string`?Ve[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!=`function`)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,O.DEBUG,...e),this._logHandler(this,O.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,O.VERBOSE,...e),this._logHandler(this,O.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,O.INFO,...e),this._logHandler(this,O.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,O.WARN,...e),this._logHandler(this,O.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,O.ERROR,...e),this._logHandler(this,O.ERROR,...e)}},Ke=(e,t)=>t.some(t=>e instanceof t),qe,Je;function Ye(){return qe||=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]}function Xe(){return Je||=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey]}var Ze=new WeakMap,Qe=new WeakMap,$e=new WeakMap,et=new WeakMap,tt=new WeakMap;function nt(e){let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener(`success`,i),e.removeEventListener(`error`,a)},i=()=>{t(ct(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener(`success`,i),e.addEventListener(`error`,a)});return t.then(t=>{t instanceof IDBCursor&&Ze.set(t,e)}).catch(()=>{}),tt.set(t,e),t}function rt(e){if(Qe.has(e))return;let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener(`complete`,i),e.removeEventListener(`error`,a),e.removeEventListener(`abort`,a)},i=()=>{t(),r()},a=()=>{n(e.error||new DOMException(`AbortError`,`AbortError`)),r()};e.addEventListener(`complete`,i),e.addEventListener(`error`,a),e.addEventListener(`abort`,a)});Qe.set(e,t)}var it={get(e,t,n){if(e instanceof IDBTransaction){if(t===`done`)return Qe.get(e);if(t===`objectStoreNames`)return e.objectStoreNames||$e.get(e);if(t===`store`)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ct(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t===`done`||t===`store`)?!0:t in e}};function at(e){it=e(it)}function ot(e){return e===IDBDatabase.prototype.transaction&&!(`objectStoreNames`in IDBTransaction.prototype)?function(t,...n){let r=e.call(lt(this),t,...n);return $e.set(r,t.sort?t.sort():[t]),ct(r)}:Xe().includes(e)?function(...t){return e.apply(lt(this),t),ct(Ze.get(this))}:function(...t){return ct(e.apply(lt(this),t))}}function st(e){return typeof e==`function`?ot(e):(e instanceof IDBTransaction&&rt(e),Ke(e,Ye())?new Proxy(e,it):e)}function ct(e){if(e instanceof IDBRequest)return nt(e);if(et.has(e))return et.get(e);let t=st(e);return t!==e&&(et.set(e,t),tt.set(t,e)),t}var lt=e=>tt.get(e);function ut(e,t,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){let o=indexedDB.open(e,t),s=ct(o);return r&&o.addEventListener(`upgradeneeded`,e=>{r(ct(o.result),e.oldVersion,e.newVersion,ct(o.transaction),e)}),n&&o.addEventListener(`blocked`,e=>n(e.oldVersion,e.newVersion,e)),s.then(e=>{a&&e.addEventListener(`close`,()=>a()),i&&e.addEventListener(`versionchange`,e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),s}var dt=[`get`,`getKey`,`getAll`,`getAllKeys`,`count`],ft=[`put`,`add`,`delete`,`clear`],pt=new Map;function mt(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t==`string`))return;if(pt.get(t))return pt.get(t);let n=t.replace(/FromIndex$/,``),r=t!==n,i=ft.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||dt.includes(n)))return;let a=async function(e,...t){let a=this.transaction(e,i?`readwrite`:`readonly`),o=a.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),i&&a.done]))[0]};return pt.set(t,a),a}at(e=>({...e,get:(t,n,r)=>mt(t,n)||e.get(t,n,r),has:(t,n)=>!!mt(t,n)||e.has(t,n)}));var ht=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(gt(e)){let t=e.getImmediate();return`${t.library}/${t.version}`}else return null}).filter(e=>e).join(` `)}};function gt(e){return e.getComponent()?.type===`VERSION`}var _t=`@firebase/app`,vt=`0.14.6`,yt=new Ge(`@firebase/app`),bt=`@firebase/app-compat`,xt=`@firebase/analytics-compat`,St=`@firebase/analytics`,Ct=`@firebase/app-check-compat`,wt=`@firebase/app-check`,Tt=`@firebase/auth`,Et=`@firebase/auth-compat`,Dt=`@firebase/database`,Ot=`@firebase/data-connect`,kt=`@firebase/database-compat`,At=`@firebase/functions`,jt=`@firebase/functions-compat`,Mt=`@firebase/installations`,Nt=`@firebase/installations-compat`,Pt=`@firebase/messaging`,Ft=`@firebase/messaging-compat`,It=`@firebase/performance`,Lt=`@firebase/performance-compat`,Rt=`@firebase/remote-config`,zt=`@firebase/remote-config-compat`,Bt=`@firebase/storage`,k=`@firebase/storage-compat`,Vt=`@firebase/firestore`,Ht=`@firebase/ai`,Ut=`@firebase/firestore-compat`,Wt=`firebase`,Gt=`12.6.0`,Kt=`[DEFAULT]`,qt={[_t]:`fire-core`,[bt]:`fire-core-compat`,[St]:`fire-analytics`,[xt]:`fire-analytics-compat`,[wt]:`fire-app-check`,[Ct]:`fire-app-check-compat`,[Tt]:`fire-auth`,[Et]:`fire-auth-compat`,[Dt]:`fire-rtdb`,[Ot]:`fire-data-connect`,[kt]:`fire-rtdb-compat`,[At]:`fire-fn`,[jt]:`fire-fn-compat`,[Mt]:`fire-iid`,[Nt]:`fire-iid-compat`,[Pt]:`fire-fcm`,[Ft]:`fire-fcm-compat`,[It]:`fire-perf`,[Lt]:`fire-perf-compat`,[Rt]:`fire-rc`,[zt]:`fire-rc-compat`,[Bt]:`fire-gcs`,[k]:`fire-gcs-compat`,[Vt]:`fire-fst`,[Ut]:`fire-fst-compat`,[Ht]:`fire-vertex`,"fire-js":`fire-js`,[Wt]:`fire-js-all`},Jt=new Map,Yt=new Map,Xt=new Map;function Zt(e,t){try{e.container.addComponent(t)}catch(n){yt.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Qt(e){let t=e.name;if(Xt.has(t))return yt.debug(`There were multiple attempts to register component ${t}.`),!1;Xt.set(t,e);for(let t of Jt.values())Zt(t,e);for(let t of Yt.values())Zt(t,e);return!0}function $t(e,t){let n=e.container.getProvider(`heartbeat`).getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function en(e){return e==null?!1:e.settings!==void 0}var tn=new be(`app`,`Firebase`,{"no-app":`No Firebase App '{$appName}' has been created - call initializeApp() first`,"bad-app-name":`Illegal App name: '{$appName}'`,"duplicate-app":`Firebase App named '{$appName}' already exists with different options or config`,"app-deleted":`Firebase App named '{$appName}' already deleted`,"server-app-deleted":`Firebase Server App has been deleted`,"no-options":`Need to provide options, when not being deployed to hosting via source.`,"invalid-app-argument":`firebase.{$appName}() takes either no argument or a Firebase App instance.`,"invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":`Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.`,"idb-get":`Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.`,"idb-set":`Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.`,"idb-delete":`Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.`,"finalization-registry-not-supported":`FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.`,"invalid-server-app-environment":`FirebaseServerApp is not for use in browser environments.`}),nn=class{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Pe(`app`,()=>this,`PUBLIC`))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw tn.create(`app-deleted`,{appName:this._name})}},rn=Gt;function an(e,t={}){let n=e;typeof t!=`object`&&(t={name:t});let r={name:Kt,automaticDataCollectionEnabled:!0,...t},i=r.name;if(typeof i!=`string`||!i)throw tn.create(`bad-app-name`,{appName:String(i)});if(n||=w(),!n)throw tn.create(`no-options`);let a=Jt.get(i);if(a){if(we(n,a.options)&&we(r,a.config))return a;throw tn.create(`duplicate-app`,{appName:i})}let o=new ze(i);for(let e of Xt.values())o.addComponent(e);let s=new nn(n,r,o);return Jt.set(i,s),s}function on(e=Kt){let t=Jt.get(e);if(!t&&e===`[DEFAULT]`&&w())return an();if(!t)throw tn.create(`no-app`,{appName:e});return t}function sn(e,t,n){let r=qt[e]??e;n&&(r+=`-${n}`);let i=r.match(/\s|\//),a=t.match(/\s|\//);if(i||a){let e=[`Unable to register library "${r}" with version "${t}":`];i&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&e.push(`and`),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),yt.warn(e.join(` `));return}Qt(new Pe(`${r}-version`,()=>({library:r,version:t}),`VERSION`))}var cn=`firebase-heartbeat-database`,ln=1,un=`firebase-heartbeat-store`,dn=null;function fn(){return dn||=ut(cn,ln,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(un)}catch(e){console.warn(e)}}}}).catch(e=>{throw tn.create(`idb-open`,{originalErrorMessage:e.message})}),dn}async function pn(e){try{let t=(await fn()).transaction(un),n=await t.objectStore(un).get(hn(e));return await t.done,n}catch(e){if(e instanceof ye)yt.warn(e.message);else{let t=tn.create(`idb-get`,{originalErrorMessage:e?.message});yt.warn(t.message)}}}async function mn(e,t){try{let n=(await fn()).transaction(un,`readwrite`);await n.objectStore(un).put(t,hn(e)),await n.done}catch(e){if(e instanceof ye)yt.warn(e.message);else{let t=tn.create(`idb-set`,{originalErrorMessage:e?.message});yt.warn(t.message)}}}function hn(e){return`${e.name}!${e.options.appId}`}var gn=1024,_n=30,vn=class{constructor(e){this.container=e,this._heartbeatsCache=null,this._storage=new xn(this.container.getProvider(`app`).getImmediate()),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{let e=this.container.getProvider(`platform-logger`).getImmediate().getPlatformInfoString(),t=yn();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===t||this._heartbeatsCache.heartbeats.some(e=>e.date===t))return;if(this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats.length>_n){let e=Cn(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){yt.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return``;let e=yn(),{heartbeatsToSend:t,unsentEntries:n}=bn(this._heartbeatsCache.heartbeats),r=g(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return yt.warn(e),``}}};function yn(){return new Date().toISOString().substring(0,10)}function bn(e,t=gn){let n=[],r=e.slice();for(let i of e){let e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),Sn(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Sn(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var xn=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ge()?_e().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let e=await pn(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let t=await this.read();return mn(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let t=await this.read();return mn(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:[...t.heartbeats,...e.heartbeats]})}else return}};function Sn(e){return g(JSON.stringify({version:2,heartbeats:e})).length}function Cn(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}function wn(e){Qt(new Pe(`platform-logger`,e=>new ht(e),`PRIVATE`)),Qt(new Pe(`heartbeat`,e=>new vn(e),`PRIVATE`)),sn(_t,vt,e),sn(_t,vt,`esm2020`),sn(`fire-js`,``)}wn(``),sn(`firebase`,`12.6.0`,`app`);var Tn=typeof globalThis<`u`?globalThis:typeof window<`u`?window:typeof global<`u`?global:typeof self<`u`?self:{},En={},Dn,On;(function(){var e;function t(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=[,,,,],this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(e,t,n){n||=0;let r=Array(16);if(typeof t==`string`)for(var i=0;i<16;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;i<16;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];let a=e.g[3],o;o=t+(a^n&(i^a))+r[0]+3614090360&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[1]+3905402710&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[2]+606105819&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(a^n&(i^a))+r[4]+4118548399&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[5]+1200080426&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[6]+2821735955&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(a^n&(i^a))+r[8]+1770035416&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[9]+2336552879&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[10]+4294925233&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(a^n&(i^a))+r[12]+1804603682&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[13]+4254626195&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[14]+2792965006&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(i^a&(n^i))+r[1]+4129170786&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[6]+3225465664&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[11]+643717713&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^a&(n^i))+r[5]+3593408605&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[10]+38016083&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[15]+3634488961&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^a&(n^i))+r[9]+568446438&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[14]+3275163606&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[3]+4107603335&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^a&(n^i))+r[13]+2850285829&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[2]+4243563512&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[7]+1735328473&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(n^i^a)+r[5]+4294588738&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[8]+2272392833&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[11]+1839030562&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^a)+r[1]+2763975236&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[4]+1272893353&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[7]+4139469664&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^a)+r[13]+681279174&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[0]+3936430074&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[3]+3572445317&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^a)+r[9]+3654602809&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[12]+3873151461&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[15]+530742520&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(i^(n|~a))+r[0]+4096336452&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[7]+1126891415&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[14]+2878612391&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~a))+r[12]+1700485571&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[3]+2399980690&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[10]+4293915773&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~a))+r[8]+1873313359&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[15]+4264355552&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[6]+2734768916&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~a))+r[4]+4149444226&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[11]+3174756917&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[2]+718787259&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}r.prototype.v=function(e,t){t===void 0&&(t=e.length);let n=t-this.blockSize,r=this.C,a=this.h,o=0;for(;o<t;){if(a==0)for(;o<=n;)i(this,e,o),o+=this.blockSize;if(typeof e==`string`){for(;o<t;)if(r[a++]=e.charCodeAt(o++),a==this.blockSize){i(this,r),a=0;break}}else for(;o<t;)if(r[a++]=e[o++],a==this.blockSize){i(this,r),a=0;break}}this.h=a,this.o+=t},r.prototype.A=function(){var e=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=this.o*8;for(var n=e.length-8;n<e.length;++n)e[n]=t&255,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let r=0;r<32;r+=8)e[t++]=this.g[n]>>>r&255;return e};function a(e,t){var n=s;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}function o(e,t){this.h=t;let n=[],r=!0;for(let i=e.length-1;i>=0;i--){let a=e[i]|0;r&&a==t||(n[i]=a,r=!1)}this.g=n}var s={};function c(e){return-128<=e&&e<128?a(e,function(e){return new o([e|0],e<0?-1:0)}):new o([e|0],e<0?-1:0)}function l(e){if(isNaN(e)||!isFinite(e))return d;if(e<0)return g(l(-e));let t=[],n=1;for(let r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new o(t,0)}function u(e,t){if(e.length==0)throw Error(`number format error: empty string`);if(t||=10,t<2||36<t)throw Error(`radix out of range: `+t);if(e.charAt(0)==`-`)return g(u(e.substring(1),t));if(e.indexOf(`-`)>=0)throw Error(`number format error: interior "-" character`);let n=l(t**8),r=d;for(let a=0;a<e.length;a+=8){var i=Math.min(8,e.length-a);let o=parseInt(e.substring(a,a+i),t);i<8?(i=l(t**+i),r=r.j(i).add(l(o))):(r=r.j(n),r=r.add(l(o)))}return r}var d=c(0),f=c(1),p=c(16777216);e=o.prototype,e.m=function(){if(h(this))return-g(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){let r=this.i(n);e+=(r>=0?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(e||=10,e<2||36<e)throw Error(`radix out of range: `+e);if(m(this))return`0`;if(h(this))return`-`+g(this).toString(e);let t=l(e**6);var n=this;let r=``;for(;;){let i=b(n,t).g;n=_(n,i.j(t));let a=((n.g.length>0?n.g[0]:n.h)>>>0).toString(e);if(n=i,m(n))return a+r;for(;a.length<6;)a=`0`+a;r=a+r}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h};function m(e){if(e.h!=0)return!1;for(let t=0;t<e.g.length;t++)if(e.g[t]!=0)return!1;return!0}function h(e){return e.h==-1}e.l=function(e){return e=_(this,e),h(e)?-1:m(e)?0:1};function g(e){let t=e.g.length,n=[];for(let r=0;r<t;r++)n[r]=~e.g[r];return new o(n,~e.h).add(f)}e.abs=function(){return h(this)?g(this):this},e.add=function(e){let t=Math.max(this.g.length,e.g.length),n=[],r=0;for(let i=0;i<=t;i++){let t=r+(this.i(i)&65535)+(e.i(i)&65535),a=(t>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);r=a>>>16,t&=65535,a&=65535,n[i]=a<<16|t}return new o(n,n[n.length-1]&-2147483648?-1:0)};function _(e,t){return e.add(g(t))}e.j=function(e){if(m(this)||m(e))return d;if(h(this))return h(e)?g(this).j(g(e)):g(g(this).j(e));if(h(e))return g(this.j(g(e)));if(this.l(p)<0&&e.l(p)<0)return l(this.m()*e.m());let t=this.g.length+e.g.length,n=[];for(var r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(let t=0;t<e.g.length;t++){let i=this.i(r)>>>16,a=this.i(r)&65535,o=e.i(t)>>>16,s=e.i(t)&65535;n[2*r+2*t]+=a*s,v(n,2*r+2*t),n[2*r+2*t+1]+=i*s,v(n,2*r+2*t+1),n[2*r+2*t+1]+=a*o,v(n,2*r+2*t+1),n[2*r+2*t+2]+=i*o,v(n,2*r+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new o(n,0)};function v(e,t){for(;(e[t]&65535)!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function y(e,t){this.g=e,this.h=t}function b(e,t){if(m(t))throw Error(`division by zero`);if(m(e))return new y(d,d);if(h(e))return t=b(g(e),t),new y(g(t.g),g(t.h));if(h(t))return t=b(e,g(t)),new y(g(t.g),t.h);if(e.g.length>30){if(h(e)||h(t))throw Error(`slowDivide_ only works with positive integers.`);for(var n=f,r=t;r.l(e)<=0;)n=x(n),r=x(r);var i=ee(n,1),a=ee(r,1);for(r=ee(r,2),n=ee(n,2);!m(r);){var o=a.add(r);o.l(e)<=0&&(i=i.add(n),a=o),r=ee(r,1),n=ee(n,1)}return t=_(e,i.j(t)),new y(i,t)}for(i=d;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=Math.ceil(Math.log(n)/Math.LN2),r=r<=48?1:2**(r-48),a=l(n),o=a.j(t);h(o)||o.l(e)>0;)n-=r,a=l(n),o=a.j(t);m(a)&&(a=f),i=i.add(a),e=_(e,o)}return new y(i,e)}e.B=function(e){return b(this,e).h},e.and=function(e){let t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new o(n,this.h&e.h)},e.or=function(e){let t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new o(n,this.h|e.h)},e.xor=function(e){let t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new o(n,this.h^e.h)};function x(e){let t=e.g.length+1,n=[];for(let r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new o(n,e.h)}function ee(e,t){let n=t>>5;t%=32;let r=e.g.length-n,i=[];for(let a=0;a<r;a++)i[a]=t>0?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new o(i,e.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,On=En.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=u,Dn=En.Integer=o}).apply(Tn===void 0?typeof self<`u`?self:typeof window<`u`?window:{}:Tn);var kn=typeof globalThis<`u`?globalThis:typeof window<`u`?window:typeof global<`u`?global:typeof self<`u`?self:{},An={},jn,Mn,Nn,Pn,Fn,In,Ln,Rn;(function(){var e,t=Object.defineProperty;function n(e){e=[typeof globalThis==`object`&&globalThis,e,typeof window==`object`&&window,typeof self==`object`&&self,typeof kn==`object`&&kn];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error(`Cannot find global object`)}var r=n(this);function i(e,n){if(n)a:{var i=r;e=e.split(`.`);for(var a=0;a<e.length-1;a++){var o=e[a];if(!(o in i))break a;i=i[o]}e=e[e.length-1],a=i[e],n=n(a),n!=a&&n!=null&&t(i,e,{configurable:!0,writable:!0,value:n})}}i(`Symbol.dispose`,function(e){return e||Symbol(`Symbol.dispose`)}),i(`Array.prototype.values`,function(e){return e||function(){return this[Symbol.iterator]()}}),i(`Object.entries`,function(e){return e||function(e){var t=[],n;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push([n,e[n]]);return t}});var a=a||{},o=this||self;function s(e){var t=typeof e;return t==`object`&&e!=null||t==`function`}function c(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){return l=c,l.apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}var f=typeof AsyncContext<`u`&&typeof AsyncContext.Snapshot==`function`?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function p(e){let t=e.length;if(t>0){let n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function m(e,t){for(let t=1;t<arguments.length;t++){let r=arguments[t];var n=typeof r;if(n=n==`object`?r?Array.isArray(r)?`array`:n:`null`:n,n==`array`||n==`object`&&typeof r.length==`number`){n=e.length||0;let t=r.length||0;e.length=n+t;for(let i=0;i<t;i++)e[n+i]=r[i]}else e.push(r)}}class h{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function g(e){o.setTimeout(()=>{throw e},0)}function _(){var e=S;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}class v{constructor(){this.h=this.g=null}add(e,t){let n=y.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}var y=new h(()=>new b,e=>e.reset());class b{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let x,ee=!1,S=new v,C=()=>{let e=Promise.resolve(void 0);x=()=>{e.then(w)}};function w(){for(var e;e=_();){try{e.h.call(e.g)}catch(e){g(e)}var t=y;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}ee=!1}function te(){this.u=this.u,this.C=this.C}te.prototype.u=!1,te.prototype.dispose=function(){this.u||(this.u=!0,this.N())},te.prototype[Symbol.dispose]=function(){this.dispose()},te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ne(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}ne.prototype.h=function(){this.defaultPrevented=!0};var re=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},`passive`,{get:function(){e=!0}});try{let e=()=>{};o.addEventListener(`test`,e,t),o.removeEventListener(`test`,e,t)}catch{}return e}();function ie(e){return/^[\s\xa0]*$/.test(e)}function ae(e,t){ne.call(this,e?e.type:``),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key=``,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType=``,this.i=null,e&&this.init(e,t)}d(ae,ne),ae.prototype.init=function(e,t){let n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget,t||(n==`mouseover`?t=e.fromElement:n==`mouseout`&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=r.clientX===void 0?r.pageX:r.clientX,this.clientY=r.clientY===void 0?r.pageY:r.clientY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=e.clientX===void 0?e.pageX:e.clientX,this.clientY=e.clientY===void 0?e.pageY:e.clientY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||``,this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&ae.Z.h.call(this)},ae.prototype.h=function(){ae.Z.h.call(this);let e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var oe=`closure_listenable_`+(Math.random()*1e6|0),se=0;function ce(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++se,this.da=this.fa=!1}function T(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function le(e,t,n){for(let r in e)t.call(n,e[r],r,e)}function E(e,t){for(let n in e)t.call(void 0,e[n],n,e)}function D(e){let t={};for(let n in e)t[n]=e[n];return t}let ue=`constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf`.split(` `);function de(e,t){let n,r;for(let t=1;t<arguments.length;t++){for(n in r=arguments[t],r)e[n]=r[n];for(let t=0;t<ue.length;t++)n=ue[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function fe(e){this.src=e,this.g={},this.h=0}fe.prototype.add=function(e,t,n,r,i){let a=e.toString();e=this.g[a],e||(e=this.g[a]=[],this.h++);let o=me(e,t,r,i);return o>-1?(t=e[o],n||(t.fa=!1)):(t=new ce(t,this.src,a,!!r,i),t.fa=n,e.push(t)),t};function pe(e,t){let n=t.type;if(n in e.g){var r=e.g[n],i=Array.prototype.indexOf.call(r,t,void 0),a;(a=i>=0)&&Array.prototype.splice.call(r,i,1),a&&(T(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function me(e,t,n,r){for(let i=0;i<e.length;++i){let a=e[i];if(!a.da&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}var he=`closure_lm_`+(Math.random()*1e6|0),ge={};function _e(e,t,n,r,i){if(r&&r.once)return be(e,t,n,r,i);if(Array.isArray(t)){for(let a=0;a<t.length;a++)_e(e,t[a],n,r,i);return null}return n=De(n),e&&e[oe]?e.J(t,n,s(r)?!!r.capture:!!r,i):ve(e,t,n,!1,r,i)}function ve(e,t,n,r,i,a){if(!t)throw Error(`Invalid event type`);let o=s(i)?!!i.capture:!!i,c=Te(e);if(c||(e[he]=c=new fe(e)),n=c.add(t,n,r,o,a),n.proxy)return n;if(r=ye(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)re||(i=o),i===void 0&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Ce(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error(`addEventListener and attachEvent are unavailable.`);return n}function ye(){function e(n){return t.call(e.src,e.listener,n)}let t=we;return e}function be(e,t,n,r,i){if(Array.isArray(t)){for(let a=0;a<t.length;a++)be(e,t[a],n,r,i);return null}return n=De(n),e&&e[oe]?e.K(t,n,s(r)?!!r.capture:!!r,i):ve(e,t,n,!0,r,i)}function xe(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)xe(e,t[a],n,r,i);else r=s(r)?!!r.capture:!!r,n=De(n),e&&e[oe]?(e=e.i,a=String(t).toString(),a in e.g&&(t=e.g[a],n=me(t,n,r,i),n>-1&&(T(t[n]),Array.prototype.splice.call(t,n,1),t.length==0&&(delete e.g[a],e.h--)))):(e&&=Te(e))&&(t=e.g[t.toString()],e=-1,t&&(e=me(t,n,r,i)),(n=e>-1?t[e]:null)&&Se(n))}function Se(e){if(typeof e!=`number`&&e&&!e.da){var t=e.src;if(t&&t[oe])pe(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Ce(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Te(t))?(pe(n,e),n.h==0&&(n.src=null,t[he]=null)):T(e)}}}function Ce(e){return e in ge?ge[e]:ge[e]=`on`+e}function we(e,t){if(e.da)e=!0;else{t=new ae(t,this);let n=e.listener,r=e.ha||e.src;e.fa&&Se(e),e=n.call(r,t)}return e}function Te(e){return e=e[he],e instanceof fe?e:null}var Ee=`__closure_events_fn_`+(Math.random()*1e9>>>0);function De(e){return typeof e==`function`?e:(e[Ee]||(e[Ee]=function(t){return e.handleEvent(t)}),e[Ee])}function Oe(){te.call(this),this.i=new fe(this),this.M=this,this.G=null}d(Oe,te),Oe.prototype[oe]=!0,Oe.prototype.removeEventListener=function(e,t,n,r){xe(this,e,t,n,r)};function ke(e,t){var n,r=e.G;if(r)for(n=[];r;r=r.G)n.push(r);if(e=e.M,r=t.type||t,typeof t==`string`)t=new ne(t,e);else if(t instanceof ne)t.target=t.target||e;else{var i=t;t=new ne(r,e),de(t,i)}i=!0;let a,o;if(n)for(o=n.length-1;o>=0;o--)a=t.g=n[o],i=Ae(a,r,!0,t)&&i;if(a=t.g=e,i=Ae(a,r,!0,t)&&i,i=Ae(a,r,!1,t)&&i,n)for(o=0;o<n.length;o++)a=t.g=n[o],i=Ae(a,r,!1,t)&&i}Oe.prototype.N=function(){if(Oe.Z.N.call(this),this.i){var e=this.i;for(let t in e.g){let n=e.g[t];for(let e=0;e<n.length;e++)T(n[e]);delete e.g[t],e.h--}}this.G=null},Oe.prototype.J=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Oe.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};function Ae(e,t,n,r){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();let i=!0;for(let a=0;a<t.length;++a){let o=t[a];if(o&&!o.da&&o.capture==n){let t=o.listener,n=o.ha||o.src;o.fa&&pe(e.i,o),i=t.call(n,r)!==!1&&i}}return i&&!r.defaultPrevented}function je(e,t){if(typeof e!=`function`)if(e&&typeof e.handleEvent==`function`)e=l(e.handleEvent,e);else throw Error(`Invalid listener argument`);return Number(t)>2147483647?-1:o.setTimeout(e,t||0)}function Me(e){e.g=je(()=>{e.g=null,e.i&&(e.i=!1,Me(e))},e.l);let t=e.h;e.h=null,e.m.apply(null,t)}class Ne extends te{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:Me(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pe(e){te.call(this),this.h=e,this.g={}}d(Pe,te);var Fe=[];function Ie(e){le(e.g,function(e,t){this.g.hasOwnProperty(t)&&Se(e)},e),e.g={}}Pe.prototype.N=function(){Pe.Z.N.call(this),Ie(this)},Pe.prototype.handleEvent=function(){throw Error(`EventHandler.handleEvent not implemented`)};var Le=o.JSON.stringify,Re=o.JSON.parse,ze=class{stringify(e){return o.JSON.stringify(e,void 0)}parse(e){return o.JSON.parse(e,void 0)}};function Be(){}function O(){}var Ve={OPEN:`a`,hb:`b`,ERROR:`c`,tb:`d`};function He(){ne.call(this,`d`)}d(He,ne);function Ue(){ne.call(this,`c`)}d(Ue,ne);var We={},Ge=null;function Ke(){return Ge||=new Oe}We.Ia=`serverreachability`;function qe(e){ne.call(this,We.Ia,e)}d(qe,ne);function Je(e){let t=Ke();ke(t,new qe(t))}We.STAT_EVENT=`statevent`;function Ye(e,t){ne.call(this,We.STAT_EVENT,e),this.stat=t}d(Ye,ne);function Xe(e){let t=Ke();ke(t,new Ye(t,e))}We.Ja=`timingevent`;function Ze(e,t){ne.call(this,We.Ja,e),this.size=t}d(Ze,ne);function Qe(e,t){if(typeof e!=`function`)throw Error(`Fn must not be null and must be a function`);return o.setTimeout(function(){e()},t)}function $e(){this.g=!0}$e.prototype.ua=function(){this.g=!1};function et(e,t,n,r,i,a){e.info(function(){if(e.g)if(a){var o=``,s=a.split(`&`);for(let e=0;e<s.length;e++){var c=s[e].split(`=`);if(c.length>1){let e=c[0];c=c[1];let t=e.split(`_`);o=t.length>=2&&t[1]==`type`?o+(e+`=`+c+`&`):o+(e+`=redacted&`)}}}else o=null;else o=a;return`XMLHTTP REQ (`+r+`) [attempt `+i+`]: `+t+`
`+n+`
`+o})}function tt(e,t,n,r,i,a,o){e.info(function(){return`XMLHTTP RESP (`+r+`) [ attempt `+i+`]: `+t+`
`+n+`
`+a+` `+o})}function nt(e,t,n,r){e.info(function(){return`XMLHTTP TEXT (`+t+`): `+it(e,n)+(r?` `+r:``)})}function rt(e,t){e.info(function(){return`TIMEOUT: `+t})}$e.prototype.info=function(){};function it(e,t){if(!e.g)return t;if(!t)return null;try{let a=JSON.parse(t);if(a){for(e=0;e<a.length;e++)if(Array.isArray(a[e])){var n=a[e];if(!(n.length<2)){var r=n[1];if(Array.isArray(r)&&!(r.length<1)){var i=r[0];if(i!=`noop`&&i!=`stop`&&i!=`close`)for(let e=1;e<r.length;e++)r[e]=``}}}}return Le(a)}catch{return t}}var at={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ot={ib:`complete`,Fb:`success`,ERROR:`error`,Ga:`abort`,xb:`ready`,yb:`readystatechange`,TIMEOUT:`timeout`,sb:`incrementaldata`,wb:`progress`,lb:`downloadprogress`,Nb:`uploadprogress`},st;function ct(){}d(ct,Be),ct.prototype.g=function(){return new XMLHttpRequest},st=new ct;function lt(e){return encodeURIComponent(String(e))}function ut(e){var t=1;e=e.split(`:`);let n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(`:`)),n}function dt(e,t,n,r){this.j=e,this.i=t,this.l=n,this.S=r||1,this.V=new Pe(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ft}function ft(){this.i=null,this.g=``,this.h=!1}var pt={},mt={};function ht(e,t,n){e.M=1,e.A=Vt(Lt(t)),e.u=n,e.R=!0,gt(e,null)}function gt(e,t){e.F=Date.now(),bt(e),e.B=Lt(e.A);var n=e.B,r=e.S;Array.isArray(r)||(r=[String(r)]),tn(n.i,`t`,r),e.C=0,n=e.j.L,e.h=new ft,e.g=Zn(e.j,n?t:null,!e.u),e.P>0&&(e.O=new Ne(l(e.Y,e,e.g),e.P)),t=e.V,n=e.g,r=e.ba;var i=`readystatechange`;Array.isArray(i)||(i&&(Fe[0]=i.toString()),i=Fe);for(let e=0;e<i.length;e++){let a=_e(n,i[e],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.J?D(e.J):{},e.u?(e.v||=`POST`,t[`Content-Type`]=`application/x-www-form-urlencoded`,e.g.ea(e.B,e.v,e.u,t)):(e.v=`GET`,e.g.ea(e.B,e.v,null,t)),Je(),et(e.i,e.v,e.B,e.l,e.S,e.u)}dt.prototype.ba=function(e){e=e.target;let t=this.O;t&&wn(e)==3?t.j():this.Y(e)},dt.prototype.Y=function(e){try{if(e==this.g)a:{let s=wn(this.g),c=this.g.ya(),l=this.g.ca();if(!(s<3)&&(s!=3||this.g&&(this.h.h||this.g.la()||Tn(this.g)))){this.K||s!=4||c==7||Je(c==8||l<=0?3:2),St(this);var t=this.g.ca();this.X=t;var n=_t(this);if(this.o=t==200,tt(this.i,this.v,this.B,this.l,this.S,s,t),this.o){if(this.U&&!this.L){b:{if(this.g){var r,i=this.g;if((r=i.g?i.g.getResponseHeader(`X-HTTP-Initial-Response`):null)&&!ie(r)){var a=r;break b}}a=null}if(e=a)nt(this.i,this.l,e,`Initial handshake response via X-HTTP-Initial-Response`),this.L=!0,Tt(this,e);else{this.o=!1,this.m=3,Xe(12),wt(this),Ct(this);break a}}if(this.R){e=!0;let t;for(;!this.K&&this.C<n.length;)if(t=yt(this,n),t==mt){s==4&&(this.m=4,Xe(14),e=!1),nt(this.i,this.l,null,`[Incomplete Response]`);break}else if(t==pt){this.m=4,Xe(15),nt(this.i,this.l,n,`[Invalid Chunk]`),e=!1;break}else nt(this.i,this.l,t,null),Tt(this,t);if(vt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),s!=4||n.length!=0||this.h.h||(this.m=1,Xe(16),e=!1),this.o=this.o&&e,!e)nt(this.i,this.l,n,`[Invalid Chunked Response]`),wt(this),Ct(this);else if(n.length>0&&!this.W){this.W=!0;var o=this.j;o.g==this&&o.aa&&!o.P&&(o.j.info(`Great, no buffering proxy detected. Bytes received: `+n.length),j(o),o.P=!0,Xe(11))}}else nt(this.i,this.l,n,null),Tt(this,n);s==4&&wt(this),this.o&&!this.K&&(s==4?N(this.j,this):(this.o=!1,bt(this)))}else En(this.g),t==400&&n.indexOf(`Unknown SID`)>0?(this.m=3,Xe(12)):(this.m=0,Xe(13)),wt(this),Ct(this)}}}catch{}};function _t(e){if(!vt(e))return e.g.la();let t=Tn(e.g);if(t===``)return``;let n=``,r=t.length,i=wn(e.g)==4;if(!e.h.i){if(typeof TextDecoder>`u`)return wt(e),Ct(e),``;e.h.i=new o.TextDecoder}for(let a=0;a<r;a++)e.h.h=!0,n+=e.h.i.decode(t[a],{stream:!(i&&a==r-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}function vt(e){return e.g?e.v==`GET`&&e.M!=2&&e.j.Aa:!1}function yt(e,t){var n=e.C,r=t.indexOf(`
`,n);return r==-1?mt:(n=Number(t.substring(n,r)),isNaN(n)?pt:(r+=1,r+n>t.length?mt:(t=t.slice(r,r+n),e.C=r+n,t)))}dt.prototype.cancel=function(){this.K=!0,wt(this)};function bt(e){e.T=Date.now()+e.H,xt(e,e.H)}function xt(e,t){if(e.D!=null)throw Error(`WatchDog timer not null`);e.D=Qe(l(e.aa,e),t)}function St(e){e.D&&=(o.clearTimeout(e.D),null)}dt.prototype.aa=function(){this.D=null;let e=Date.now();e-this.T>=0?(rt(this.i,this.B),this.M!=2&&(Je(),Xe(17)),wt(this),this.m=2,Ct(this)):xt(this,this.T-e)};function Ct(e){e.j.I==0||e.K||N(e.j,e)}function wt(e){St(e);var t=e.O;t&&typeof t.dispose==`function`&&t.dispose(),e.O=null,Ie(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function Tt(e,t){try{var n=e.j;if(n.I!=0&&(n.g==e||At(n.h,e))){if(!e.L&&At(n.h,e)&&n.I==3){try{var r=n.Ba.g.parse(t)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){a:if(!n.v){if(n.g)if(n.g.F+3e3<e.F)M(n),Bn(n);else break a;qn(n),Xe(18)}}else n.xa=i[1],0<n.xa-n.K&&i[2]<37500&&n.F&&n.A==0&&!n.C&&(n.C=Qe(l(n.Va,n),6e3));kt(n.h)<=1&&n.ta&&(n.ta=void 0)}else F(n,11)}else if((e.L||n.g==e)&&M(n),!ie(t))for(i=n.Ba.g.parse(t),t=0;t<i.length;t++){let l=i[t],u=l[0];if(!(u<=n.K))if(n.K=u,l=l[1],n.I==2)if(l[0]==`c`){n.M=l[1],n.ba=l[2];let t=l[3];t!=null&&(n.ka=t,n.j.info(`VER=`+n.ka));let i=l[4];i!=null&&(n.za=i,n.j.info(`SVER=`+n.za));let u=l[5];u!=null&&typeof u==`number`&&u>0&&(r=1.5*u,n.O=r,n.j.info(`backChannelRequestTimeoutMs_=`+r)),r=n;let d=e.g;if(d){let e=d.g?d.g.getResponseHeader(`X-Client-Wire-Protocol`):null;if(e){var a=r.h;a.g||e.indexOf(`spdy`)==-1&&e.indexOf(`quic`)==-1&&e.indexOf(`h2`)==-1||(a.j=a.l,a.g=new Set,a.h&&=(jt(a,a.h),null))}if(r.G){let e=d.g?d.g.getResponseHeader(`X-HTTP-Session-Id`):null;e&&(r.wa=e,k(r.J,r.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info(`Handshake RTT: `+n.T+`ms`)),r=n;var o=e;if(r.na=Xn(r,r.L?r.ba:null,r.W),o.L){Mt(r.h,o);var s=o,c=r.O;c&&(s.H=c),s.D&&(St(s),bt(s)),r.g=o}else Kn(r);n.i.length>0&&Hn(n)}else l[0]!=`stop`&&l[0]!=`close`||F(n,7);else n.I==3&&(l[0]==`stop`||l[0]==`close`?l[0]==`stop`?F(n,7):zn(n):l[0]!=`noop`&&n.l&&n.l.qa(l),n.A=0)}}Je(4)}catch{}}var Et=class{constructor(e,t){this.g=e,this.map=t}};function Dt(e){this.l=e||10,o.PerformanceNavigationTiming?(e=o.performance.getEntriesByType(`navigation`),e=e.length>0&&(e[0].nextHopProtocol==`hq`||e[0].nextHopProtocol==`h2`)):e=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ot(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function kt(e){return e.h?1:e.g?e.g.size:0}function At(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function jt(e,t){e.g?e.g.add(t):e.h=t}function Mt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}Dt.prototype.cancel=function(){if(this.i=Nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let e of this.g.values())e.cancel();this.g.clear()}};function Nt(e){if(e.h!=null)return e.i.concat(e.h.G);if(e.g!=null&&e.g.size!==0){let t=e.i;for(let n of e.g.values())t=t.concat(n.G);return t}return p(e.i)}var Pt=RegExp(`^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$`);function Ft(e,t){if(e){e=e.split(`&`);for(let n=0;n<e.length;n++){let r=e[n].indexOf(`=`),i,a=null;r>=0?(i=e[n].substring(0,r),a=e[n].substring(r+1)):i=e[n],t(i,a?decodeURIComponent(a.replace(/\+/g,` `)):``)}}}function It(e){this.g=this.o=this.j=``,this.u=null,this.m=this.h=``,this.l=!1;let t;e instanceof It?(this.l=e.l,Rt(this,e.j),this.o=e.o,this.g=e.g,zt(this,e.u),this.h=e.h,Bt(this,nn(e.i)),this.m=e.m):e&&(t=String(e).match(Pt))?(this.l=!1,Rt(this,t[1]||``,!0),this.o=Ht(t[2]||``),this.g=Ht(t[3]||``,!0),zt(this,t[4]),this.h=Ht(t[5]||``,!0),Bt(this,t[6]||``,!0),this.m=Ht(t[7]||``)):(this.l=!1,this.i=new Xt(null,this.l))}It.prototype.toString=function(){let e=[];var t=this.j;t&&e.push(Ut(t,Gt,!0),`:`);var n=this.g;return(n||t==`file`)&&(e.push(`//`),(t=this.o)&&e.push(Ut(t,Gt,!0),`@`),e.push(lt(n).replace(/%25([0-9a-fA-F]{2})/g,`%$1`)),n=this.u,n!=null&&e.push(`:`,String(n))),(n=this.h)&&(this.g&&n.charAt(0)!=`/`&&e.push(`/`),e.push(Ut(n,n.charAt(0)==`/`?qt:Kt,!0))),(n=this.i.toString())&&e.push(`?`,n),(n=this.m)&&e.push(`#`,Ut(n,Yt)),e.join(``)},It.prototype.resolve=function(e){let t=Lt(this),n=!!e.j;n?Rt(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=e.u!=null;var r=e.h;if(n)zt(t,e.u);else if(n=!!e.h){if(r.charAt(0)!=`/`)if(this.g&&!this.h)r=`/`+r;else{var i=t.h.lastIndexOf(`/`);i!=-1&&(r=t.h.slice(0,i+1)+r)}if(i=r,i==`..`||i==`.`)r=``;else if(i.indexOf(`./`)!=-1||i.indexOf(`/.`)!=-1){r=i.lastIndexOf(`/`,0)==0,i=i.split(`/`);let e=[];for(let t=0;t<i.length;){let n=i[t++];n==`.`?r&&t==i.length&&e.push(``):n==`..`?((e.length>1||e.length==1&&e[0]!=``)&&e.pop(),r&&t==i.length&&e.push(``)):(e.push(n),r=!0)}r=e.join(`/`)}else r=i}return n?t.h=r:n=e.i.toString()!==``,n?Bt(t,nn(e.i)):n=!!e.m,n&&(t.m=e.m),t};function Lt(e){return new It(e)}function Rt(e,t,n){e.j=n?Ht(t,!0):t,e.j&&=e.j.replace(/:$/,``)}function zt(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error(`Bad port number `+t);e.u=t}else e.u=null}function Bt(e,t,n){t instanceof Xt?(e.i=t,an(e.i,e.l)):(n||(t=Ut(t,Jt)),e.i=new Xt(t,e.l))}function k(e,t,n){e.i.set(t,n)}function Vt(e){return k(e,`zx`,Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),e}function Ht(e,t){return e?t?decodeURI(e.replace(/%25/g,`%2525`)):decodeURIComponent(e):``}function Ut(e,t,n){return typeof e==`string`?(e=encodeURI(e).replace(t,Wt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,`%$1`)),e):null}function Wt(e){return e=e.charCodeAt(0),`%`+(e>>4&15).toString(16)+(e&15).toString(16)}var Gt=/[#\/\?@]/g,Kt=/[#\?:]/g,qt=/[#\?]/g,Jt=/[#\?@]/g,Yt=/#/g;function Xt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Zt(e){e.g||(e.g=new Map,e.h=0,e.i&&Ft(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g,` `)),n)}))}e=Xt.prototype,e.add=function(e,t){Zt(this),this.i=null,e=rn(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function Qt(e,t){Zt(e),t=rn(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function $t(e,t){return Zt(e),t=rn(e,t),e.g.has(t)}e.forEach=function(e,t){Zt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)};function en(e,t){Zt(e);let n=[];if(typeof t==`string`)$t(e,t)&&(n=n.concat(e.g.get(rn(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}e.set=function(e,t){return Zt(this),this.i=null,e=rn(this,e),$t(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e?(e=en(this,e),e.length>0?String(e[0]):t):t};function tn(e,t,n){Qt(e,t),n.length>0&&(e.i=null,e.g.set(rn(e,t),p(n)),e.h+=n.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return``;let e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var n=t[r];let i=lt(n);n=en(this,n);for(let t=0;t<n.length;t++){let r=i;n[t]!==``&&(r+=`=`+lt(n[t])),e.push(r)}}return this.i=e.join(`&`)};function nn(e){let t=new Xt;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function rn(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function an(e,t){t&&!e.j&&(Zt(e),e.i=null,e.g.forEach(function(e,t){let n=t.toLowerCase();t!=n&&(Qt(this,t),tn(this,n,e))},e)),e.j=t}function on(e,t){let n=new $e;if(o.Image){let r=new Image;r.onload=u(cn,n,`TestLoadImage: loaded`,!0,t,r),r.onerror=u(cn,n,`TestLoadImage: error`,!1,t,r),r.onabort=u(cn,n,`TestLoadImage: abort`,!1,t,r),r.ontimeout=u(cn,n,`TestLoadImage: timeout`,!1,t,r),o.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function sn(e,t){let n=new $e,r=new AbortController,i=setTimeout(()=>{r.abort(),cn(n,`TestPingServer: timeout`,!1,t)},1e4);fetch(e,{signal:r.signal}).then(e=>{clearTimeout(i),e.ok?cn(n,`TestPingServer: ok`,!0,t):cn(n,`TestPingServer: server error`,!1,t)}).catch(()=>{clearTimeout(i),cn(n,`TestPingServer: error`,!1,t)})}function cn(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch{}}function ln(){this.g=new ze}function un(e){this.i=e.Sb||null,this.h=e.ab||!1}d(un,Be),un.prototype.g=function(){return new dn(this.i,this.h)};function dn(e,t){Oe.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText=``,this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F=`GET`,this.D=``,this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(dn,Oe),e=dn.prototype,e.open=function(e,t){if(this.readyState!=0)throw this.abort(),Error(`Error reopening a connection`);this.F=e,this.D=t,this.readyState=1,mn(this)},e.send=function(e){if(this.readyState!=1)throw this.abort(),Error(`need to call open() first. `);if(this.v.signal.aborted)throw this.abort(),Error(`Request was aborted.`);this.g=!0;let t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||o).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText=``,this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel(`Request was aborted.`).catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,pn(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,mn(this)),this.g&&(this.readyState=3,mn(this),this.g)))if(this.responseType===`arraybuffer`)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(o.ReadableStream!==void 0&&`body`in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error(`responseType must be empty for "streamBinaryChunks" mode responses.`);this.response=[]}else this.response=this.responseText=``,this.B=new TextDecoder;fn(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))};function fn(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array;(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?pn(this):mn(this),this.readyState==3&&fn(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,pn(this))},e.Na=function(e){this.g&&(this.response=e,pn(this))},e.ga=function(){this.g&&pn(this)};function pn(e){e.readyState=4,e.l=null,e.j=null,e.B=null,mn(e)}e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||``},e.getAllResponseHeaders=function(){if(!this.h)return``;let e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+`: `+n[1]),n=t.next();return e.join(`\r
`)};function mn(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(dn.prototype,`withCredentials`,{get:function(){return this.m===`include`},set:function(e){this.m=e?`include`:`same-origin`}});function hn(e){let t=``;return le(e,function(e,n){t+=n,t+=`:`,t+=e,t+=`\r
`}),t}function gn(e,t,n){a:{for(r in n){var r=!1;break a}r=!0}r||(n=hn(n),typeof e==`string`||k(e,t,n))}function _n(e){Oe.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D=``,this.o=0,this.l=``,this.j=this.B=this.v=this.A=!1,this.m=null,this.F=``,this.H=!1}d(_n,Oe);var vn=/^https?$/i,yn=[`POST`,`PUT`];e=_n.prototype,e.Fa=function(e){this.H=e},e.ea=function(e,t,n,r){if(this.g)throw Error(`[goog.net.XhrIo] Object is active with another request=`+this.D+`; newUri=`+e);t=t?t.toUpperCase():`GET`,this.D=e,this.l=``,this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():st.g(),this.g.onreadystatechange=f(l(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(e){bn(this,e);return}if(e=n||``,n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys==`function`&&typeof r.get==`function`)for(let e of r.keys())n.set(e,r.get(e));else throw Error(`Unknown input type for opt_headers: `+String(r));r=Array.from(n.keys()).find(e=>e.toLowerCase()==`content-type`),i=o.FormData&&e instanceof o.FormData,!(Array.prototype.indexOf.call(yn,t,void 0)>=0)||r||i||n.set(`Content-Type`,`application/x-www-form-urlencoded;charset=utf-8`);for(let[e,t]of n)this.g.setRequestHeader(e,t);this.F&&(this.g.responseType=this.F),`withCredentials`in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&=(clearTimeout(this.m),null),this.v=!0,this.g.send(e),this.v=!1}catch(e){bn(this,e)}};function bn(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,xn(e),Cn(e)}function xn(e){e.A||(e.A=!0,ke(e,`complete`),ke(e,`error`))}e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,ke(this,`complete`),ke(this,`abort`),Cn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Cn(this,!0)),_n.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Sn(this):this.Xa())},e.Xa=function(){Sn(this)};function Sn(e){if(e.h&&a!==void 0){if(e.v&&wn(e)==4)setTimeout(e.Ca.bind(e),0);else if(ke(e,`readystatechange`),wn(e)==4){e.h=!1;try{let a=e.ca();a:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break a;default:t=!1}var n;if(!(n=t)){var r;if(r=a===0){let t=String(e.D).match(Pt)[1]||null;!t&&o.self&&o.self.location&&(t=o.self.location.protocol.slice(0,-1)),r=!vn.test(t?t.toLowerCase():``)}n=r}if(n)ke(e,`complete`),ke(e,`success`);else{e.o=6;try{var i=wn(e)>2?e.g.statusText:``}catch{i=``}e.l=i+` [`+e.ca()+`]`,xn(e)}}finally{Cn(e)}}}}function Cn(e,t){if(e.g){e.m&&=(clearTimeout(e.m),null);let n=e.g;e.g=null,t||ke(e,`ready`);try{n.onreadystatechange=null}catch{}}}e.isActive=function(){return!!this.g};function wn(e){return e.g?e.g.readyState:0}e.ca=function(){try{return wn(this)>2?this.g.status:-1}catch{return-1}},e.la=function(){try{return this.g?this.g.responseText:``}catch{return``}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),Re(t)}};function Tn(e){try{if(!e.g)return null;if(`response`in e.g)return e.g.response;switch(e.F){case``:case`text`:return e.g.responseText;case`arraybuffer`:if(`mozResponseArrayBuffer`in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}function En(e){let t={};e=(e.g&&wn(e)>=2&&e.g.getAllResponseHeaders()||``).split(`\r
`);for(let r=0;r<e.length;r++){if(ie(e[r]))continue;var n=ut(e[r]);let i=n[0];if(n=n[1],typeof n!=`string`)continue;n=n.trim();let a=t[i]||[];t[i]=a,a.push(n)}E(t,function(e){return e.join(`, `)})}e.ya=function(){return this.o},e.Ha=function(){return typeof this.l==`string`?this.l:String(this.l)};function Dn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function On(e){this.za=0,this.i=[],this.j=new $e,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Dn(`failFast`,!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Dn(`baseRetryDelayMs`,5e3,e),this.Za=Dn(`retryDelaySeedMs`,1e4,e),this.Ta=Dn(`forwardChannelMaxRetries`,2,e),this.va=Dn(`forwardChannelRequestTimeoutMs`,2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M=``,this.h=new Dt(e&&e.concurrentRequestLimit),this.Ba=new ln,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}e=On.prototype,e.ka=8,e.I=1,e.connect=function(e,t,n,r){Xe(0),this.W=e,this.H=t||{},n&&r!==void 0&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.J=Xn(this,null,this.W),Hn(this)};function zn(e){if(Vn(e),e.I==3){var t=e.V++,n=Lt(e.J);if(k(n,`SID`,e.M),k(n,`RID`,t),k(n,`TYPE`,`terminate`),A(e,n),t=new dt(e,e.j,t),t.M=2,t.A=Vt(Lt(n)),n=!1,o.navigator&&o.navigator.sendBeacon)try{n=o.navigator.sendBeacon(t.A.toString(),``)}catch{}!n&&o.Image&&(new Image().src=t.A,n=!0),n||(t.g=Zn(t.j,null),t.g.ea(t.A)),t.F=Date.now(),bt(t)}Yn(e)}function Bn(e){e.g&&=(j(e),e.g.cancel(),null)}function Vn(e){Bn(e),e.v&&=(o.clearTimeout(e.v),null),M(e),e.h.cancel(),e.m&&=(typeof e.m==`number`&&o.clearTimeout(e.m),null)}function Hn(e){if(!Ot(e.h)&&!e.m){e.m=!0;var t=e.Ea;x||C(),ee||=(x(),!0),S.add(t,e),e.D=0}}function Un(e,t){return kt(e.h)>=e.h.j-(e.m?1:0)?!1:e.m?(e.i=t.G.concat(e.i),!0):e.I==1||e.I==2||e.D>=(e.Sa?0:e.Ta)?!1:(e.m=Qe(l(e.Ea,e,t),P(e,e.D)),e.D++,!0)}e.Ea=function(e){if(this.m)if(this.m=null,this.I==1){if(!e){this.V=Math.floor(Math.random()*1e5),e=this.V++;let i=new dt(this,this.j,e),a=this.o;if(this.U&&(a?(a=D(a),de(a,this.U)):a=this.U),this.u!==null||this.R||(i.J=a,a=null),this.S)a:{for(var t=0,n=0;n<this.i.length;n++){b:{var r=this.i[n];if(`__data__`in r.map&&(r=r.map.__data__,typeof r==`string`)){r=r.length;break b}r=void 0}if(r===void 0)break;if(t+=r,t>4096){t=n;break a}if(t===4096||n===this.i.length-1){t=n+1;break a}}t=1e3}else t=1e3;t=Gn(this,i,t),n=Lt(this.J),k(n,`RID`,e),k(n,`CVER`,22),this.G&&k(n,`X-HTTP-Session-Id`,this.G),A(this,n),a&&(this.R?t=`headers=`+lt(hn(a))+`&`+t:this.u&&gn(n,this.u,a)),jt(this.h,i),this.Ra&&k(n,`TYPE`,`init`),this.S?(k(n,`$req`,t),k(n,`SID`,`null`),i.U=!0,ht(i,n,null)):ht(i,n,t),this.I=2}}else this.I==3&&(e?Wn(this,e):this.i.length==0||Ot(this.h)||Wn(this))};function Wn(e,t){var n=t?t.l:e.V++;let r=Lt(e.J);k(r,`SID`,e.M),k(r,`RID`,n),k(r,`AID`,e.K),A(e,r),e.u&&e.o&&gn(r,e.u,e.o),n=new dt(e,e.j,n,e.D+1),e.u===null&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=Gn(e,n,1e3),n.H=Math.round(e.va*.5)+Math.round(e.va*.5*Math.random()),jt(e.h,n),ht(n,r,t)}function A(e,t){e.H&&le(e.H,function(e,n){k(t,n,e)}),e.l&&le({},function(e,n){k(t,n,e)})}function Gn(e,t,n){n=Math.min(e.i.length,n);let r=e.l?l(e.l.Ka,e.l,e):null;a:{var i=e.i;let t=-1;for(;;){let e=[`count=`+n];t==-1?n>0?(t=i[0].g,e.push(`ofs=`+t)):t=0:e.push(`ofs=`+t);let c=!0;for(let l=0;l<n;l++){var a=i[l].g;let n=i[l].map;if(a-=t,a<0)t=Math.max(0,i[l].g-100),c=!1;else try{a=`req`+a+`_`||``;try{var o=n instanceof Map?n:Object.entries(n);for(let[t,n]of o){let r=n;s(n)&&(r=Le(n)),e.push(a+t+`=`+encodeURIComponent(r))}}catch(t){throw e.push(a+`type=_badmap`),t}}catch{r&&r(n)}}if(c){o=e.join(`&`);break a}}o=void 0}return e=e.i.splice(0,n),t.G=e,o}function Kn(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;x||C(),ee||=(x(),!0),S.add(t,e),e.A=0}}function qn(e){return e.g||e.v||e.A>=3?!1:(e.Y++,e.v=Qe(l(e.Da,e),P(e,e.A)),e.A++,!0)}e.Da=function(){if(this.v=null,Jn(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var e=4*this.T;this.j.info(`BP detection timer enabled: `+e),this.B=Qe(l(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info(`BP detection timeout reached.`),this.j.info(`Buffering proxy detected and switch to long-polling!`),this.F=!1,this.P=!0,Xe(10),Bn(this),Jn(this))};function j(e){e.B!=null&&(o.clearTimeout(e.B),e.B=null)}function Jn(e){e.g=new dt(e,e.j,`rpc`,e.Y),e.u===null&&(e.g.J=e.o),e.g.P=0;var t=Lt(e.na);k(t,`RID`,`rpc`),k(t,`SID`,e.M),k(t,`AID`,e.K),k(t,`CI`,e.F?`0`:`1`),!e.F&&e.ia&&k(t,`TO`,e.ia),k(t,`TYPE`,`xmlhttp`),A(e,t),e.u&&e.o&&gn(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=Vt(Lt(t)),n.u=null,n.R=!0,gt(n,e)}e.Va=function(){this.C!=null&&(this.C=null,Bn(this),qn(this),Xe(19))};function M(e){e.C!=null&&(o.clearTimeout(e.C),e.C=null)}function N(e,t){var n=null;if(e.g==t){M(e),j(e),e.g=null;var r=2}else if(At(e.h,t))n=t.G,Mt(e.h,t),r=1;else return;if(e.I!=0){if(t.o)if(r==1){n=t.u?t.u.length:0,t=Date.now()-t.F;var i=e.D;r=Ke(),ke(r,new Ze(r,n)),Hn(e)}else Kn(e);else if(i=t.m,i==3||i==0&&t.X>0||!(r==1&&Un(e,t)||r==2&&qn(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),i){case 1:F(e,5);break;case 4:F(e,10);break;case 3:F(e,6);break;default:F(e,2)}}}function P(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function F(e,t){if(e.j.info(`Error code `+t),t==2){var n=l(e.bb,e),r=e.Ua;let t=!r;r=new It(r||`//www.google.com/images/cleardot.gif`),o.location&&o.location.protocol==`http`||Rt(r,`https`),Vt(r),t?on(r.toString(),n):sn(r.toString(),n)}else Xe(2);e.I=0,e.l&&e.l.pa(t),Yn(e),Vn(e)}e.bb=function(e){e?(this.j.info(`Successfully pinged google.com`),Xe(2)):(this.j.info(`Failed to ping google.com`),Xe(1))};function Yn(e){if(e.I=0,e.ja=[],e.l){let t=Nt(e.h);(t.length!=0||e.i.length!=0)&&(m(e.ja,t),m(e.ja,e.i),e.h.i.length=0,p(e.i),e.i.length=0),e.l.oa()}}function Xn(e,t,n){var r=n instanceof It?Lt(n):new It(n);if(r.g!=``)t&&(r.g=t+`.`+r.g),zt(r,r.u);else{var i=o.location;r=i.protocol,t=t?t+`.`+i.hostname:i.hostname,i=+i.port;let e=new It(null);r&&Rt(e,r),t&&(e.g=t),i&&zt(e,i),n&&(e.h=n),r=e}return n=e.G,t=e.wa,n&&t&&k(r,n,t),k(r,`VER`,e.ka),A(e,r),r}function Zn(e,t,n){if(t&&!e.L)throw Error(`Can't create secondary domain capable XhrIo object.`);return t=e.Aa&&!e.ma?new _n(new un({ab:n})):new _n(e.ma),t.Fa(e.L),t}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Qn(){}e=Qn.prototype,e.ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){};function $n(){}$n.prototype.g=function(e,t){return new er(e,t)};function er(e,t){Oe.call(this),this.g=new On(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e[`X-Client-Protocol`]=`webchannel`:e={"X-Client-Protocol":`webchannel`}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e[`X-WebChannel-Content-Type`]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e[`X-WebChannel-Client-Profile`]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!ie(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t&&=t.httpSessionIdParam)&&!ie(t)&&(this.g.G=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new rr(this)}d(er,Oe),er.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},er.prototype.close=function(){zn(this.g)},er.prototype.o=function(e){var t=this.g;if(typeof e==`string`){var n={};n.__data__=e,e=n}else this.v&&(n={},n.__data__=Le(e),e=n);t.i.push(new Et(t.Ya++,e)),t.I==3&&Hn(t)},er.prototype.N=function(){this.g.l=null,delete this.j,zn(this.g),delete this.g,er.Z.N.call(this)};function tr(e){He.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){a:{for(let n in t){e=n;break a}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}d(tr,He);function nr(){Ue.call(this),this.status=1}d(nr,Ue);function rr(e){this.g=e}d(rr,Qn),rr.prototype.ra=function(){ke(this.g,`a`)},rr.prototype.qa=function(e){ke(this.g,new tr(e))},rr.prototype.pa=function(e){ke(this.g,new nr)},rr.prototype.oa=function(){ke(this.g,`b`)},$n.prototype.createWebChannel=$n.prototype.g,er.prototype.send=er.prototype.o,er.prototype.open=er.prototype.m,er.prototype.close=er.prototype.close,Rn=An.createWebChannelTransport=function(){return new $n},Ln=An.getStatEventTarget=function(){return Ke()},In=An.Event=We,Fn=An.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},at.NO_ERROR=0,at.TIMEOUT=8,at.HTTP_ERROR=6,Pn=An.ErrorCode=at,ot.COMPLETE=`complete`,Nn=An.EventType=ot,O.EventType=Ve,Ve.OPEN=`a`,Ve.CLOSE=`b`,Ve.ERROR=`c`,Ve.MESSAGE=`d`,Oe.prototype.listen=Oe.prototype.J,Mn=An.WebChannel=O,An.FetchXmlHttpFactory=un,_n.prototype.listenOnce=_n.prototype.K,_n.prototype.getLastError=_n.prototype.Ha,_n.prototype.getLastErrorCode=_n.prototype.ya,_n.prototype.getStatus=_n.prototype.ca,_n.prototype.getResponseJson=_n.prototype.La,_n.prototype.getResponseText=_n.prototype.la,_n.prototype.send=_n.prototype.ea,_n.prototype.setWithCredentials=_n.prototype.Fa,jn=An.XhrIo=_n}).apply(kn===void 0?typeof self<`u`?self:typeof window<`u`?window:{}:kn);var zn=`@firebase/firestore`,Bn=`4.9.2`,Vn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?`uid:`+this.uid:`anonymous-user`}isEqual(e){return e.uid===this.uid}};Vn.UNAUTHENTICATED=new Vn(null),Vn.GOOGLE_CREDENTIALS=new Vn(`google-credentials-uid`),Vn.FIRST_PARTY=new Vn(`first-party-uid`),Vn.MOCK_USER=new Vn(`mock-user`);var Hn=`12.3.0`,Un=new Ge(`@firebase/firestore`);function Wn(){return Un.logLevel}function A(e,...t){if(Un.logLevel<=O.DEBUG){let n=t.map(qn);Un.debug(`Firestore (${Hn}): ${e}`,...n)}}function Gn(e,...t){if(Un.logLevel<=O.ERROR){let n=t.map(qn);Un.error(`Firestore (${Hn}): ${e}`,...n)}}function Kn(e,...t){if(Un.logLevel<=O.WARN){let n=t.map(qn);Un.warn(`Firestore (${Hn}): ${e}`,...n)}}function qn(e){if(typeof e==`string`)return e;try{return function(e){return JSON.stringify(e)}(e)}catch{return e}}function j(e,t,n){let r=`Unexpected state`;typeof t==`string`?r=t:n=t,Jn(e,r,n)}function Jn(e,t,n){let r=`FIRESTORE (${Hn}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{r+=` CONTEXT: `+JSON.stringify(n)}catch{r+=` CONTEXT: `+n}throw Gn(r),Error(r)}function M(e,t,n,r){let i=`Unexpected state`;typeof n==`string`?i=n:r=n,e||Jn(t,i,r)}function N(e,t){return e}var P={OK:`ok`,CANCELLED:`cancelled`,UNKNOWN:`unknown`,INVALID_ARGUMENT:`invalid-argument`,DEADLINE_EXCEEDED:`deadline-exceeded`,NOT_FOUND:`not-found`,ALREADY_EXISTS:`already-exists`,PERMISSION_DENIED:`permission-denied`,UNAUTHENTICATED:`unauthenticated`,RESOURCE_EXHAUSTED:`resource-exhausted`,FAILED_PRECONDITION:`failed-precondition`,ABORTED:`aborted`,OUT_OF_RANGE:`out-of-range`,UNIMPLEMENTED:`unimplemented`,INTERNAL:`internal`,UNAVAILABLE:`unavailable`,DATA_LOSS:`data-loss`},F=class extends ye{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}},Yn=class{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}},Xn=class{constructor(e,t){this.user=t,this.type=`OAuth`,this.headers=new Map,this.headers.set(`Authorization`,`Bearer ${e}`)}},Zn=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Vn.UNAUTHENTICATED)))}shutdown(){}},Qn=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}},$n=class{constructor(e){this.t=e,this.currentUser=Vn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){M(this.o===void 0,42304);let n=this.i,r=e=>this.i===n?Promise.resolve():(n=this.i,t(e)),i=new Yn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Yn,e.enqueueRetryable((()=>r(this.currentUser)))};let a=()=>{let t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{A(`FirebaseAuthCredentialsProvider`,`Auth detected`),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){let e=this.t.getImmediate({optional:!0});e?o(e):(A(`FirebaseAuthCredentialsProvider`,`Auth not yet detected`),i.resolve(),i=new Yn)}}),0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i===e?t?(M(typeof t.accessToken==`string`,31837,{l:t}),new Xn(t.accessToken,this.currentUser)):null:(A(`FirebaseAuthCredentialsProvider`,`getToken aborted due to token change.`),this.getToken()))):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return M(e===null||typeof e==`string`,2055,{h:e}),new Vn(e)}},er=class{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type=`FirstParty`,this.user=Vn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set(`X-Goog-AuthUser`,this.P);let e=this.R();return e&&this.A.set(`Authorization`,e),this.T&&this.A.set(`X-Goog-Iam-Authorization-Token`,this.T),this.A}},tr=class{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new er(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Vn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}},nr=class{constructor(e){this.value=e,this.type=`AppCheck`,this.headers=new Map,e&&e.length>0&&this.headers.set(`x-firebase-appcheck`,this.value)}},rr=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,en(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){M(this.o===void 0,3512);let n=e=>{e.error!=null&&A(`FirebaseAppCheckTokenProvider`,`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);let n=e.token!==this.m;return this.m=e.token,A(`FirebaseAppCheckTokenProvider`,`Received ${n?`new`:`existing`} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};let r=e=>{A(`FirebaseAppCheckTokenProvider`,`AppCheck detected`),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){let e=this.V.getImmediate({optional:!0});e?r(e):A(`FirebaseAppCheckTokenProvider`,`AppCheck not yet detected`)}}),0)}getToken(){if(this.p)return Promise.resolve(new nr(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(M(typeof e.token==`string`,44558,{tokenResult:e}),this.m=e.token,new nr(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function ir(e){let t=typeof self<`u`&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues==`function`)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}var ar=class{static newId(){let e=``;for(;e.length<20;){let t=ir(40);for(let n=0;n<t.length;++n)e.length<20&&t[n]<248&&(e+=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789`.charAt(t[n]%62))}return e}};function I(e,t){return e<t?-1:e>t?1:0}function or(e,t){let n=Math.min(e.length,t.length);for(let r=0;r<n;r++){let n=e.charAt(r),i=t.charAt(r);if(n!==i)return lr(n)===lr(i)?I(n,i):lr(n)?1:-1}return I(e.length,t.length)}var sr=55296,cr=57343;function lr(e){let t=e.charCodeAt(0);return t>=sr&&t<=cr}function ur(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}var dr=`__name__`,fr=class e{constructor(e,t,n){t===void 0?t=0:t>e.length&&j(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&j(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(t){return e.comparator(this,t)===0}child(t){let n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((e=>{n.push(e)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){let r=Math.min(t.length,n.length);for(let i=0;i<r;i++){let r=e.compareSegments(t.get(i),n.get(i));if(r!==0)return r}return I(t.length,n.length)}static compareSegments(t,n){let r=e.isNumericId(t),i=e.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?e.extractNumericId(t).compare(e.extractNumericId(n)):or(t,n)}static isNumericId(e){return e.startsWith(`__id`)&&e.endsWith(`__`)}static extractNumericId(e){return Dn.fromString(e.substring(4,e.length-2))}},pr=class e extends fr{construct(t,n,r){return new e(t,n,r)}canonicalString(){return this.toArray().join(`/`)}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join(`/`)}static fromString(...t){let n=[];for(let e of t){if(e.indexOf(`//`)>=0)throw new F(P.INVALID_ARGUMENT,`Invalid segment (${e}). Paths must not contain // in them.`);n.push(...e.split(`/`).filter((e=>e.length>0)))}return new e(n)}static emptyPath(){return new e([])}},mr=/^[_a-zA-Z][_a-zA-Z0-9]*$/,hr=class e extends fr{construct(t,n,r){return new e(t,n,r)}static isValidIdentifier(e){return mr.test(e)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,`\\\\`).replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(`.`)}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===dr}static keyField(){return new e([dr])}static fromServerFormat(t){let n=[],r=``,i=0,a=()=>{if(r.length===0)throw new F(P.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=``},o=!1;for(;i<t.length;){let e=t[i];if(e===`\\`){if(i+1===t.length)throw new F(P.INVALID_ARGUMENT,`Path has trailing escape character: `+t);let e=t[i+1];if(e!==`\\`&&e!==`.`&&e!=="`")throw new F(P.INVALID_ARGUMENT,`Path has invalid escape sequence: `+t);r+=e,i+=2}else e==="`"?(o=!o,i++):e!==`.`||o?(r+=e,i++):(a(),i++)}if(a(),o)throw new F(P.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)}static emptyPath(){return new e([])}},L=class e{constructor(e){this.path=e}static fromPath(t){return new e(pr.fromString(t))}static fromName(t){return new e(pr.fromString(t).popFirst(5))}static empty(){return new e(pr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return pr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(t){return new e(new pr(t.slice()))}};function gr(e,t,n){if(!n)throw new F(P.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function _r(e,t,n,r){if(!0===t&&!0===r)throw new F(P.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function vr(e){if(!L.isDocumentKey(e))throw new F(P.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function yr(e){if(L.isDocumentKey(e))throw new F(P.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function br(e){return typeof e==`object`&&!!e&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function xr(e){if(e===void 0)return`undefined`;if(e===null)return`null`;if(typeof e==`string`)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e==`number`||typeof e==`boolean`)return``+e;if(typeof e==`object`){if(e instanceof Array)return`an array`;{let t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:`an object`}}return typeof e==`function`?`a function`:j(12329,{type:typeof e})}function Sr(e,t){if(`_delegate`in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new F(P.INVALID_ARGUMENT,`Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?`);{let n=xr(e);throw new F(P.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function Cr(e,t){if(t<=0)throw new F(P.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}function wr(e,t){let n={typeString:e};return t&&(n.value=t),n}function Tr(e,t){if(!br(e))throw new F(P.INVALID_ARGUMENT,`JSON must be an object`);let n;for(let r in t)if(t[r]){let i=t[r].typeString,a=`value`in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}let o=e[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&o!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new F(P.INVALID_ARGUMENT,n);return!0}var Er=-62135596800,Dr=1e6,Or=class e{static now(){return e.fromMillis(Date.now())}static fromDate(t){return e.fromMillis(t.getTime())}static fromMillis(t){let n=Math.floor(t/1e3);return new e(n,Math.floor((t-1e3*n)*Dr))}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0||t>=1e9)throw new F(P.INVALID_ARGUMENT,`Timestamp nanoseconds out of range: `+t);if(e<Er||e>=253402300800)throw new F(P.INVALID_ARGUMENT,`Timestamp seconds out of range: `+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Dr}_compareTo(e){return this.seconds===e.seconds?I(this.nanoseconds,e.nanoseconds):I(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return`Timestamp(seconds=`+this.seconds+`, nanoseconds=`+this.nanoseconds+`)`}toJSON(){return{type:e._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Tr(t,e._jsonSchema))return new e(t.seconds,t.nanoseconds)}valueOf(){let e=this.seconds-Er;return String(e).padStart(12,`0`)+`.`+String(this.nanoseconds).padStart(9,`0`)}};Or._jsonSchemaVersion=`firestore/timestamp/1.0`,Or._jsonSchema={type:wr(`string`,Or._jsonSchemaVersion),seconds:wr(`number`),nanoseconds:wr(`number`)};var R=class e{static fromTimestamp(t){return new e(t)}static min(){return new e(new Or(0,0))}static max(){return new e(new Or(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return`SnapshotVersion(`+this.timestamp.toString()+`)`}toTimestamp(){return this.timestamp}},kr=-1,Ar=class{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}};Ar.UNKNOWN_ID=-1;function jr(e,t){let n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1;return new Nr(R.fromTimestamp(r===1e9?new Or(n+1,0):new Or(n,r)),L.empty(),t)}function Mr(e){return new Nr(e.readTime,e.key,kr)}var Nr=class e{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new e(R.min(),L.empty(),kr)}static max(){return new e(R.max(),L.empty(),kr)}};function Pr(e,t){let n=e.readTime.compareTo(t.readTime);return n===0?(n=L.comparator(e.documentKey,t.documentKey),n===0?I(e.largestBatchId,t.largestBatchId):n):n}var Fr=`The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.`,Ir=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}};async function Lr(e){if(e.code!==P.FAILED_PRECONDITION||e.message!==Fr)throw e;A(`LocalStore`,`Unexpectedly lost primary lease`)}var z=class e{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(t,n){return this.callbackAttached&&j(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e(((e,r)=>{this.nextCallback=n=>{this.wrapSuccess(t,n).next(e,r)},this.catchCallback=t=>{this.wrapFailure(n,t).next(e,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(t){try{let n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):e.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):e.reject(n)}static resolve(t){return new e(((e,n)=>{e(t)}))}static reject(t){return new e(((e,n)=>{n(t)}))}static waitFor(t){return new e(((e,n)=>{let r=0,i=0,a=!1;t.forEach((t=>{++r,t.next((()=>{++i,a&&i===r&&e()}),(e=>n(e)))})),a=!0,i===r&&e()}))}static or(t){let n=e.resolve(!1);for(let r of t)n=n.next((t=>t?e.resolve(t):r()));return n}static forEach(e,t){let n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(t,n){return new e(((e,r)=>{let i=t.length,a=Array(i),o=0;for(let s=0;s<i;s++){let c=s;n(t[c]).next((t=>{a[c]=t,++o,o===i&&e(a)}),(e=>r(e)))}}))}static doWhile(t,n){return new e(((e,r)=>{let i=()=>{!0===t()?n().next((()=>{i()}),r):e()};i()}))}};function Rr(e){let t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(`.`).slice(0,2).join(`.`):`-1`;return Number(n)}function zr(e){return e.name===`IndexedDbTransactionError`}var Br=class{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.ue&&this.ue(e),e}};Br.ce=-1;var Vr=-1;function Hr(e){return e==null}function Ur(e){return e===0&&1/e==-1/0}function Wr(e){return typeof e==`number`&&Number.isInteger(e)&&!Ur(e)&&e<=2**53-1&&e>=-(2**53-1)}var Gr=``;function Kr(e){let t=``;for(let n=0;n<e.length;n++)t.length>0&&(t=Jr(t)),t=qr(e.get(n),t);return Jr(t)}function qr(e,t){let n=t,r=e.length;for(let t=0;t<r;t++){let r=e.charAt(t);switch(r){case`\0`:n+=``;break;case Gr:n+=``;break;default:n+=r}}return n}function Jr(e){return e+Gr+``}function Yr(e){let t=0;for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Xr(e,t){for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Zr(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Qr=class e{constructor(e,t){this.comparator=e,this.root=t||ei.EMPTY}insert(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,ei.BLACK,null,null))}remove(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ei.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){let e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(`, `)}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $r(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $r(this.root,e,this.comparator,!1)}getReverseIterator(){return new $r(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $r(this.root,e,this.comparator,!0)}},$r=class{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ei=class e{constructor(t,n,r,i,a){this.key=t,this.value=n,this.color=r??e.RED,this.left=i??e.EMPTY,this.right=a??e.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,a){return new e(t??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this,i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):i===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return e.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){return 2**this.check()<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw j(43730,{key:this.key,value:this.value});if(this.right.isRed())throw j(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw j(27949);return e+(this.isRed()?0:1)}};ei.EMPTY=null,ei.RED=!0,ei.BLACK=!1,ei.EMPTY=new class{constructor(){this.size=0}get key(){throw j(57766)}get value(){throw j(16141)}get color(){throw j(16727)}get left(){throw j(29726)}get right(){throw j(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new ei(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ti=class e{constructor(e){this.comparator=e,this.data=new Qr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){let n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){let r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=t===void 0?this.data.getIterator():this.data.getIteratorFrom(t);n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ni(this.data.getIterator())}getIteratorFrom(e){return new ni(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(t){if(!(t instanceof e)||this.size!==t.size)return!1;let n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){let e=n.getNext().key,t=r.getNext().key;if(this.comparator(e,t)!==0)return!1}return!0}toArray(){let e=[];return this.forEach((t=>{e.push(t)})),e}toString(){let e=[];return this.forEach((t=>e.push(t))),`SortedSet(`+e.toString()+`)`}copy(t){let n=new e(this.comparator);return n.data=t,n}},ni=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}},ri=class e{constructor(e){this.fields=e,e.sort(hr.comparator)}static empty(){return new e([])}unionWith(t){let n=new ti(hr.comparator);for(let e of this.fields)n=n.add(e);for(let e of t)n=n.add(e);return new e(n.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ur(this.fields,e.fields,((e,t)=>e.isEqual(t)))}},ii=class extends Error{constructor(){super(...arguments),this.name=`Base64DecodeError`}},ai=class e{constructor(e){this.binaryString=e}static fromBase64String(t){return new e(function(e){try{return atob(e)}catch(e){throw typeof DOMException<`u`&&e instanceof DOMException?new ii(`Invalid base64 string: `+e):e}}(t))}static fromUint8Array(t){return new e(function(e){let t=``;for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t))}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){let t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return I(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ai.EMPTY_BYTE_STRING=new ai(``);var oi=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function si(e){if(M(!!e,39018),typeof e==`string`){let t=0,n=oi.exec(e);if(M(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+`000000000`).substr(0,9),t=Number(e)}let r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:ci(e.seconds),nanos:ci(e.nanos)}}function ci(e){return typeof e==`number`?e:typeof e==`string`?Number(e):0}function li(e){return typeof e==`string`?ai.fromBase64String(e):ai.fromUint8Array(e)}var ui=`server_timestamp`,di=`__type__`,fi=`__previous_value__`,pi=`__local_write_time__`;function mi(e){return(e?.mapValue?.fields||{})[di]?.stringValue===ui}function hi(e){let t=e.mapValue.fields[fi];return mi(t)?hi(t):t}function gi(e){let t=si(e.mapValue.fields[pi].timestampValue);return new Or(t.seconds,t.nanos)}var _i=class{constructor(e,t,n,r,i,a,o,s,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=s,this.useFetchStreams=c,this.isUsingEmulator=l}},vi=`(default)`,yi=class e{constructor(e,t){this.projectId=e,this.database=t||vi}static empty(){return new e(``,``)}get isDefaultDatabase(){return this.database===vi}isEqual(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}},bi=`__type__`,xi=`__max__`,Si={mapValue:{fields:{__type__:{stringValue:xi}}}},Ci=`__vector__`,wi=`value`;function Ti(e){return`nullValue`in e?0:`booleanValue`in e?1:`integerValue`in e||`doubleValue`in e?2:`timestampValue`in e?3:`stringValue`in e?5:`bytesValue`in e?6:`referenceValue`in e?7:`geoPointValue`in e?8:`arrayValue`in e?9:`mapValue`in e?mi(e)?4:Vi(e)?9007199254740991:zi(e)?10:11:j(28295,{value:e})}function Ei(e,t){if(e===t)return!0;let n=Ti(e);if(n!==Ti(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return gi(e).isEqual(gi(t));case 3:return function(e,t){if(typeof e.timestampValue==`string`&&typeof t.timestampValue==`string`&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;let n=si(e.timestampValue),r=si(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return li(e.bytesValue).isEqual(li(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return ci(e.geoPointValue.latitude)===ci(t.geoPointValue.latitude)&&ci(e.geoPointValue.longitude)===ci(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if(`integerValue`in e&&`integerValue`in t)return ci(e.integerValue)===ci(t.integerValue);if(`doubleValue`in e&&`doubleValue`in t){let n=ci(e.doubleValue),r=ci(t.doubleValue);return n===r?Ur(n)===Ur(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return ur(e.arrayValue.values||[],t.arrayValue.values||[],Ei);case 10:case 11:return function(e,t){let n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Yr(n)!==Yr(r))return!1;for(let e in n)if(n.hasOwnProperty(e)&&(r[e]===void 0||!Ei(n[e],r[e])))return!1;return!0}(e,t);default:return j(52216,{left:e})}}function Di(e,t){return(e.values||[]).find((e=>Ei(e,t)))!==void 0}function Oi(e,t){if(e===t)return 0;let n=Ti(e),r=Ti(t);if(n!==r)return I(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return I(e.booleanValue,t.booleanValue);case 2:return function(e,t){let n=ci(e.integerValue||e.doubleValue),r=ci(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return ki(e.timestampValue,t.timestampValue);case 4:return ki(gi(e),gi(t));case 5:return or(e.stringValue,t.stringValue);case 6:return function(e,t){let n=li(e),r=li(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){let n=e.split(`/`),r=t.split(`/`);for(let e=0;e<n.length&&e<r.length;e++){let t=I(n[e],r[e]);if(t!==0)return t}return I(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){let n=I(ci(e.latitude),ci(t.latitude));return n===0?I(ci(e.longitude),ci(t.longitude)):n}(e.geoPointValue,t.geoPointValue);case 9:return Ai(e.arrayValue,t.arrayValue);case 10:return function(e,t){let n=e.fields||{},r=t.fields||{},i=n[wi]?.arrayValue,a=r[wi]?.arrayValue,o=I(i?.values?.length||0,a?.values?.length||0);return o===0?Ai(i,a):o}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Si.mapValue&&t===Si.mapValue)return 0;if(e===Si.mapValue)return 1;if(t===Si.mapValue)return-1;let n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(let e=0;e<r.length&&e<a.length;++e){let t=or(r[e],a[e]);if(t!==0)return t;let o=Oi(n[r[e]],i[a[e]]);if(o!==0)return o}return I(r.length,a.length)}(e.mapValue,t.mapValue);default:throw j(23264,{he:n})}}function ki(e,t){if(typeof e==`string`&&typeof t==`string`&&e.length===t.length)return I(e,t);let n=si(e),r=si(t),i=I(n.seconds,r.seconds);return i===0?I(n.nanos,r.nanos):i}function Ai(e,t){let n=e.values||[],r=t.values||[];for(let e=0;e<n.length&&e<r.length;++e){let t=Oi(n[e],r[e]);if(t)return t}return I(n.length,r.length)}function ji(e){return Mi(e)}function Mi(e){return`nullValue`in e?`null`:`booleanValue`in e?``+e.booleanValue:`integerValue`in e?``+e.integerValue:`doubleValue`in e?``+e.doubleValue:`timestampValue`in e?function(e){let t=si(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):`stringValue`in e?e.stringValue:`bytesValue`in e?function(e){return li(e).toBase64()}(e.bytesValue):`referenceValue`in e?function(e){return L.fromName(e).toString()}(e.referenceValue):`geoPointValue`in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):`arrayValue`in e?function(e){let t=`[`,n=!0;for(let r of e.values||[])n?n=!1:t+=`,`,t+=Mi(r);return t+`]`}(e.arrayValue):`mapValue`in e?function(e){let t=Object.keys(e.fields||{}).sort(),n=`{`,r=!0;for(let i of t)r?r=!1:n+=`,`,n+=`${i}:${Mi(e.fields[i])}`;return n+`}`}(e.mapValue):j(61005,{value:e})}function Ni(e){switch(Ti(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let t=hi(e);return t?16+Ni(t):16;case 5:return 2*e.stringValue.length;case 6:return li(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce(((e,t)=>e+Ni(t)),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return Xr(e.fields,((e,n)=>{t+=e.length+Ni(n)})),t}(e.mapValue);default:throw j(13486,{value:e})}}function B(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Pi(e){return!!e&&`integerValue`in e}function Fi(e){return!!e&&`arrayValue`in e}function Ii(e){return!!e&&`nullValue`in e}function Li(e){return!!e&&`doubleValue`in e&&isNaN(Number(e.doubleValue))}function Ri(e){return!!e&&`mapValue`in e}function zi(e){return(e?.mapValue?.fields||{})[bi]?.stringValue===Ci}function Bi(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue==`object`)return{timestampValue:{...e.timestampValue}};if(e.mapValue){let t={mapValue:{fields:{}}};return Xr(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Bi(n))),t}if(e.arrayValue){let t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Bi(e.arrayValue.values[n]);return t}return{...e}}function Vi(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===xi}var Hi=class e{constructor(e){this.value=e}static empty(){return new e({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Ri(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bi(t)}setAll(e){let t=hr.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){let e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Bi(e):r.push(i.lastSegment())}));let i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){let t=this.field(e.popLast());Ri(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ei(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Ri(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Xr(t,((t,n)=>e[t]=n));for(let t of n)delete e[t]}clone(){return new e(Bi(this.value))}};function Ui(e){let t=[];return Xr(e.fields,((e,n)=>{let r=new hr([e]);if(Ri(n)){let e=Ui(n.mapValue).fields;if(e.length===0)t.push(r);else for(let n of e)t.push(r.child(n))}else t.push(r)})),new ri(t)}var Wi=class e{constructor(e,t,n,r,i,a,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=a,this.documentState=o}static newInvalidDocument(t){return new e(t,0,R.min(),R.min(),R.min(),Hi.empty(),0)}static newFoundDocument(t,n,r,i){return new e(t,1,n,R.min(),r,i,0)}static newNoDocument(t,n){return new e(t,2,n,R.min(),R.min(),Hi.empty(),0)}static newUnknownDocument(t,n){return new e(t,3,n,R.min(),R.min(),Hi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(R.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Hi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Hi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=R.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}},Gi=class{constructor(e,t){this.position=e,this.inclusive=t}};function Ki(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){let a=t[i],o=e.position[i];if(r=a.field.isKeyField()?L.comparator(L.fromName(o.referenceValue),n.key):Oi(o,n.data.field(a.field)),a.dir===`desc`&&(r*=-1),r!==0)break}return r}function qi(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ei(e.position[n],t.position[n]))return!1;return!0}var Ji=class{constructor(e,t=`asc`){this.field=e,this.dir=t}};function Yi(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var Xi=class{},Zi=class e extends Xi{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(t,n,r){return t.isKeyField()?n===`in`||n===`not-in`?this.createKeyFieldInFilter(t,n,r):new aa(t,n,r):n===`array-contains`?new la(t,r):n===`in`?new ua(t,r):n===`not-in`?new da(t,r):n===`array-contains-any`?new fa(t,r):new e(t,n,r)}static createKeyFieldInFilter(e,t,n){return t===`in`?new oa(e,n):new sa(e,n)}matches(e){let t=e.data.field(this.field);return this.op===`!=`?t!==null&&t.nullValue===void 0&&this.matchesComparison(Oi(t,this.value)):t!==null&&Ti(this.value)===Ti(t)&&this.matchesComparison(Oi(t,this.value))}matchesComparison(e){switch(this.op){case`<`:return e<0;case`<=`:return e<=0;case`==`:return e===0;case`!=`:return e!==0;case`>`:return e>0;case`>=`:return e>=0;default:return j(47266,{operator:this.op})}}isInequality(){return[`<`,`<=`,`>`,`>=`,`!=`,`not-in`].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Qi=class e extends Xi{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(t,n){return new e(t,n)}matches(e){return $i(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function $i(e){return e.op===`and`}function ea(e){return ta(e)&&$i(e)}function ta(e){for(let t of e.filters)if(t instanceof Qi)return!1;return!0}function na(e){if(e instanceof Zi)return e.field.canonicalString()+e.op.toString()+ji(e.value);if(ea(e))return e.filters.map((e=>na(e))).join(`,`);{let t=e.filters.map((e=>na(e))).join(`,`);return`${e.op}(${t})`}}function ra(e,t){return e instanceof Zi?function(e,t){return t instanceof Zi&&e.op===t.op&&e.field.isEqual(t.field)&&Ei(e.value,t.value)}(e,t):e instanceof Qi?function(e,t){return t instanceof Qi&&e.op===t.op&&e.filters.length===t.filters.length?e.filters.reduce(((e,n,r)=>e&&ra(n,t.filters[r])),!0):!1}(e,t):void j(19439)}function ia(e){return e instanceof Zi?function(e){return`${e.field.canonicalString()} ${e.op} ${ji(e.value)}`}(e):e instanceof Qi?function(e){return e.op.toString()+` {`+e.getFilters().map(ia).join(` ,`)+`}`}(e):`Filter`}var aa=class extends Zi{constructor(e,t,n){super(e,t,n),this.key=L.fromName(n.referenceValue)}matches(e){let t=L.comparator(e.key,this.key);return this.matchesComparison(t)}},oa=class extends Zi{constructor(e,t){super(e,`in`,t),this.keys=ca(`in`,t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}},sa=class extends Zi{constructor(e,t){super(e,`not-in`,t),this.keys=ca(`not-in`,t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}};function ca(e,t){return(t.arrayValue?.values||[]).map((e=>L.fromName(e.referenceValue)))}var la=class extends Zi{constructor(e,t){super(e,`array-contains`,t)}matches(e){let t=e.data.field(this.field);return Fi(t)&&Di(t.arrayValue,this.value)}},ua=class extends Zi{constructor(e,t){super(e,`in`,t)}matches(e){let t=e.data.field(this.field);return t!==null&&Di(this.value.arrayValue,t)}},da=class extends Zi{constructor(e,t){super(e,`not-in`,t)}matches(e){if(Di(this.value.arrayValue,{nullValue:`NULL_VALUE`}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Di(this.value.arrayValue,t)}},fa=class extends Zi{constructor(e,t){super(e,`array-contains-any`,t)}matches(e){let t=e.data.field(this.field);return!(!Fi(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Di(this.value.arrayValue,e)))}},pa=class{constructor(e,t=null,n=[],r=[],i=null,a=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=a,this.endAt=o,this.Te=null}};function ma(e,t=null,n=[],r=[],i=null,a=null,o=null){return new pa(e,t,n,r,i,a,o)}function ha(e){let t=N(e);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+=`|cg:`+t.collectionGroup),e+=`|f:`,e+=t.filters.map((e=>na(e))).join(`,`),e+=`|ob:`,e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(`,`),Hr(t.limit)||(e+=`|l:`,e+=t.limit),t.startAt&&(e+=`|lb:`,e+=t.startAt.inclusive?`b:`:`a:`,e+=t.startAt.position.map((e=>ji(e))).join(`,`)),t.endAt&&(e+=`|ub:`,e+=t.endAt.inclusive?`a:`:`b:`,e+=t.endAt.position.map((e=>ji(e))).join(`,`)),t.Te=e}return t.Te}function ga(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Yi(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!ra(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!qi(e.startAt,t.startAt)&&qi(e.endAt,t.endAt)}function _a(e){return L.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}var va=class{constructor(e,t=null,n=[],r=[],i=null,a=`F`,o=null,s=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=a,this.startAt=o,this.endAt=s,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function ya(e,t,n,r,i,a,o,s){return new va(e,t,n,r,i,a,o,s)}function ba(e){return new va(e)}function xa(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function Sa(e){return e.collectionGroup!==null}function Ca(e){let t=N(e);if(t.Ie===null){t.Ie=[];let e=new Set;for(let n of t.explicitOrderBy)t.Ie.push(n),e.add(n.field.canonicalString());let n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:`asc`;(function(e){let t=new ti(hr.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t})(t).forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new Ji(r,n))})),e.has(hr.keyField().canonicalString())||t.Ie.push(new Ji(hr.keyField(),n))}return t.Ie}function wa(e){let t=N(e);return t.Ee||=Ta(t,Ca(e)),t.Ee}function Ta(e,t){if(e.limitType===`F`)return ma(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{let t=e.dir===`desc`?`asc`:`desc`;return new Ji(e.field,t)}));let n=e.endAt?new Gi(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Gi(e.startAt.position,e.startAt.inclusive):null;return ma(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Ea(e,t){let n=e.filters.concat([t]);return new va(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Da(e,t,n){return new va(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Oa(e,t){return ga(wa(e),wa(t))&&e.limitType===t.limitType}function ka(e){return`${ha(wa(e))}|lt:${e.limitType}`}function Aa(e){return`Query(target=${function(e){let t=e.path.canonicalString();return e.collectionGroup!==null&&(t+=` collectionGroup=`+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>ia(e))).join(`, `)}]`),Hr(e.limit)||(t+=`, limit: `+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(`, `)}]`),e.startAt&&(t+=`, startAt: `,t+=e.startAt.inclusive?`b:`:`a:`,t+=e.startAt.position.map((e=>ji(e))).join(`,`)),e.endAt&&(t+=`, endAt: `,t+=e.endAt.inclusive?`a:`:`b:`,t+=e.endAt.position.map((e=>ji(e))).join(`,`)),`Target(${t})`}(wa(e))}; limitType=${e.limitType})`}function ja(e,t){return t.isFoundDocument()&&function(e,t){let n=t.key.path;return e.collectionGroup===null?L.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n):t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n)}(e,t)&&function(e,t){for(let n of Ca(e))if(!n.field.isKeyField()&&t.data.field(n.field)===null)return!1;return!0}(e,t)&&function(e,t){for(let n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){let r=Ki(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Ca(e),t)||e.endAt&&!function(e,t,n){let r=Ki(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Ca(e),t))}(e,t)}function Ma(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Na(e){return(t,n)=>{let r=!1;for(let i of Ca(e)){let e=Pa(i,t,n);if(e!==0)return e;r||=i.field.isKeyField()}return 0}}function Pa(e,t,n){let r=e.field.isKeyField()?L.comparator(t.key,n.key):function(e,t,n){let r=t.data.field(e),i=n.data.field(e);return r!==null&&i!==null?Oi(r,i):j(42886)}(e.field,t,n);switch(e.dir){case`asc`:return r;case`desc`:return-1*r;default:return j(19790,{direction:e.dir})}}var Fa=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(let[t,r]of n)if(this.equalsFn(t,e))return r}}has(e){return this.get(e)!==void 0}set(e,t){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return n.length===1?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Xr(this.inner,((t,n)=>{for(let[t,r]of n)e(t,r)}))}isEmpty(){return Zr(this.inner)}size(){return this.innerSize}},Ia=new Qr(L.comparator);function La(){return Ia}var Ra=new Qr(L.comparator);function za(...e){let t=Ra;for(let n of e)t=t.insert(n.key,n);return t}function Ba(e){let t=Ra;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Va(){return Ua()}function Ha(){return Ua()}function Ua(){return new Fa((e=>e.toString()),((e,t)=>e.isEqual(t)))}var Wa=new Qr(L.comparator),Ga=new ti(L.comparator);function V(...e){let t=Ga;for(let n of e)t=t.add(n);return t}var Ka=new ti(I);function qa(){return Ka}function Ja(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:`NaN`};if(t===1/0)return{doubleValue:`Infinity`};if(t===-1/0)return{doubleValue:`-Infinity`}}return{doubleValue:Ur(t)?`-0`:t}}function Ya(e){return{integerValue:``+e}}function Xa(e,t){return Wr(t)?Ya(t):Ja(e,t)}var Za=class{constructor(){this._=void 0}};function Qa(e,t,n){return e instanceof to?function(e,t){let n={fields:{[di]:{stringValue:ui},[pi]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&mi(t)&&(t=hi(t)),t&&(n.fields[fi]=t),{mapValue:n}}(n,t):e instanceof no?ro(e,t):e instanceof io?ao(e,t):function(e,t){let n=eo(e,t),r=so(n)+so(e.Ae);return Pi(n)&&Pi(e.Ae)?Ya(r):Ja(e.serializer,r)}(e,t)}function $a(e,t,n){return e instanceof no?ro(e,t):e instanceof io?ao(e,t):n}function eo(e,t){return e instanceof oo?function(e){return Pi(e)||function(e){return!!e&&`doubleValue`in e}(e)}(t)?t:{integerValue:0}:null}var to=class extends Za{},no=class extends Za{constructor(e){super(),this.elements=e}};function ro(e,t){let n=co(t);for(let t of e.elements)n.some((e=>Ei(e,t)))||n.push(t);return{arrayValue:{values:n}}}var io=class extends Za{constructor(e){super(),this.elements=e}};function ao(e,t){let n=co(t);for(let t of e.elements)n=n.filter((e=>!Ei(e,t)));return{arrayValue:{values:n}}}var oo=class extends Za{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function so(e){return ci(e.integerValue||e.doubleValue)}function co(e){return Fi(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var lo=class{constructor(e,t){this.field=e,this.transform=t}};function uo(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof no&&t instanceof no||e instanceof io&&t instanceof io?ur(e.elements,t.elements,Ei):e instanceof oo&&t instanceof oo?Ei(e.Ae,t.Ae):e instanceof to&&t instanceof to}(e.transform,t.transform)}var H=class{constructor(e,t){this.version=e,this.transformResults=t}},U=class e{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new e}static exists(t){return new e(void 0,t)}static updateTime(t){return new e(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function fo(e,t){return e.updateTime===void 0?e.exists===void 0||e.exists===t.isFoundDocument():t.isFoundDocument()&&t.version.isEqual(e.updateTime)}var po=class{};function mo(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new wo(e.key,U.none()):new yo(e.key,e.data,U.none());{let n=e.data,r=Hi.empty(),i=new ti(hr.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);t===null&&e.length>1&&(e=e.popLast(),t=n.field(e)),t===null?r.delete(e):r.set(e,t),i=i.add(e)}return new bo(e.key,r,new ri(i.toArray()),U.none())}}function ho(e,t,n){e instanceof yo?function(e,t,n){let r=e.value.clone(),i=So(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof bo?function(e,t,n){if(!fo(e.precondition,t))return void t.convertToUnknownDocument(n.version);let r=So(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(xo(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function go(e,t,n,r){return e instanceof yo?function(e,t,n,r){if(!fo(e.precondition,t))return n;let i=e.value.clone(),a=Co(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof bo?function(e,t,n,r){if(!fo(e.precondition,t))return n;let i=Co(e.fieldTransforms,r,t),a=t.data;return a.setAll(xo(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),n===null?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return fo(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function _o(e,t){let n=null;for(let r of e.fieldTransforms){let e=t.data.field(r.field),i=eo(r.transform,e||null);i!=null&&(n===null&&(n=Hi.empty()),n.set(r.field,i))}return n||null}function vo(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return e===void 0&&t===void 0||!(!e||!t)&&ur(e,t,((e,t)=>uo(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var yo=class extends po{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},bo=class extends po{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}};function xo(e){let t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){let r=e.data.field(n);t.set(n,r)}})),t}function So(e,t,n){let r=new Map;M(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let i=0;i<n.length;i++){let a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,$a(o,s,n[i]))}return r}function Co(e,t,n){let r=new Map;for(let i of e){let e=i.transform,a=n.data.field(i.field);r.set(i.field,Qa(e,a,t))}return r}var wo=class extends po{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},To=class extends po{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}},Eo=class{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){let n=t.mutationResults;for(let t=0;t<this.mutations.length;t++){let r=this.mutations[t];r.key.isEqual(e.key)&&ho(r,e,n[t])}}applyToLocalView(e,t){for(let n of this.baseMutations)n.key.isEqual(e.key)&&(t=go(n,e,t,this.localWriteTime));for(let n of this.mutations)n.key.isEqual(e.key)&&(t=go(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let n=Ha();return this.mutations.forEach((r=>{let i=e.get(r.key),a=i.overlayedDocument,o=this.applyToLocalView(a,i.mutatedFields);o=t.has(r.key)?null:o;let s=mo(a,o);s!==null&&n.set(r.key,s),a.isValidDocument()||a.convertToNoDocument(R.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),V())}isEqual(e){return this.batchId===e.batchId&&ur(this.mutations,e.mutations,((e,t)=>vo(e,t)))&&ur(this.baseMutations,e.baseMutations,((e,t)=>vo(e,t)))}},Do=class e{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(t,n,r){M(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let i=function(){return Wa}(),a=t.mutations;for(let e=0;e<a.length;e++)i=i.insert(a[e].key,r[e].version);return new e(t,n,r,i)}},Oo=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}},ko=class{constructor(e,t){this.count=e,this.unchangedNames=t}},W,G;function Ao(e){switch(e){case P.OK:return j(64938);case P.CANCELLED:case P.UNKNOWN:case P.DEADLINE_EXCEEDED:case P.RESOURCE_EXHAUSTED:case P.INTERNAL:case P.UNAVAILABLE:case P.UNAUTHENTICATED:return!1;case P.INVALID_ARGUMENT:case P.NOT_FOUND:case P.ALREADY_EXISTS:case P.PERMISSION_DENIED:case P.FAILED_PRECONDITION:case P.ABORTED:case P.OUT_OF_RANGE:case P.UNIMPLEMENTED:case P.DATA_LOSS:return!0;default:return j(15467,{code:e})}}function jo(e){if(e===void 0)return Gn(`GRPC error has no .code`),P.UNKNOWN;switch(e){case W.OK:return P.OK;case W.CANCELLED:return P.CANCELLED;case W.UNKNOWN:return P.UNKNOWN;case W.DEADLINE_EXCEEDED:return P.DEADLINE_EXCEEDED;case W.RESOURCE_EXHAUSTED:return P.RESOURCE_EXHAUSTED;case W.INTERNAL:return P.INTERNAL;case W.UNAVAILABLE:return P.UNAVAILABLE;case W.UNAUTHENTICATED:return P.UNAUTHENTICATED;case W.INVALID_ARGUMENT:return P.INVALID_ARGUMENT;case W.NOT_FOUND:return P.NOT_FOUND;case W.ALREADY_EXISTS:return P.ALREADY_EXISTS;case W.PERMISSION_DENIED:return P.PERMISSION_DENIED;case W.FAILED_PRECONDITION:return P.FAILED_PRECONDITION;case W.ABORTED:return P.ABORTED;case W.OUT_OF_RANGE:return P.OUT_OF_RANGE;case W.UNIMPLEMENTED:return P.UNIMPLEMENTED;case W.DATA_LOSS:return P.DATA_LOSS;default:return j(39323,{code:e})}}(G=W||={})[G.OK=0]=`OK`,G[G.CANCELLED=1]=`CANCELLED`,G[G.UNKNOWN=2]=`UNKNOWN`,G[G.INVALID_ARGUMENT=3]=`INVALID_ARGUMENT`,G[G.DEADLINE_EXCEEDED=4]=`DEADLINE_EXCEEDED`,G[G.NOT_FOUND=5]=`NOT_FOUND`,G[G.ALREADY_EXISTS=6]=`ALREADY_EXISTS`,G[G.PERMISSION_DENIED=7]=`PERMISSION_DENIED`,G[G.UNAUTHENTICATED=16]=`UNAUTHENTICATED`,G[G.RESOURCE_EXHAUSTED=8]=`RESOURCE_EXHAUSTED`,G[G.FAILED_PRECONDITION=9]=`FAILED_PRECONDITION`,G[G.ABORTED=10]=`ABORTED`,G[G.OUT_OF_RANGE=11]=`OUT_OF_RANGE`,G[G.UNIMPLEMENTED=12]=`UNIMPLEMENTED`,G[G.INTERNAL=13]=`INTERNAL`,G[G.UNAVAILABLE=14]=`UNAVAILABLE`,G[G.DATA_LOSS=15]=`DATA_LOSS`;var Mo=null;function No(){return new TextEncoder}var Po=new Dn([4294967295,4294967295],0);function Fo(e){let t=No().encode(e),n=new On;return n.update(t),new Uint8Array(n.digest())}function Io(e){let t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new Dn([n,r],0),new Dn([i,a],0)]}var Lo=class e{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Ro(`Invalid padding: ${t}`);if(n<0||e.length>0&&this.hashCount===0)throw new Ro(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new Ro(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Dn.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(Dn.fromNumber(n)));return r.compare(Po)===1&&(r=new Dn([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let[t,n]=Io(Fo(e));for(let e=0;e<this.hashCount;e++){let r=this.ye(t,n,e);if(!this.we(r))return!1}return!0}static create(t,n,r){let i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((e=>a.insert(e))),a}insert(e){if(this.ge===0)return;let[t,n]=Io(Fo(e));for(let e=0;e<this.hashCount;e++){let r=this.ye(t,n,e);this.Se(r)}}Se(e){let t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}},Ro=class extends Error{constructor(){super(...arguments),this.name=`BloomFilterError`}},zo=class e{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,n,r){let i=new Map;return i.set(t,Bo.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(R.min(),i,new Qr(I),La(),V())}},Bo=class e{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new e(r,n,V(),V(),V())}},Vo=class{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}},Ho=class{constructor(e,t){this.targetId=e,this.Ce=t}},Uo=class{constructor(e,t,n=ai.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}},Wo=class{constructor(){this.ve=0,this.Fe=qo(),this.Me=ai.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=V(),t=V(),n=V();return this.Fe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:j(38017,{changeType:i})}})),new Bo(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=qo()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){--this.ve,M(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},Go=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=La(),this.Je=Ko(),this.He=Ko(),this.Ye=new Qr(I)}Ze(e){for(let t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{let n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:j(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((e,n)=>{this.rt(n)&&t(n)}))}st(e){let t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){let i=r.target;if(_a(i))if(n===0){let e=new L(i.path);this.et(t,e,Wi.newNoDocument(e,R.min()))}else M(n===1,20013,{expectedCount:n});else{let r=this._t(t);if(r!==n){let n=this.ut(e),i=n?this.ct(n,e,r):1;if(i!==0){this.it(t);let e=i===2?`TargetPurposeExistenceFilterMismatchBloom`:`TargetPurposeExistenceFilterMismatch`;this.Ye=this.Ye.insert(t,e)}Mo?.lt(function(e,t,n,r,i){let a={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},o=t.unchangedNames;return o&&(a.bloomFilter={applied:i===0,hashCount:o?.hashCount??0,bitmapLength:o?.bits?.bitmap?.length??0,padding:o?.bits?.padding??0,mightContain:e=>r?.mightContain(e)??!1}),a}(r,e.Ce,this.Ge.ht(),n,i))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:n=``,padding:r=0},hashCount:i=0}=t,a,o;try{a=li(n).toUint8Array()}catch(e){if(e instanceof ii)return Kn(`Decoding the base64 bloom filter in existence filter failed (`+e.message+`); ignoring the bloom filter and falling back to full re-query.`),null;throw e}try{o=new Lo(a,r,i)}catch(e){return Kn(e instanceof Ro?`BloomFilter error: `:`Applying bloom filter failed: `,e),null}return o.ge===0?null:o}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){let n=this.Ge.getRemoteKeysForTarget(t),r=0;return n.forEach((n=>{let i=this.Ge.ht(),a=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(a)||(this.et(t,n,null),r++)})),r}Tt(e){let t=new Map;this.ze.forEach(((n,r)=>{let i=this.ot(r);if(i){if(n.current&&_a(i.target)){let t=new L(i.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,Wi.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}}));let n=V();this.He.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{let t=this.ot(e);return!t||t.purpose===`TargetPurposeLimboResolution`||(r=!1,!1)})),r&&(n=n.add(e))})),this.je.forEach(((t,n)=>n.setReadTime(e)));let r=new zo(e,t,this.Ye,this.je,n);return this.je=La(),this.Je=Ko(),this.He=Ko(),this.Ye=new Qr(I),r}Xe(e,t){if(!this.rt(e))return;let n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;let r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Wo,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new ti(I),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new ti(I),this.Je=this.Je.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||A(`WatchChangeAggregator`,`Detected inactive target`,e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Wo),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function Ko(){return new Qr(L.comparator)}function qo(){return new Qr(L.comparator)}var Jo=(()=>({asc:`ASCENDING`,desc:`DESCENDING`}))(),Yo=(()=>({"<":`LESS_THAN`,"<=":`LESS_THAN_OR_EQUAL`,">":`GREATER_THAN`,">=":`GREATER_THAN_OR_EQUAL`,"==":`EQUAL`,"!=":`NOT_EQUAL`,"array-contains":`ARRAY_CONTAINS`,in:`IN`,"not-in":`NOT_IN`,"array-contains-any":`ARRAY_CONTAINS_ANY`}))(),Xo=(()=>({and:`AND`,or:`OR`}))(),Zo=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Qo(e,t){return e.useProto3Json||Hr(t)?t:{value:t}}function $o(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,``).replace(`Z`,``)}.${(`000000000`+t.nanoseconds).slice(-9)}Z`:{seconds:``+t.seconds,nanos:t.nanoseconds}}function es(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function ts(e,t){return $o(e,t.toTimestamp())}function ns(e){return M(!!e,49232),R.fromTimestamp(function(e){let t=si(e);return new Or(t.seconds,t.nanos)}(e))}function rs(e,t){return is(e,t).canonicalString()}function is(e,t){let n=function(e){return new pr([`projects`,e.projectId,`databases`,e.database])}(e).child(`documents`);return t===void 0?n:n.child(t)}function as(e){let t=pr.fromString(e);return M(ks(t),10190,{key:t.toString()}),t}function os(e,t){return rs(e.databaseId,t.path)}function ss(e,t){let n=as(t);if(n.get(1)!==e.databaseId.projectId)throw new F(P.INVALID_ARGUMENT,`Tried to deserialize key from different project: `+n.get(1)+` vs `+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new F(P.INVALID_ARGUMENT,`Tried to deserialize key from different database: `+n.get(3)+` vs `+e.databaseId.database);return new L(ds(n))}function cs(e,t){return rs(e.databaseId,t)}function ls(e){let t=as(e);return t.length===4?pr.emptyPath():ds(t)}function us(e){return new pr([`projects`,e.databaseId.projectId,`databases`,e.databaseId.database]).canonicalString()}function ds(e){return M(e.length>4&&e.get(4)===`documents`,29091,{key:e.toString()}),e.popFirst(5)}function fs(e,t,n){return{name:os(e,t),fields:n.value.mapValue.fields}}function ps(e,t){return`found`in t?function(e,t){M(!!t.found,43571),t.found.name,t.found.updateTime;let n=ss(e,t.found.name),r=ns(t.found.updateTime),i=t.found.createTime?ns(t.found.createTime):R.min(),a=new Hi({mapValue:{fields:t.found.fields}});return Wi.newFoundDocument(n,r,i,a)}(e,t):`missing`in t?function(e,t){M(!!t.missing,3894),M(!!t.readTime,22933);let n=ss(e,t.missing),r=ns(t.readTime);return Wi.newNoDocument(n,r)}(e,t):j(7234,{result:t})}function ms(e,t){let n;if(`targetChange`in t){t.targetChange;let r=function(e){return e===`NO_CHANGE`?0:e===`ADD`?1:e===`REMOVE`?2:e===`CURRENT`?3:e===`RESET`?4:j(39313,{state:e})}(t.targetChange.targetChangeType||`NO_CHANGE`),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(M(t===void 0||typeof t==`string`,58123),ai.fromBase64String(t||``)):(M(t===void 0||t instanceof Buffer||t instanceof Uint8Array,16193),ai.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause;n=new Uo(r,i,a,o&&function(e){return new F(e.code===void 0?P.UNKNOWN:jo(e.code),e.message||``)}(o)||null)}else if(`documentChange`in t){t.documentChange;let r=t.documentChange;r.document,r.document.name,r.document.updateTime;let i=ss(e,r.document.name),a=ns(r.document.updateTime),o=r.document.createTime?ns(r.document.createTime):R.min(),s=new Hi({mapValue:{fields:r.document.fields}}),c=Wi.newFoundDocument(i,a,o,s);n=new Vo(r.targetIds||[],r.removedTargetIds||[],c.key,c)}else if(`documentDelete`in t){t.documentDelete;let r=t.documentDelete;r.document;let i=ss(e,r.document),a=r.readTime?ns(r.readTime):R.min(),o=Wi.newNoDocument(i,a);n=new Vo([],r.removedTargetIds||[],o.key,o)}else if(`documentRemove`in t){t.documentRemove;let r=t.documentRemove;r.document;let i=ss(e,r.document);n=new Vo([],r.removedTargetIds||[],i,null)}else{if(!(`filter`in t))return j(11601,{Rt:t});{t.filter;let e=t.filter;e.targetId;let{count:r=0,unchangedNames:i}=e,a=new ko(r,i),o=e.targetId;n=new Ho(o,a)}}return n}function hs(e,t){let n;if(t instanceof yo)n={update:fs(e,t.key,t.value)};else if(t instanceof wo)n={delete:os(e,t.key)};else if(t instanceof bo)n={update:fs(e,t.key,t.data),updateMask:Os(t.fieldMask)};else{if(!(t instanceof To))return j(16599,{Vt:t.type});n={verify:os(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){let n=t.transform;if(n instanceof to)return{fieldPath:t.field.canonicalString(),setToServerValue:`REQUEST_TIME`};if(n instanceof no)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof io)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof oo)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw j(20930,{transform:t.transform})}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return t.updateTime===void 0?t.exists===void 0?j(27497):{exists:t.exists}:{updateTime:ts(e,t.updateTime)}}(e,t.precondition)),n}function gs(e,t){return e&&e.length>0?(M(t!==void 0,14353),e.map((e=>function(e,t){let n=e.updateTime?ns(e.updateTime):ns(t);return n.isEqual(R.min())&&(n=ns(t)),new H(n,e.transformResults||[])}(e,t)))):[]}function _s(e,t){return{documents:[cs(e,t.path)]}}function vs(e,t){let n={structuredQuery:{}},r=t.path,i;t.collectionGroup===null?(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]):(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]),n.parent=cs(e,i);let a=function(e){if(e.length!==0)return Ds(Qi.create(e,`and`))}(t.filters);a&&(n.structuredQuery.where=a);let o=function(e){if(e.length!==0)return e.map((e=>function(e){return{field:Ts(e.field),direction:Ss(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);let s=Qo(e,t.limit);return s!==null&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:i}}function ys(e){let t=ls(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){M(r===1,65062);let e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let a=[];n.where&&(a=function(e){let t=xs(e);return t instanceof Qi&&ea(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new Ji(Es(e.field),function(e){switch(e){case`ASCENDING`:return`asc`;case`DESCENDING`:return`desc`;default:return}}(e.direction))}(e)))}(n.orderBy));let s=null;n.limit&&(s=function(e){let t;return t=typeof e==`object`?e.value:e,Hr(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){let t=!!e.before;return new Gi(e.values||[],t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){let t=!e.before;return new Gi(e.values||[],t)}(n.endAt)),ya(t,i,o,a,s,`F`,c,l)}function bs(e,t){let n=function(e){switch(e){case`TargetPurposeListen`:return null;case`TargetPurposeExistenceFilterMismatch`:return`existence-filter-mismatch`;case`TargetPurposeExistenceFilterMismatchBloom`:return`existence-filter-mismatch-bloom`;case`TargetPurposeLimboResolution`:return`limbo-document`;default:return j(28987,{purpose:e})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function xs(e){return e.unaryFilter===void 0?e.fieldFilter===void 0?e.compositeFilter===void 0?j(30097,{filter:e}):function(e){return Qi.create(e.compositeFilter.filters.map((e=>xs(e))),function(e){switch(e){case`AND`:return`and`;case`OR`:return`or`;default:return j(1026)}}(e.compositeFilter.op))}(e):function(e){return Zi.create(Es(e.fieldFilter.field),function(e){switch(e){case`EQUAL`:return`==`;case`NOT_EQUAL`:return`!=`;case`GREATER_THAN`:return`>`;case`GREATER_THAN_OR_EQUAL`:return`>=`;case`LESS_THAN`:return`<`;case`LESS_THAN_OR_EQUAL`:return`<=`;case`ARRAY_CONTAINS`:return`array-contains`;case`IN`:return`in`;case`NOT_IN`:return`not-in`;case`ARRAY_CONTAINS_ANY`:return`array-contains-any`;case`OPERATOR_UNSPECIFIED`:return j(58110);default:return j(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):function(e){switch(e.unaryFilter.op){case`IS_NAN`:let t=Es(e.unaryFilter.field);return Zi.create(t,`==`,{doubleValue:NaN});case`IS_NULL`:let n=Es(e.unaryFilter.field);return Zi.create(n,`==`,{nullValue:`NULL_VALUE`});case`IS_NOT_NAN`:let r=Es(e.unaryFilter.field);return Zi.create(r,`!=`,{doubleValue:NaN});case`IS_NOT_NULL`:let i=Es(e.unaryFilter.field);return Zi.create(i,`!=`,{nullValue:`NULL_VALUE`});case`OPERATOR_UNSPECIFIED`:return j(61313);default:return j(60726)}}(e)}function Ss(e){return Jo[e]}function Cs(e){return Yo[e]}function ws(e){return Xo[e]}function Ts(e){return{fieldPath:e.canonicalString()}}function Es(e){return hr.fromServerFormat(e.fieldPath)}function Ds(e){return e instanceof Zi?function(e){if(e.op===`==`){if(Li(e.value))return{unaryFilter:{field:Ts(e.field),op:`IS_NAN`}};if(Ii(e.value))return{unaryFilter:{field:Ts(e.field),op:`IS_NULL`}}}else if(e.op===`!=`){if(Li(e.value))return{unaryFilter:{field:Ts(e.field),op:`IS_NOT_NAN`}};if(Ii(e.value))return{unaryFilter:{field:Ts(e.field),op:`IS_NOT_NULL`}}}return{fieldFilter:{field:Ts(e.field),op:Cs(e.op),value:e.value}}}(e):e instanceof Qi?function(e){let t=e.getFilters().map((e=>Ds(e)));return t.length===1?t[0]:{compositeFilter:{op:ws(e.op),filters:t}}}(e):j(54877,{filter:e})}function Os(e){let t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function ks(e){return e.length>=4&&e.get(0)===`projects`&&e.get(2)===`databases`}var As=class e{constructor(e,t,n,r,i=R.min(),a=R.min(),o=ai.EMPTY_BYTE_STRING,s=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=s}withSequenceNumber(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}},js=class{constructor(e){this.yt=e}};function Ms(e){let t=ys({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType===`LAST`?Da(t,t.limit,`L`):t}var Ns=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if(`nullValue`in e)this.Ft(t,5);else if(`booleanValue`in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if(`integerValue`in e)this.Ft(t,15),t.Mt(ci(e.integerValue));else if(`doubleValue`in e){let n=ci(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),Ur(n)?t.Mt(0):t.Mt(n))}else if(`timestampValue`in e){let n=e.timestampValue;this.Ft(t,20),typeof n==`string`&&(n=si(n)),t.xt(`${n.seconds||``}`),t.Mt(n.nanos||0)}else if(`stringValue`in e)this.Ot(e.stringValue,t),this.Nt(t);else if(`bytesValue`in e)this.Ft(t,30),t.Bt(li(e.bytesValue)),this.Nt(t);else if(`referenceValue`in e)this.Lt(e.referenceValue,t);else if(`geoPointValue`in e){let n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else `mapValue`in e?Vi(e)?this.Ft(t,2**53-1):zi(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):`arrayValue`in e?(this.Qt(e.arrayValue,t),this.Nt(t)):j(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let n=e.fields||{};this.Ft(t,55);for(let e of Object.keys(n))this.Ot(e,t),this.Ct(n[e],t)}kt(e,t){let n=e.fields||{};this.Ft(t,53);let r=wi,i=n[r].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(ci(i)),this.Ot(r,t),this.Ct(n[r],t)}Qt(e,t){let n=e.values||[];this.Ft(t,50);for(let e of n)this.Ct(e,t)}Lt(e,t){this.Ft(t,37),L.fromName(e).path.forEach((e=>{this.Ft(t,60),this.Ut(e,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};Ns.Kt=new Ns;var Ps=class{constructor(){this.Cn=new Fs}addToCollectionParentIndex(e,t){return this.Cn.add(t),z.resolve()}getCollectionParents(e,t){return z.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return z.resolve()}deleteFieldIndex(e,t){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,t){return z.resolve()}getDocumentsMatchingTarget(e,t){return z.resolve(null)}getIndexType(e,t){return z.resolve(0)}getFieldIndexes(e,t){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,t){return z.resolve(Nr.min())}getMinOffsetFromCollectionGroup(e,t){return z.resolve(Nr.min())}updateCollectionGroup(e,t,n){return z.resolve()}updateIndexEntries(e,t){return z.resolve()}},Fs=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new ti(pr.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){let t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new ti(pr.comparator)).toArray()}};new Uint8Array;var Is={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ls=41943040,Rs=class e{static withCacheSize(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}};Rs.DEFAULT_COLLECTION_PERCENTILE=10,Rs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rs.DEFAULT=new Rs(Ls,Rs.DEFAULT_COLLECTION_PERCENTILE,Rs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rs.DISABLED=new Rs(-1,0,0);var zs=class e{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new e(0)}static cr(){return new e(-1)}},Bs=`LruGarbageCollector`,Vs=1048576;function Hs([e,t],[n,r]){let i=I(e,n);return i===0?I(t,r):i}var Us=class{constructor(e){this.Ir=e,this.buffer=new ti(Hs),this.Er=0}dr(){return++this.Er}Ar(e){let t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{let e=this.buffer.last();Hs(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}},Ws=class{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&=(this.Rr.cancel(),null)}get started(){return this.Rr!==null}Vr(e){A(Bs,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay(`lru_garbage_collection`,e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){zr(e)?A(Bs,`Ignoring IndexedDB error during garbage collection: `,e):await Lr(e)}await this.Vr(3e5)}))}},Gs=class{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(t===0)return z.resolve(Br.ce);let n=new Us(t);return this.mr.forEachTarget(e,(e=>n.Ar(e.sequenceNumber))).next((()=>this.mr.pr(e,(e=>n.Ar(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(A(`LruGarbageCollector`,`Garbage collection skipped; disabled`),z.resolve(Is)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(A(`LruGarbageCollector`,`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Is):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,i,a,o,s,c,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(A(`LruGarbageCollector`,`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,s=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(c=Date.now(),Wn()<=O.DEBUG&&A(`LruGarbageCollector`,`LRU Garbage Collection\n\tCounted targets in ${a-l}ms\n\tDetermined least recently used ${r} in `+(o-a)+`ms
\tRemoved ${i} targets in `+(s-o)+`ms
\tRemoved ${e} documents in `+(c-s)+`ms
Total Duration: ${c-l}ms`),z.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}};function Ks(e,t){return new Gs(e,t)}var qs=class{constructor(){this.changes=new Fa((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Wi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let n=this.changes.get(t);return n===void 0?this.getFromCache(e,t):z.resolve(n)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}},Js=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}},Ys=class{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(n!==null&&go(n.mutation,e,ri.empty(),Or.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,V()).next((()=>t))))}getLocalViewOfDocuments(e,t,n=V()){let r=Va();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=za();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){let n=Va();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,V())))}populateOverlays(e,t,n){let r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=La(),a=Ua(),o=function(){return Ua()}();return t.forEach(((e,t)=>{let o=n.get(t.key);r.has(t.key)&&(o===void 0||o.mutation instanceof bo)?i=i.insert(t.key,t):o===void 0?a.set(t.key,ri.empty()):(a.set(t.key,o.mutation.getFieldMask()),go(o.mutation,t,o.mutation.getFieldMask(),Or.now()))})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>a.set(e,t))),t.forEach(((e,t)=>o.set(e,new Js(t,a.get(e)??null)))),o)))}recalculateAndSaveOverlays(e,t){let n=Ua(),r=new Qr(((e,t)=>e-t)),i=V();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(let i of e)i.keys().forEach((e=>{let a=t.get(e);if(a===null)return;let o=n.get(e)||ri.empty();o=i.applyToLocalView(a,o),n.set(e,o);let s=(r.get(i.batchId)||V()).add(e);r=r.insert(i.batchId,s)}))})).next((()=>{let a=[],o=r.getReverseIterator();for(;o.hasNext();){let r=o.getNext(),s=r.key,c=r.value,l=Ha();c.forEach((e=>{if(!i.has(e)){let r=mo(t.get(e),n.get(e));r!==null&&l.set(e,r),i=i.add(e)}})),a.push(this.documentOverlayCache.saveOverlays(e,s,l))}return z.waitFor(a)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return L.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Sa(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{let a=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):z.resolve(Va()),o=kr,s=i;return a.next((t=>z.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?z.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{s=s.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,s,t,V()))).next((e=>({batchId:o,changes:Ba(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new L(t)).next((e=>{let t=za();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){let i=t.collectionGroup,a=za();return this.indexManager.getCollectionParents(e,i).next((o=>z.forEach(o,(o=>{let s=function(e,t){return new va(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,s,n,r).next((e=>{e.forEach(((e,t)=>{a=a.insert(e,t)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{let r=n.getKey();e.get(r)===null&&(e=e.insert(r,Wi.newInvalidDocument(r)))}));let n=za();return e.forEach(((e,r)=>{let a=i.get(e);a!==void 0&&go(a.mutation,r,ri.empty(),Or.now()),ja(t,r)&&(n=n.insert(e,r))})),n}))}},Xs=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return z.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:ns(e.createTime)}}(t)),z.resolve()}getNamedQuery(e,t){return z.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:Ms(e.bundledQuery),readTime:ns(e.readTime)}}(t)),z.resolve()}},Zs=class{constructor(){this.overlays=new Qr(L.comparator),this.qr=new Map}getOverlay(e,t){return z.resolve(this.overlays.get(t))}getOverlays(e,t){let n=Va();return z.forEach(t,(t=>this.getOverlay(e,t).next((e=>{e!==null&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.St(e,t,r)})),z.resolve()}removeOverlaysForBatchId(e,t,n){let r=this.qr.get(n);return r!==void 0&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.qr.delete(n)),z.resolve()}getOverlaysForCollection(e,t,n){let r=Va(),i=t.length+1,a=new L(t.child(``)),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){let e=o.getNext().value,a=e.getKey();if(!t.isPrefixOf(a.path))break;a.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return z.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Qr(((e,t)=>e-t)),a=this.overlays.getIterator();for(;a.hasNext();){let e=a.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);t===null&&(t=Va(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}let o=Va(),s=i.getIterator();for(;s.hasNext()&&(s.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return z.resolve(o)}St(e,t,n){let r=this.overlays.get(n.key);if(r!==null){let e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Oo(t,n));let i=this.qr.get(t);i===void 0&&(i=V(),this.qr.set(t,i)),this.qr.set(t,i.add(n.key))}},Qs=class{constructor(){this.sessionToken=ai.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,z.resolve()}},$s=class{constructor(){this.Qr=new ti(ec.$r),this.Ur=new ti(ec.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let n=new ec(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Gr(new ec(e,t))}zr(e,t){e.forEach((e=>this.removeReference(e,t)))}jr(e){let t=new L(new pr([])),n=new ec(t,e),r=new ec(t,e+1),i=[];return this.Ur.forEachInRange([n,r],(e=>{this.Gr(e),i.push(e.key)})),i}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new L(new pr([])),n=new ec(t,e),r=new ec(t,e+1),i=V();return this.Ur.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){let t=new ec(e,0),n=this.Qr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}},ec=class{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return L.comparator(e.key,t.key)||I(e.Yr,t.Yr)}static Kr(e,t){return I(e.Yr,t.Yr)||L.comparator(e.key,t.key)}},tc=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new ti(ec.$r)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,r){let i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new Eo(i,t,n,r);this.mutationQueue.push(a);for(let t of r)this.Zr=this.Zr.add(new ec(t.key,i)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return z.resolve(a)}lookupMutationBatch(e,t){return z.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let n=t+1,r=this.ei(n),i=r<0?0:r;return z.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?Vr:this.tr-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let n=new ec(t,0),r=new ec(t,1/0),i=[];return this.Zr.forEachInRange([n,r],(e=>{let t=this.Xr(e.Yr);i.push(t)})),z.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new ti(I);return t.forEach((e=>{let t=new ec(e,0),r=new ec(e,1/0);this.Zr.forEachInRange([t,r],(e=>{n=n.add(e.Yr)}))})),z.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){let n=t.path,r=n.length+1,i=n;L.isDocumentKey(i)||(i=i.child(``));let a=new ec(new L(i),0),o=new ti(I);return this.Zr.forEachWhile((e=>{let t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Yr)),!0)}),a),z.resolve(this.ti(o))}ti(e){let t=[];return e.forEach((e=>{let n=this.Xr(e);n!==null&&t.push(n)})),t}removeMutationBatch(e,t){M(this.ni(t.batchId,`removed`)===0,55003),this.mutationQueue.shift();let n=this.Zr;return z.forEach(t.mutations,(r=>{let i=new ec(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=n}))}ir(e){}containsKey(e,t){let n=new ec(t,0),r=this.Zr.firstAfterOrEqual(n);return z.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}},nc=class{constructor(e){this.ri=e,this.docs=function(){return new Qr(L.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let n=this.docs.get(t);return z.resolve(n?n.document.mutableCopy():Wi.newInvalidDocument(t))}getEntries(e,t){let n=La();return t.forEach((e=>{let t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Wi.newInvalidDocument(e))})),z.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=La(),a=t.path,o=new L(a.child(`__id-9223372036854775808__`)),s=this.docs.getIteratorFrom(o);for(;s.hasNext();){let{key:e,value:{document:o}}=s.getNext();if(!a.isPrefixOf(e.path))break;e.path.length>a.length+1||Pr(Mr(o),n)<=0||(r.has(o.key)||ja(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return z.resolve(i)}getAllFromCollectionGroup(e,t,n,r){j(9500)}ii(e,t){return z.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new rc(this)}getSize(e){return z.resolve(this.size)}},rc=class extends qs{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)})),z.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}},ic=class{constructor(e){this.persistence=e,this.si=new Fa((e=>ha(e)),ga),this.lastRemoteSnapshotVersion=R.min(),this.highestTargetId=0,this.oi=0,this._i=new $s,this.targetCount=0,this.ai=zs.ur()}forEachTarget(e,t){return this.si.forEach(((e,n)=>t(n))),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),z.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new zs(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,z.resolve()}updateTargetData(e,t){return this.Pr(t),z.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),--this.targetCount,z.resolve()}removeTargets(e,t,n){let r=0,i=[];return this.si.forEach(((a,o)=>{o.sequenceNumber<=t&&n.get(o.targetId)===null&&(this.si.delete(a),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),z.waitFor(i).next((()=>r))}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,t){let n=this.si.get(t)||null;return z.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),z.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);let r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),z.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),z.resolve()}getMatchingKeysForTargetId(e,t){let n=this._i.Hr(t);return z.resolve(n)}containsKey(e,t){return z.resolve(this._i.containsKey(t))}},ac=class{constructor(e,t){this.ui={},this.overlays={},this.ci=new Br(0),this.li=!1,this.li=!0,this.hi=new Qs,this.referenceDelegate=e(this),this.Pi=new ic(this),this.indexManager=new Ps,this.remoteDocumentCache=function(e){return new nc(e)}((e=>this.referenceDelegate.Ti(e))),this.serializer=new js(t),this.Ii=new Xs(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Zs,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new tc(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){A(`MemoryPersistence`,`Starting transaction:`,e);let r=new oc(this.ci.next());return this.referenceDelegate.Ei(),n(r).next((e=>this.referenceDelegate.di(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Ai(e,t){return z.or(Object.values(this.ui).map((n=>()=>n.containsKey(e,t))))}},oc=class extends Ir{constructor(e){super(),this.currentSequenceNumber=e}},sc=class e{constructor(e){this.persistence=e,this.Ri=new $s,this.Vi=null}static mi(t){return new e(t)}get fi(){if(this.Vi)return this.Vi;throw j(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),z.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),z.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),z.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((e=>this.fi.add(e.toString())));let n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.fi.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.fi,(n=>{let r=L.fromPath(n);return this.gi(e,r).next((e=>{e||t.removeEntry(r,R.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return z.or([()=>z.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}},cc=class e{constructor(e,t){this.persistence=e,this.pi=new Fa((e=>Kr(e.path)),((e,t)=>e.isEqual(t))),this.garbageCollector=Ks(this,t)}static mi(t,n){return new e(t,n)}Ei(){}di(e){return z.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){let t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}wr(e){let t=0;return this.pr(e,(e=>{t++})).next((()=>t))}pr(e,t){return z.forEach(this.pi,((n,r)=>this.br(e,n,r).next((e=>e?z.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0,r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,(r=>this.br(e,r,t).next((e=>{e||(n++,i.removeEntry(r,R.min()))})))).next((()=>i.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),z.resolve()}removeTarget(e,t){let n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),z.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),z.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),z.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ni(e.data.value)),t}br(e,t,n){return z.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let e=this.pi.get(t);return z.resolve(e!==void 0&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}},lc=class e{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(t,n){let r=V(),i=V();for(let e of n.docChanges)switch(e.type){case 0:r=r.add(e.doc.key);break;case 1:i=i.add(e.doc.key)}return new e(t,n.fromCache,r,i)}},uc=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}},dc=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return he()?8:Rr(E())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){let i={result:null};return this.ys(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.ws(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;let n=new uc;return this.Ss(e,t,n).next((r=>{if(i.result=r,this.Vs)return this.bs(e,t,n,r.size)}))})).next((()=>i.result))}bs(e,t,n,r){return n.documentReadCount<this.fs?(Wn()<=O.DEBUG&&A(`QueryEngine`,`SDK will not create cache indexes for query:`,Aa(t),`since it only creates cache indexes for collection contains`,`more than or equal to`,this.fs,`documents`),z.resolve()):(Wn()<=O.DEBUG&&A(`QueryEngine`,`Query:`,Aa(t),`scans`,n.documentReadCount,`local documents and returns`,r,`documents as results.`),n.documentReadCount>this.gs*r?(Wn()<=O.DEBUG&&A(`QueryEngine`,`The SDK decides to create cache indexes for query:`,Aa(t),`as using cache indexes may help improve performance.`),this.indexManager.createTargetIndexes(e,wa(t))):z.resolve())}ys(e,t){if(xa(t))return z.resolve(null);let n=wa(t);return this.indexManager.getIndexType(e,n).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=Da(t,null,`F`),n=wa(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{let i=V(...r);return this.ps.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{let a=this.Ds(t,r);return this.Cs(t,a,i,n.readTime)?this.ys(e,Da(t,null,`F`)):this.vs(e,a,t,n)}))))})))))}ws(e,t,n,r){return xa(t)||r.isEqual(R.min())?z.resolve(null):this.ps.getDocuments(e,n).next((i=>{let a=this.Ds(t,i);return this.Cs(t,a,n,r)?z.resolve(null):(Wn()<=O.DEBUG&&A(`QueryEngine`,`Re-using previous result from %s to execute query: %s`,r.toString(),Aa(t)),this.vs(e,a,t,jr(r,kr)).next((e=>e)))}))}Ds(e,t){let n=new ti(Na(e));return t.forEach(((t,r)=>{ja(e,r)&&(n=n.add(r))})),n}Cs(e,t,n,r){if(e.limit===null)return!1;if(n.size!==t.size)return!0;let i=e.limitType===`F`?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,n){return Wn()<=O.DEBUG&&A(`QueryEngine`,`Using full collection scan to execute query:`,Aa(t)),this.ps.getDocumentsMatchingQuery(e,t,Nr.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}},fc=`LocalStore`,pc=3e8,mc=class{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new Qr(I),this.xs=new Fa((e=>ha(e)),ga),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ys(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction(`Collect garbage`,`readwrite-primary`,(t=>e.collect(t,this.Ms)))}};function hc(e,t,n,r){return new mc(e,t,n,r)}async function gc(e,t){let n=N(e);return await n.persistence.runTransaction(`Handle user change`,`readonly`,(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{let i=[],a=[],o=V();for(let e of r){i.push(e.batchId);for(let t of e.mutations)o=o.add(t.key)}for(let e of t){a.push(e.batchId);for(let t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({Ls:e,removedBatchIds:i,addedBatchIds:a})))}))}))}function _c(e,t){let n=N(e);return n.persistence.runTransaction(`Acknowledge batch`,`readwrite-primary`,(e=>{let r=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){let i=n.batch,a=i.keys(),o=z.resolve();return a.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{let a=n.docVersions.get(e);M(a!==null,48541),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=V();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}function vc(e){let t=N(e);return t.persistence.runTransaction(`Get last remote snapshot version`,`readonly`,(e=>t.Pi.getLastRemoteSnapshotVersion(e)))}function yc(e,t){let n=N(e),r=t.snapshotVersion,i=n.Ms;return n.persistence.runTransaction(`Apply remote event`,`readwrite-primary`,(e=>{let a=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;let o=[];t.targetChanges.forEach(((a,s)=>{let c=i.get(s);if(!c)return;o.push(n.Pi.removeMatchingKeys(e,a.removedDocuments,s).next((()=>n.Pi.addMatchingKeys(e,a.addedDocuments,s))));let l=c.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.get(s)===null?a.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(a.resumeToken,r)):l=l.withResumeToken(ai.EMPTY_BYTE_STRING,R.min()).withLastLimboFreeSnapshotVersion(R.min()),i=i.insert(s,l),function(e,t,n){return e.resumeToken.approximateByteSize()===0||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=pc?!0:n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,l,a)&&o.push(n.Pi.updateTargetData(e,l))}));let s=La(),c=V();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(bc(e,a,t.documentUpdates).next((e=>{s=e.ks,c=e.qs}))),!r.isEqual(R.min())){let t=n.Pi.getLastRemoteSnapshotVersion(e).next((t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return z.waitFor(o).next((()=>a.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,s,c))).next((()=>s))})).then((e=>(n.Ms=i,e)))}function bc(e,t,n){let r=V(),i=V();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=La();return n.forEach(((n,a)=>{let o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(R.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||a.version.compareTo(o.version)===0&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):A(fc,`Ignoring outdated watch update for `,n,`. Current version:`,o.version,` Watch version:`,a.version)})),{ks:r,qs:i}}))}function xc(e,t){let n=N(e);return n.persistence.runTransaction(`Get next mutation batch`,`readonly`,(e=>(t===void 0&&(t=Vr),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Sc(e,t){let n=N(e);return n.persistence.runTransaction(`Allocate target`,`readwrite`,(e=>{let r;return n.Pi.getTargetData(e,t).next((i=>i?(r=i,z.resolve(r)):n.Pi.allocateTargetId(e).next((i=>(r=new As(t,i,`TargetPurposeListen`,e.currentSequenceNumber),n.Pi.addTargetData(e,r).next((()=>r)))))))})).then((e=>{let r=n.Ms.get(e.targetId);return(r===null||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e}))}async function Cc(e,t,n){let r=N(e),i=r.Ms.get(t),a=n?`readwrite`:`readwrite-primary`;try{n||await r.persistence.runTransaction(`Release target`,a,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!zr(e))throw e;A(fc,`Failed to update sequence numbers for target ${t}: ${e}`)}r.Ms=r.Ms.remove(t),r.xs.delete(i.target)}function wc(e,t,n){let r=N(e),i=R.min(),a=V();return r.persistence.runTransaction(`Execute query`,`readwrite`,(e=>function(e,t,n){let r=N(e),i=r.xs.get(n);return i===void 0?r.Pi.getTargetData(t,n):z.resolve(r.Ms.get(i))}(r,e,wa(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next((e=>{a=e}))})).next((()=>r.Fs.getDocumentsMatchingQuery(e,t,n?i:R.min(),n?a:V()))).next((e=>(Tc(r,Ma(t),e),{documents:e,Qs:a})))))}function Tc(e,t,n){let r=e.Os.get(t)||R.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Os.set(t,r)}var Ec=class{constructor(){this.activeTargetIds=qa()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Dc=class{constructor(){this.Mo=new Ec,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||`not-current`}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Ec,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}},Oc=class{Oo(e){}shutdown(){}},kc=`ConnectivityMonitor`,Ac=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener(`online`,this.No),window.removeEventListener(`offline`,this.Lo)}Qo(){window.addEventListener(`online`,this.No),window.addEventListener(`offline`,this.Lo)}Bo(){A(kc,`Network connectivity changed: AVAILABLE`);for(let e of this.qo)e(0)}ko(){A(kc,`Network connectivity changed: UNAVAILABLE`);for(let e of this.qo)e(1)}static v(){return typeof window<`u`&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}},jc=null;function Mc(){return jc===null?jc=function(){return 268435456+Math.round(2147483648*Math.random())}():jc++,`0x`+jc.toString(16)}var Nc=`RestConnection`,Pc={BatchGetDocuments:`batchGet`,Commit:`commit`,RunQuery:`runQuery`,RunAggregationQuery:`runAggregationQuery`},Fc=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?`https`:`http`,n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+`://`+e.host,this.Ko=`projects/${n}/databases/${r}`,this.Wo=this.databaseId.database===vi?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Go(e,t,n,r,i){let a=Mc(),o=this.zo(e,t.toUriEncodedString());A(Nc,`Sending RPC '${e}' ${a}:`,o,n);let s={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(s,r,i);let{host:c}=new URL(o),l=re(c);return this.Jo(e,o,s,n,l).then((t=>(A(Nc,`Received RPC '${e}' ${a}: `,t),t)),(t=>{throw Kn(Nc,`RPC '${e}' ${a} failed with error: `,t,`url: `,o,`request:`,n),t}))}Ho(e,t,n,r,i,a){return this.Go(e,t,n,r,i)}jo(e,t,n){e[`X-Goog-Api-Client`]=function(){return`gl-js/ fire/`+Hn}(),e[`Content-Type`]=`text/plain`,this.databaseInfo.appId&&(e[`X-Firebase-GMPID`]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}zo(e,t){let n=Pc[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}},Ic=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}},Lc=`WebChannelConnection`,Rc=class extends Fc{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,i){let a=Mc();return new Promise(((i,o)=>{let s=new jn;s.setWithCredentials(!0),s.listenOnce(Nn.COMPLETE,(()=>{try{switch(s.getLastErrorCode()){case Pn.NO_ERROR:let t=s.getResponseJson();A(Lc,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(t)),i(t);break;case Pn.TIMEOUT:A(Lc,`RPC '${e}' ${a} timed out`),o(new F(P.DEADLINE_EXCEEDED,`Request time out`));break;case Pn.HTTP_ERROR:let n=s.getStatus();if(A(Lc,`RPC '${e}' ${a} failed with status:`,n,`response text:`,s.getResponseText()),n>0){let e=s.getResponseJson();Array.isArray(e)&&(e=e[0]);let t=e?.error;t&&t.status&&t.message?o(new F(function(e){let t=e.toLowerCase().replace(/_/g,`-`);return Object.values(P).indexOf(t)>=0?t:P.UNKNOWN}(t.status),t.message)):o(new F(P.UNKNOWN,`Server responded with status `+s.getStatus()))}else o(new F(P.UNAVAILABLE,`Connection failed.`));break;default:j(9055,{l_:e,streamId:a,h_:s.getLastErrorCode(),P_:s.getLastError()})}}finally{A(Lc,`RPC '${e}' ${a} completed.`)}}));let c=JSON.stringify(r);A(Lc,`RPC '${e}' ${a} sending request:`,r),s.send(t,`POST`,c,n,15)}))}T_(e,t,n){let r=Mc(),i=[this.Uo,`/`,`google.firestore.v1.Firestore`,`/`,e,`/channel`],a=Rn(),o=Ln(),s={httpSessionIdParam:`gsessionid`,initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(s.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(s.useFetchStreams=!0),this.jo(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;let l=i.join(``);A(Lc,`Creating RPC '${e}' stream ${r}: ${l}`,s);let u=a.createWebChannel(l,s);this.I_(u);let d=!1,f=!1,p=new Ic({Yo:t=>{f?A(Lc,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||=(A(Lc,`Opening RPC '${e}' stream ${r} transport.`),u.open(),!0),A(Lc,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},Zo:()=>u.close()}),m=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return m(u,Mn.EventType.OPEN,(()=>{f||(A(Lc,`RPC '${e}' stream ${r} transport opened.`),p.o_())})),m(u,Mn.EventType.CLOSE,(()=>{f||(f=!0,A(Lc,`RPC '${e}' stream ${r} transport closed`),p.a_(),this.E_(u))})),m(u,Mn.EventType.ERROR,(t=>{f||(f=!0,Kn(Lc,`RPC '${e}' stream ${r} transport errored. Name:`,t.name,`Message:`,t.message),p.a_(new F(P.UNAVAILABLE,`The operation could not be completed`)))})),m(u,Mn.EventType.MESSAGE,(t=>{if(!f){let n=t.data[0];M(!!n,16349);let i=n,a=i?.error||i[0]?.error;if(a){A(Lc,`RPC '${e}' stream ${r} received error:`,a);let t=a.status,n=function(e){let t=W[e];if(t!==void 0)return jo(t)}(t),i=a.message;n===void 0&&(n=P.INTERNAL,i=`Unknown error status: `+t+` with message `+a.message),f=!0,p.a_(new F(n,i)),u.close()}else A(Lc,`RPC '${e}' stream ${r} received:`,n),p.u_(n)}})),m(o,In.STAT_EVENT,(t=>{t.stat===Fn.PROXY?A(Lc,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===Fn.NOPROXY&&A(Lc,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{p.__()}),0),p}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}};function zc(){return typeof document<`u`?document:null}function Bc(e){return new Zo(e,!0)}var Vc=class{constructor(e,t,n=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&A(`ExponentialBackoff`,`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}},Hc=`PersistentStream`,Uc=class{constructor(e,t,n,r,i,a,o,s){this.Mi=e,this.S_=n,this.b_=r,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=s,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Vc(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state===4?this.N_():this.auth()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&=(this.C_.cancel(),null)}U_(){this.v_&&=(this.v_.cancel(),null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e===4?t&&t.code===P.RESOURCE_EXHAUSTED?(Gn(t.toString()),Gn(`Using maximum backoff delay to prevent overloading the backend.`),this.M_.g_()):t&&t.code===P.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()):this.M_.reset(),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;let e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([e,n])=>{this.D_===t&&this.G_(e,n)}),(t=>{e((()=>{let e=new F(P.UNKNOWN,`Fetching auth token failed: `+t.message);return this.z_(e)}))}))}G_(e,t){let n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{n((()=>this.listener.Xo()))})),this.stream.t_((()=>{n((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((e=>{n((()=>this.z_(e)))})),this.stream.onMessage((e=>{n((()=>++this.F_==1?this.J_(e):this.onNext(e)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return A(Hc,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(A(Hc,`stream callback skipped by getCloseGuardedDispatcher.`),Promise.resolve())))}}},Wc=class extends Uc{constructor(e,t,n,r,i,a){super(e,`listen_stream_connection_backoff`,`listen_stream_idle`,`health_check_timeout`,t,n,r,a),this.serializer=i}j_(e,t){return this.connection.T_(`Listen`,e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=ms(this.serializer,e),n=function(e){if(!(`targetChange`in e))return R.min();let t=e.targetChange;return t.targetIds&&t.targetIds.length?R.min():t.readTime?ns(t.readTime):R.min()}(e);return this.listener.H_(t,n)}Y_(e){let t={};t.database=us(this.serializer),t.addTarget=function(e,t){let n,r=t.target;if(n=_a(r)?{documents:_s(e,r)}:{query:vs(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=es(e,t.resumeToken);let r=Qo(e,t.expectedCount);r!==null&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(R.min())>0){n.readTime=$o(e,t.snapshotVersion.toTimestamp());let r=Qo(e,t.expectedCount);r!==null&&(n.expectedCount=r)}return n}(this.serializer,e);let n=bs(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){let t={};t.database=us(this.serializer),t.removeTarget=e,this.q_(t)}},Gc=class extends Uc{constructor(e,t,n,r,i,a){super(e,`write_stream_connection_backoff`,`write_stream_idle`,`health_check_timeout`,t,n,r,a),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_(`Write`,e,t)}J_(e){return M(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,M(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){M(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let t=gs(e.writeResults,e.commitTime),n=ns(e.commitTime);return this.listener.na(n,t)}ra(){let e={};e.database=us(this.serializer),this.q_(e)}ea(e){let t={streamToken:this.lastStreamToken,writes:e.map((e=>hs(this.serializer,e)))};this.q_(t)}},Kc=class{},qc=class extends Kc{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new F(P.FAILED_PRECONDITION,`The client has already been terminated.`)}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,a])=>this.connection.Go(e,is(t,n),r,i,a))).catch((e=>{throw e.name===`FirebaseError`?(e.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new F(P.UNKNOWN,e.toString())}))}Ho(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.Ho(e,is(t,n),r,a,o,i))).catch((e=>{throw e.name===`FirebaseError`?(e.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new F(P.UNKNOWN,e.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}},Jc=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state=`Unknown`,this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca(`Unknown`),this._a=this.asyncQueue.enqueueAfterDelay(`online_state_timeout`,1e4,(()=>(this._a=null,this.la(`Backend didn't respond within 10 seconds.`),this.ca(`Offline`),Promise.resolve()))))}ha(e){this.state===`Online`?this.ca(`Unknown`):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca(`Offline`)))}set(e){this.Pa(),this.oa=0,e===`Online`&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Gn(t),this.aa=!1):A(`OnlineStateTracker`,t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}},Yc=`RemoteStore`,Xc=class{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((e=>{n.enqueueAndForget((async()=>{al(this)&&(A(Yc,`Restarting streams for network reachability change.`),await async function(e){let t=N(e);t.Ea.add(4),await Qc(t),t.Ra.set(`Unknown`),t.Ea.delete(4),await Zc(t)}(this))}))})),this.Ra=new Jc(n,r)}};async function Zc(e){if(al(e))for(let t of e.da)await t(!0)}async function Qc(e){for(let t of e.da)await t(!1)}function $c(e,t){let n=N(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),il(n)?rl(n):wl(n).O_()&&tl(n,t))}function el(e,t){let n=N(e),r=wl(n);n.Ia.delete(t),r.O_()&&nl(n,t),n.Ia.size===0&&(r.O_()?r.L_():al(n)&&n.Ra.set(`Unknown`))}function tl(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(R.min())>0){let n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}wl(e).Y_(t)}function nl(e,t){e.Va.Ue(t),wl(e).Z_(t)}function rl(e){e.Va=new Go({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),wl(e).start(),e.Ra.ua()}function il(e){return al(e)&&!wl(e).x_()&&e.Ia.size>0}function al(e){return N(e).Ea.size===0}function ol(e){e.Va=void 0}async function sl(e){e.Ra.set(`Online`)}async function cl(e){e.Ia.forEach(((t,n)=>{tl(e,t)}))}async function ll(e,t){ol(e),il(e)?(e.Ra.ha(t),rl(e)):e.Ra.set(`Unknown`)}async function ul(e,t,n){if(e.Ra.set(`Online`),t instanceof Uo&&t.state===2&&t.cause)try{await async function(e,t){let n=t.cause;for(let r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){A(Yc,`Failed to remove targets %s: %s `,t.targetIds.join(`,`),n),await dl(e,n)}else if(t instanceof Vo?e.Va.Ze(t):t instanceof Ho?e.Va.st(t):e.Va.tt(t),!n.isEqual(R.min()))try{let t=await vc(e.localStore);n.compareTo(t)>=0&&await function(e,t){let n=e.Va.Tt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){let i=e.Ia.get(r);i&&e.Ia.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{let r=e.Ia.get(t);r&&(e.Ia.set(t,r.withResumeToken(ai.EMPTY_BYTE_STRING,r.snapshotVersion)),nl(e,t),tl(e,new As(r.target,t,n,r.sequenceNumber)))})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){A(Yc,`Failed to raise snapshot:`,t),await dl(e,t)}}async function dl(e,t,n){if(!zr(t))throw t;e.Ea.add(1),await Qc(e),e.Ra.set(`Offline`),n||=()=>vc(e.localStore),e.asyncQueue.enqueueRetryable((async()=>{A(Yc,`Retrying IndexedDB access`),await n(),e.Ea.delete(1),await Zc(e)}))}function fl(e,t){return t().catch((n=>dl(e,n,t)))}async function pl(e){let t=N(e),n=Tl(t),r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Vr;for(;ml(t);)try{let e=await xc(t.localStore,r);if(e===null){t.Ta.length===0&&n.L_();break}r=e.batchId,hl(t,e)}catch(e){await dl(t,e)}gl(t)&&_l(t)}function ml(e){return al(e)&&e.Ta.length<10}function hl(e,t){e.Ta.push(t);let n=Tl(e);n.O_()&&n.X_&&n.ea(t.mutations)}function gl(e){return al(e)&&!Tl(e).x_()&&e.Ta.length>0}function _l(e){Tl(e).start()}async function vl(e){Tl(e).ra()}async function yl(e){let t=Tl(e);for(let n of e.Ta)t.ea(n.mutations)}async function bl(e,t,n){let r=e.Ta.shift(),i=Do.from(r,t,n);await fl(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await pl(e)}async function xl(e,t){t&&Tl(e).X_&&await async function(e,t){if(function(e){return Ao(e)&&e!==P.ABORTED}(t.code)){let n=e.Ta.shift();Tl(e).B_(),await fl(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await pl(e)}}(e,t),gl(e)&&_l(e)}async function Sl(e,t){let n=N(e);n.asyncQueue.verifyOperationInProgress(),A(Yc,`RemoteStore received new credentials`);let r=al(n);n.Ea.add(3),await Qc(n),r&&n.Ra.set(`Unknown`),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Zc(n)}async function Cl(e,t){let n=N(e);t?(n.Ea.delete(2),await Zc(n)):t||(n.Ea.add(2),await Qc(n),n.Ra.set(`Unknown`))}function wl(e){return e.ma||(e.ma=function(e,t,n){let r=N(e);return r.sa(),new Wc(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:sl.bind(null,e),t_:cl.bind(null,e),r_:ll.bind(null,e),H_:ul.bind(null,e)}),e.da.push((async t=>{t?(e.ma.B_(),il(e)?rl(e):e.Ra.set(`Unknown`)):(await e.ma.stop(),ol(e))}))),e.ma}function Tl(e){return e.fa||(e.fa=function(e,t,n){let r=N(e);return r.sa(),new Gc(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:vl.bind(null,e),r_:xl.bind(null,e),ta:yl.bind(null,e),na:bl.bind(null,e)}),e.da.push((async t=>{t?(e.fa.B_(),await pl(e)):(await e.fa.stop(),e.Ta.length>0&&(A(Yc,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))}))),e.fa}var El=class e{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Yn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,a){let o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new F(P.CANCELLED,`Operation cancelled`+(e?`: `+e:``))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle===null?Promise.resolve():(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e))))))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Dl(e,t){if(Gn(`AsyncQueue`,`${t}: ${e}`),zr(e))return new F(P.UNAVAILABLE,`${t}: ${e}`);throw e}var Ol=class e{static emptySet(t){return new e(t.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||L.comparator(t.key,n.key):(e,t)=>L.comparator(e.key,t.key),this.keyedMap=za(),this.sortedSet=new Qr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(t){if(!(t instanceof e)||this.size!==t.size)return!1;let n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){let e=n.getNext().key,t=r.getNext().key;if(!e.isEqual(t))return!1}return!0}toString(){let e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?`DocumentSet ()`:`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(t,n){let r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}},kl=class{constructor(){this.ga=new Qr(L.comparator)}track(e){let t=e.doc.key,n=this.ga.get(t);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(t,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(t):e.type===1&&n.type===2?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):j(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal(((t,n)=>{e.push(n)})),e}},Al=class e{constructor(e,t,n,r,i,a,o,s,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=s,this.hasCachedResults=c}static fromInitialDocuments(t,n,r,i,a){let o=[];return n.forEach((e=>{o.push({type:0,doc:e})})),new e(t,n,Ol.emptySet(n),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Oa(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==n[e].type||!t[e].doc.isEqual(n[e].doc))return!1;return!0}},jl=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}},Ml=class{constructor(){this.queries=Nl(),this.onlineState=`Unknown`,this.Ca=new Set}terminate(){(function(e,t){let n=N(e),r=n.queries;n.queries=Nl(),r.forEach(((e,n)=>{for(let e of n.Sa)e.onError(t)}))})(this,new F(P.ABORTED,`Firestore shutting down`))}};function Nl(){return new Fa((e=>ka(e)),Oa)}async function Pl(e,t){let n=N(e),r=3,i=t.query,a=n.queries.get(i);a?!a.ba()&&t.Da()&&(r=2):(a=new jl,r=t.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(i,!0);break;case 1:a.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){let n=Dl(e,`Initialization of query '${Aa(t.query)}' failed`);t.onError(n);return}n.queries.set(i,a),a.Sa.push(t),t.va(n.onlineState),a.wa&&t.Fa(a.wa)&&Rl(n)}async function Fl(e,t){let n=N(e),r=t.query,i=3,a=n.queries.get(r);if(a){let e=a.Sa.indexOf(t);e>=0&&(a.Sa.splice(e,1),a.Sa.length===0?i=t.Da()?0:1:!a.ba()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Il(e,t){let n=N(e),r=!1;for(let e of t){let t=e.query,i=n.queries.get(t);if(i){for(let t of i.Sa)t.Fa(e)&&(r=!0);i.wa=e}}r&&Rl(n)}function Ll(e,t,n){let r=N(e),i=r.queries.get(t);if(i)for(let e of i.Sa)e.onError(n);r.queries.delete(t)}function Rl(e){e.Ca.forEach((e=>{e.next()}))}var zl,Bl;(Bl=zl||={}).Ma=`default`,Bl.Cache=`cache`;var K=class{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState=`Unknown`,this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){let t=[];for(let n of e.docChanges)n.type!==3&&t.push(n);e=new Al(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let n=t!==`Offline`;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t===`Offline`)}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=Al.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==zl.Cache}},q=class{constructor(e){this.key=e}},Vl=class{constructor(e){this.key=e}},Hl=class{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=V(),this.mutatedKeys=V(),this.eu=Na(e),this.tu=new Ol(this.eu)}get nu(){return this.Ya}ru(e,t){let n=t?t.iu:new kl,r=t?t.tu:this.tu,i=t?t.mutatedKeys:this.mutatedKeys,a=r,o=!1,s=this.query.limitType===`F`&&r.size===this.query.limit?r.last():null,c=this.query.limitType===`L`&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{let l=r.get(e),u=ja(this.query,t)?t:null,d=!!l&&this.mutatedKeys.has(l.key),f=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations),p=!1;l&&u?l.data.isEqual(u.data)?d!==f&&(n.track({type:3,doc:u}),p=!0):this.su(l,u)||(n.track({type:2,doc:u}),p=!0,(s&&this.eu(u,s)>0||c&&this.eu(u,c)<0)&&(o=!0)):!l&&u?(n.track({type:0,doc:u}),p=!0):l&&!u&&(n.track({type:1,doc:l}),p=!0,(s||c)&&(o=!0)),p&&(u?(a=a.add(u),i=f?i.add(e):i.delete(e)):(a=a.delete(e),i=i.delete(e)))})),this.query.limit!==null)for(;a.size>this.query.limit;){let e=this.query.limitType===`F`?a.last():a.first();a=a.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{tu:a,iu:n,Cs:o,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){let i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let a=e.iu.ya();a.sort(((e,t)=>function(e,t){let n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return j(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc))),this.ou(n),r??=!1;let o=t&&!r?this._u():[],s=this.Xa.size===0&&this.current&&!r?1:0,c=s!==this.Za;return this.Za=s,a.length!==0||c?{snapshot:new Al(this.query,e.tu,i,a,e.mutatedKeys,s===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e===`Offline`?(this.current=!1,this.applyChanges({tu:this.tu,iu:new kl,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((e=>this.Ya=this.Ya.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Ya=this.Ya.delete(e))),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=V(),this.tu.forEach((e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))}));let t=[];return e.forEach((e=>{this.Xa.has(e)||t.push(new Vl(e))})),this.Xa.forEach((n=>{e.has(n)||t.push(new q(n))})),t}cu(e){this.Ya=e.Qs,this.Xa=V();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Al.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},Ul=`SyncEngine`,Wl=class{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}},Gl=class{constructor(e){this.key=e,this.hu=!1}},Kl=class{constructor(e,t,n,r,i,a){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Fa((e=>ka(e)),Oa),this.Iu=new Map,this.Eu=new Set,this.du=new Qr(L.comparator),this.Au=new Map,this.Ru=new $s,this.Vu={},this.mu=new Map,this.fu=zs.cr(),this.onlineState=`Unknown`,this.gu=void 0}get isPrimaryClient(){return!0===this.gu}};async function ql(e,t,n=!0){let r=hu(e),i,a=r.Tu.get(t);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await Yl(r,t,n,!0),i}async function Jl(e,t){await Yl(hu(e),t,!0,!1)}async function Yl(e,t,n,r){let i=await Sc(e.localStore,wa(t)),a=i.targetId,o=e.sharedClientState.addLocalQueryTarget(a,n),s;return r&&(s=await Xl(e,t,a,o===`current`,i.resumeToken)),e.isPrimaryClient&&n&&$c(e.remoteStore,i),s}async function Xl(e,t,n,r,i){e.pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.ru(n);i.Cs&&(i=await wc(e.localStore,t.query,!1).then((({documents:e})=>t.view.ru(e,i))));let a=r&&r.targetChanges.get(t.targetId),o=r&&r.targetMismatches.get(t.targetId)!=null,s=t.view.applyChanges(i,e.isPrimaryClient,a,o);return lu(e,t.targetId,s.au),s.snapshot}(e,t,n,r);let a=await wc(e.localStore,t,!0),o=new Hl(t,a.Qs),s=o.ru(a.documents),c=Bo.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!==`Offline`,i),l=o.applyChanges(s,e.isPrimaryClient,c);lu(e,n,l.au);let u=new Wl(t,n,o);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),l.snapshot}async function Zl(e,t,n){let r=N(e),i=r.Tu.get(t),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((e=>!Oa(e,t)))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Cc(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&el(r.remoteStore,i.targetId),su(r,i.targetId)})).catch(Lr)):(su(r,i.targetId),await Cc(r.localStore,i.targetId,!0))}async function Ql(e,t){let n=N(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),el(n.remoteStore,r.targetId))}async function $l(e,t,n){let r=gu(e);try{let e=await function(e,t){let n=N(e),r=Or.now(),i=t.reduce(((e,t)=>e.add(t.key)),V()),a,o;return n.persistence.runTransaction(`Locally write mutations`,`readwrite`,(e=>{let s=La(),c=V();return n.Ns.getEntries(e,i).next((e=>{s=e,s.forEach(((e,t)=>{t.isValidDocument()||(c=c.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,s))).next((i=>{a=i;let o=[];for(let e of t){let t=_o(e,a.get(e.key).overlayedDocument);t!=null&&o.push(new bo(e.key,t,Ui(t.value.mapValue),U.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;let r=t.applyToLocalDocumentSet(a,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:Ba(a)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||=new Qr(I),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await fu(r,e.changes),await pl(r.remoteStore)}catch(e){let t=Dl(e,`Failed to persist write`);n.reject(t)}}async function eu(e,t){let n=N(e);try{let e=await yc(n.localStore,t);t.targetChanges.forEach(((e,t)=>{let r=n.Au.get(t);r&&(M(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?M(r.hu,14607):e.removedDocuments.size>0&&(M(r.hu,42227),r.hu=!1))})),await fu(n,e,t)}catch(e){await Lr(e)}}function tu(e,t,n){let r=N(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let e=[];r.Tu.forEach(((n,r)=>{let i=r.view.va(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){let n=N(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(let e of n.Sa)e.va(t)&&(r=!0)})),r&&Rl(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function nu(e,t,n){let r=N(e);r.sharedClientState.updateQueryState(t,`rejected`,n);let i=r.Au.get(t),a=i&&i.key;if(a){let e=new Qr(L.comparator);e=e.insert(a,Wi.newNoDocument(a,R.min()));let n=V().add(a);await eu(r,new zo(R.min(),new Map,new Qr(I),e,n)),r.du=r.du.remove(a),r.Au.delete(t),du(r)}else await Cc(r.localStore,t,!1).then((()=>su(r,t,n))).catch(Lr)}async function ru(e,t){let n=N(e),r=t.batch.batchId;try{let e=await _c(n.localStore,t);ou(n,r,null),au(n,r),n.sharedClientState.updateMutationState(r,`acknowledged`),await fu(n,e)}catch(e){await Lr(e)}}async function iu(e,t,n){let r=N(e);try{let e=await function(e,t){let n=N(e);return n.persistence.runTransaction(`Reject batch`,`readwrite-primary`,(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(M(t!==null,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);ou(r,t,n),au(r,t),r.sharedClientState.updateMutationState(t,`rejected`,n),await fu(r,e)}catch(e){await Lr(e)}}function au(e,t){(e.mu.get(t)||[]).forEach((e=>{e.resolve()})),e.mu.delete(t)}function ou(e,t,n){let r=N(e),i=r.Vu[r.currentUser.toKey()];if(i){let e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Vu[r.currentUser.toKey()]=i}}function su(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(let r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach((t=>{e.Ru.containsKey(t)||cu(e,t)}))}function cu(e,t){e.Eu.delete(t.path.canonicalString());let n=e.du.get(t);n!==null&&(el(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),du(e))}function lu(e,t,n){for(let r of n)r instanceof q?(e.Ru.addReference(r.key,t),uu(e,r)):r instanceof Vl?(A(Ul,`Document no longer in limbo: `+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||cu(e,r.key)):j(19791,{wu:r})}function uu(e,t){let n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(A(Ul,`New document in limbo: `+n),e.Eu.add(r),du(e))}function du(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){let t=e.Eu.values().next().value;e.Eu.delete(t);let n=new L(pr.fromString(t)),r=e.fu.next();e.Au.set(r,new Gl(n)),e.du=e.du.insert(n,r),$c(e.remoteStore,new As(wa(ba(n.path)),r,`TargetPurposeLimboResolution`,Br.ce))}}async function fu(e,t,n){let r=N(e),i=[],a=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((e,s)=>{o.push(r.pu(s,t,n).then((e=>{if((e||n)&&r.isPrimaryClient){let t=e?!e.fromCache:n?.targetChanges.get(s.targetId)?.current;r.sharedClientState.updateQueryState(s.targetId,t?`current`:`not-current`)}if(e){i.push(e);let t=lc.As(s.targetId,e);a.push(t)}})))})),await Promise.all(o),r.Pu.H_(i),await async function(e,t){let n=N(e);try{await n.persistence.runTransaction(`notifyLocalViewChanges`,`readwrite`,(e=>z.forEach(t,(t=>z.forEach(t.Es,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>z.forEach(t.ds,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!zr(e))throw e;A(fc,`Failed to update sequence numbers: `+e)}for(let e of t){let t=e.targetId;if(!e.fromCache){let e=n.Ms.get(t),r=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(t,i)}}}(r.localStore,a))}async function pu(e,t){let n=N(e);if(!n.currentUser.isEqual(t)){A(Ul,`User change. New user:`,t.toKey());let e=await gc(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach((e=>{e.forEach((e=>{e.reject(new F(P.CANCELLED,t))}))})),e.mu.clear()}(n,`'waitForPendingWrites' promise is rejected due to a user change.`),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await fu(n,e.Ls)}}function mu(e,t){let n=N(e),r=n.Au.get(t);if(r&&r.hu)return V().add(r.key);{let e=V(),r=n.Iu.get(t);if(!r)return e;for(let t of r){let r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function hu(e){let t=N(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=eu.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=mu.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=nu.bind(null,t),t.Pu.H_=Il.bind(null,t.eventManager),t.Pu.yu=Ll.bind(null,t.eventManager),t}function gu(e){let t=N(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=ru.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=iu.bind(null,t),t}var _u=class{constructor(){this.kind=`memory`,this.synchronizeTabs=!1}async initialize(e){this.serializer=Bc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return hc(this.persistence,new dc,e.initialUser,this.serializer)}Cu(e){return new ac(sc.mi,this.serializer)}Du(e){return new Dc}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}};_u.provider={build:()=>new _u};var vu=class extends _u{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){M(this.persistence.referenceDelegate instanceof cc,46915);let n=this.persistence.referenceDelegate.garbageCollector;return new Ws(n,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes===void 0?Rs.DEFAULT:Rs.withCacheSize(this.cacheSizeBytes);return new ac((e=>cc.mi(e,t)),this.serializer)}},yu=class{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>tu(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=pu.bind(null,this.syncEngine),await Cl(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Ml}()}createDatastore(e){let t=Bc(e.databaseInfo.databaseId),n=function(e){return new Rc(e)}(e.databaseInfo);return function(e,t,n,r){return new qc(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Xc(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>tu(this.syncEngine,e,0)),function(){return Ac.v()?new Ac:new Oc}())}createSyncEngine(e,t){return function(e,t,n,r,i,a,o){let s=new Kl(e,t,n,r,i,a);return o&&(s.gu=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await async function(e){let t=N(e);A(Yc,`RemoteStore shutting down.`),t.Ea.add(5),await Qc(t),t.Aa.shutdown(),t.Ra.set(`Unknown`)}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}};yu.provider={build:()=>new yu};var bu=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Gn(`Uncaught Error in snapshot listener:`,e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}},xu=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new F(P.INVALID_ARGUMENT,`Firestore transactions require all reads to be executed before all writes.`),this.lastTransactionError;let t=await async function(e,t){let n=N(e),r={documents:t.map((e=>os(n.serializer,e)))},i=await n.Ho(`BatchGetDocuments`,n.serializer.databaseId,pr.emptyPath(),r,t.length),a=new Map;i.forEach((e=>{let t=ps(n.serializer,e);a.set(t.key.toString(),t)}));let o=[];return t.forEach((e=>{let t=a.get(e.toString());M(!!t,55234,{key:e}),o.push(t)})),o}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new wo(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{let n=L.fromPath(t);this.mutations.push(new To(n,this.precondition(n)))})),await async function(e,t){let n=N(e),r={writes:t.map((e=>hs(n.serializer,e)))};await n.Go(`Commit`,n.serializer.databaseId,pr.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw j(50498,{Gu:e.constructor.name});t=R.min()}let n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new F(P.ABORTED,`Document version changed between two reads.`)}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(R.min())?U.exists(!1):U.updateTime(t):U.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(R.min()))throw new F(P.INVALID_ARGUMENT,`Can't update a document that doesn't exist.`);return U.updateTime(t)}return U.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}},Su=class{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.zu=n.maxAttempts,this.M_=new Vc(this.asyncQueue,`transaction_retry`)}ju(){--this.zu,this.Ju()}Ju(){this.M_.p_((async()=>{let e=new xu(this.datastore),t=this.Hu(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.Yu(e)}))))})).catch((e=>{this.Yu(e)}))}))}Hu(e){try{let t=this.updateFunction(e);return!Hr(t)&&t.catch&&t.then?t:(this.deferred.reject(Error(`Transaction callback must return a Promise`)),null)}catch(e){return this.deferred.reject(e),null}}Yu(e){this.zu>0&&this.Zu(e)?(--this.zu,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name===`FirebaseError`){let t=e.code;return t===`aborted`||t===`failed-precondition`||t===`already-exists`||!Ao(t)}return!1}},Cu=`FirestoreClient`,wu=class{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Vn.UNAUTHENTICATED,this.clientId=ar.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async e=>{A(Cu,`Received user=`,e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(A(Cu,`Received new app check token=`,e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Yn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let n=Dl(t,`Failed to shutdown persistence`);e.reject(n)}})),e.promise}};async function Tu(e,t){e.asyncQueue.verifyOperationInProgress(),A(Cu,`Initializing OfflineComponentProvider`);let n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await gc(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Eu(e,t){e.asyncQueue.verifyOperationInProgress();let n=await Du(e);A(Cu,`Initializing OnlineComponentProvider`),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>Sl(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Sl(t.remoteStore,n))),e._onlineComponents=t}async function Du(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){A(Cu,`Using user provided OfflineComponentProvider`);try{await Tu(e,e._uninitializedComponentsProvider._offline)}catch(t){let n=t;if(!function(e){return e.name===`FirebaseError`?e.code===P.FAILED_PRECONDITION||e.code===P.UNIMPLEMENTED:!(typeof DOMException<`u`&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}(n))throw n;Kn(`Error using user provided cache. Falling back to memory cache: `+n),await Tu(e,new _u)}}else A(Cu,`Using default OfflineComponentProvider`),await Tu(e,new vu(void 0));return e._offlineComponents}async function Ou(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(A(Cu,`Using user provided OnlineComponentProvider`),await Eu(e,e._uninitializedComponentsProvider._online)):(A(Cu,`Using default OnlineComponentProvider`),await Eu(e,new yu))),e._onlineComponents}function ku(e){return Ou(e).then((e=>e.syncEngine))}function Au(e){return Ou(e).then((e=>e.datastore))}async function ju(e){let t=await Ou(e),n=t.eventManager;return n.onListen=ql.bind(null,t.syncEngine),n.onUnlisten=Zl.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Jl.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Ql.bind(null,t.syncEngine),n}function Mu(e,t,n={}){let r=new Yn;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){let a=new bu({next:s=>{a.Nu(),t.enqueueAndForget((()=>Fl(e,o)));let c=s.docs.has(n);!c&&s.fromCache?i.reject(new F(P.UNAVAILABLE,`Failed to get document because the client is offline.`)):c&&s.fromCache&&r&&r.source===`server`?i.reject(new F(P.UNAVAILABLE,`Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)`)):i.resolve(s)},error:e=>i.reject(e)}),o=new K(ba(n.path),a,{includeMetadataChanges:!0,qa:!0});return Pl(e,o)}(await ju(e),e.asyncQueue,t,n,r))),r.promise}function Nu(e){let t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}var Pu=new Map,Fu=`firestore.googleapis.com`,Iu=!0,Lu=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new F(P.INVALID_ARGUMENT,`Can't provide ssl option if host option is not set`);this.host=Fu,this.ssl=Iu}else this.host=e.host,this.ssl=e.ssl??Iu;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Ls;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Vs)throw new F(P.INVALID_ARGUMENT,`cacheSizeBytes must be at least 1048576`);this.cacheSizeBytes=e.cacheSizeBytes}_r(`experimentalForceLongPolling`,e.experimentalForceLongPolling,`experimentalAutoDetectLongPolling`,e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Nu(e.experimentalLongPollingOptions??{}),function(e){if(e.timeoutSeconds!==void 0){if(isNaN(e.timeoutSeconds))throw new F(P.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new F(P.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new F(P.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ru=class{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type=`firestore-lite`,this._persistenceKey=`(lite)`,this._settings=new Lu({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask=`notTerminated`}get app(){if(!this._app)throw new F(P.FAILED_PRECONDITION,`Firestore was not initialized using the Firebase SDK. 'app' is not available`);return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==`notTerminated`}_setSettings(e){if(this._settingsFrozen)throw new F(P.FAILED_PRECONDITION,`Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.`);this._settings=new Lu(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(e){if(!e)return new Zn;switch(e.type){case`firstParty`:return new tr(e.sessionIndex||`0`,e.iamToken||null,e.authTokenFactory||null);case`provider`:return e.client;default:throw new F(P.INVALID_ARGUMENT,`makeAuthCredentialsProvider failed due to invalid credential type`)}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask===`notTerminated`&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask===`notTerminated`?await this._terminate():this._terminateTask=`notTerminated`}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let t=Pu.get(e);t&&(A(`ComponentProvider`,`Removing Datastore`),Pu.delete(e),t.terminate())}(this),Promise.resolve()}};function zu(e,t,n,r={}){e=Sr(e,Ru);let i=re(t),a=e._getSettings(),o={...a,emulatorOptions:e._getEmulatorOptions()},s=`${t}:${n}`;i&&(ie(`https://${s}`),le(`Firestore`,!0)),a.host!==Fu&&a.host!==s&&Kn(`Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.`);let c={...a,host:s,ssl:i,emulatorOptions:r};if(!we(c,o)&&(e._setSettings(c),r.mockUserToken)){let t,n;if(typeof r.mockUserToken==`string`)t=r.mockUserToken,n=Vn.MOCK_USER;else{t=ae(r.mockUserToken,e._app?.options.projectId);let i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new F(P.INVALID_ARGUMENT,`mockUserToken must contain 'sub' or 'user_id' field!`);n=new Vn(i)}e._authCredentials=new Qn(new Xn(t,n))}}var Bu=class e{constructor(e,t,n){this.converter=t,this._query=n,this.type=`query`,this.firestore=e}withConverter(t){return new e(this.firestore,t,this._query)}},Vu=class e{constructor(e,t,n){this.converter=t,this._key=n,this.type=`document`,this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hu(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new e(this.firestore,t,this._key)}toJSON(){return{type:e._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,r){if(Tr(n,e._jsonSchema))return new e(t,r||null,new L(pr.fromString(n.referencePath)))}};Vu._jsonSchemaVersion=`firestore/documentReference/1.0`,Vu._jsonSchema={type:wr(`string`,Vu._jsonSchemaVersion),referencePath:wr(`string`)};var Hu=class e extends Bu{constructor(e,t,n){super(e,t,ba(n)),this._path=n,this.type=`collection`}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Vu(this.firestore,null,new L(e))}withConverter(t){return new e(this.firestore,t,this._path)}};function Uu(e,t,...n){if(e=Ne(e),gr(`collection`,`path`,t),e instanceof Ru){let r=pr.fromString(t,...n);return yr(r),new Hu(e,null,r)}{if(!(e instanceof Vu||e instanceof Hu))throw new F(P.INVALID_ARGUMENT,`Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore`);let r=e._path.child(pr.fromString(t,...n));return yr(r),new Hu(e.firestore,null,r)}}function J(e,t,...n){if(e=Ne(e),arguments.length===1&&(t=ar.newId()),gr(`doc`,`path`,t),e instanceof Ru){let r=pr.fromString(t,...n);return vr(r),new Vu(e,null,new L(r))}{if(!(e instanceof Vu||e instanceof Hu))throw new F(P.INVALID_ARGUMENT,`Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore`);let r=e._path.child(pr.fromString(t,...n));return vr(r),new Vu(e.firestore,e instanceof Hu?e.converter:null,new L(r))}}var Wu=`AsyncQueue`,Gu=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Vc(this,`async_queue_retry`),this._c=()=>{let e=zc();e&&A(Wu,`Visibility state changed to `+e.visibilityState),this.M_.w_()},this.ac=e;let t=zc();t&&typeof t.addEventListener==`function`&&t.addEventListener(`visibilitychange`,this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=zc();t&&typeof t.removeEventListener==`function`&&t.removeEventListener(`visibilitychange`,this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));let t=new Yn;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!zr(e))throw e;A(Wu,`Operation failed with retryable error: `+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){let t=this.ac.then((()=>(this.rc=!0,e().catch((e=>{throw this.nc=e,this.rc=!1,Gn(`INTERNAL UNHANDLED ERROR: `,Ku(e)),e})).then((e=>(this.rc=!1,e))))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let r=El.createAndSchedule(this,e,t,n,(e=>this.hc(e)));return this.tc.push(r),r}uc(){this.nc&&j(47125,{Pc:Ku(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(let t of this.tc)if(t.skipDelay(),e!==`all`&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function Ku(e){let t=e.message||``;return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}function qu(e){return function(e,t){if(typeof e!=`object`||!e)return!1;let n=e;for(let e of t)if(e in n&&typeof n[e]==`function`)return!0;return!1}(e,[`next`,`error`,`complete`])}var Ju=class extends Ru{constructor(e,t,n,r){super(e,t,n,r),this.type=`firestore`,this._queue=new Gu,this._persistenceKey=r?.name||`[DEFAULT]`}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Gu(e),this._firestoreClient=void 0,await e}}};function Yu(e,t){let n=typeof e==`object`?e:on(),r=typeof e==`string`?e:t||vi,i=$t(n,`firestore`).getImmediate({identifier:r});if(!i._initialized){let e=C(`firestore`);e&&zu(i,...e)}return i}function Xu(e){if(e._terminated)throw new F(P.FAILED_PRECONDITION,`The client has already been terminated.`);return e._firestoreClient||Zu(e),e._firestoreClient}function Zu(e){let t=e._freezeSettings(),n=function(e,t,n,r){return new _i(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Nu(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,e._app?.options.appId||``,e._persistenceKey,t);e._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new wu(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(e){let t=e?._online.build();return{_offline:e?._offline.build(t),_online:t}}(e._componentsProvider))}var Qu=class e{constructor(e){this._byteString=e}static fromBase64String(t){try{return new e(ai.fromBase64String(t))}catch(e){throw new F(P.INVALID_ARGUMENT,`Failed to construct data from Base64 string: `+e)}}static fromUint8Array(t){return new e(ai.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return`Bytes(base64: `+this.toBase64()+`)`}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:e._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Tr(t,e._jsonSchema))return e.fromBase64String(t.bytes)}};Qu._jsonSchemaVersion=`firestore/bytes/1.0`,Qu._jsonSchema={type:wr(`string`,Qu._jsonSchemaVersion),bytes:wr(`string`)};var $u=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new F(P.INVALID_ARGUMENT,`Invalid field name at argument $(i + 1). Field names must not be empty.`);this._internalPath=new hr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}},ed=class{constructor(e){this._methodName=e}},td=class e{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new F(P.INVALID_ARGUMENT,`Latitude must be a number between -90 and 90, but was: `+e);if(!isFinite(t)||t<-180||t>180)throw new F(P.INVALID_ARGUMENT,`Longitude must be a number between -180 and 180, but was: `+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return I(this._lat,e._lat)||I(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:e._jsonSchemaVersion}}static fromJSON(t){if(Tr(t,e._jsonSchema))return new e(t.latitude,t.longitude)}};td._jsonSchemaVersion=`firestore/geoPoint/1.0`,td._jsonSchema={type:wr(`string`,td._jsonSchemaVersion),latitude:wr(`number`),longitude:wr(`number`)};var nd=class e{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:e._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Tr(t,e._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e==`number`)))return new e(t.vectorValues);throw new F(P.INVALID_ARGUMENT,`Expected 'vectorValues' field to be a number array`)}}};nd._jsonSchemaVersion=`firestore/vectorValue/1.0`,nd._jsonSchema={type:wr(`string`,nd._jsonSchemaVersion),vectorValues:wr(`object`)};var rd=/^__.*__$/,id=class{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask===null?new yo(e,this.data,t,this.fieldTransforms):new bo(e,this.data,this.fieldMask,t,this.fieldTransforms)}},ad=class{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new bo(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function od(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw j(40011,{Ac:e})}}var sd=class e{constructor(e,t,n,r,i,a){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new e({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){let t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.gc(e),n}yc(e){let t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Td(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc(`Document fields must not be empty`);if(od(this.Ac)&&rd.test(e))throw this.Sc(`Document fields cannot begin and end with "__"`)}},cd=class{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Bc(e)}Cc(e,t,n,r=!1){return new sd({Ac:e,methodName:t,Dc:n,path:hr.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function ld(e){let t=e._freezeSettings(),n=Bc(e._databaseId);return new cd(e._databaseId,!!t.ignoreUndefinedProperties,n)}function ud(e,t,n,r,i,a={}){let o=e.Cc(a.merge||a.mergeFields?2:0,t,n,i);Sd(`Data must be an object, but it was:`,o,r);let s=bd(r,o),c,l;if(a.merge)c=new ri(o.fieldMask),l=o.fieldTransforms;else if(a.mergeFields){let e=[];for(let r of a.mergeFields){let i=Y(t,r,n);if(!o.contains(i))throw new F(P.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Ed(e,i)||e.push(i)}c=new ri(e),l=o.fieldTransforms.filter((e=>c.covers(e.field)))}else c=null,l=o.fieldTransforms;return new id(new Hi(s),c,l)}var dd=class e extends ed{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(t){return t instanceof e}};function fd(e,t,n){return new sd({Ac:3,Dc:t.settings.Dc,methodName:e._methodName,fc:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var pd=class e extends ed{_toFieldTransform(e){return new lo(e.path,new to)}isEqual(t){return t instanceof e}},md=class e extends ed{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){let t=fd(this,e,!0),n=new no(this.vc.map((e=>yd(e,t))));return new lo(e.path,n)}isEqual(t){return t instanceof e&&we(this.vc,t.vc)}},hd=class e extends ed{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){let t=fd(this,e,!0),n=new io(this.vc.map((e=>yd(e,t))));return new lo(e.path,n)}isEqual(t){return t instanceof e&&we(this.vc,t.vc)}};function gd(e,t,n,r){let i=e.Cc(1,t,n);Sd(`Data must be an object, but it was:`,i,r);let a=[],o=Hi.empty();return Xr(r,((e,r)=>{let s=wd(t,e,n);r=Ne(r);let c=i.yc(s);if(r instanceof dd)a.push(s);else{let e=yd(r,c);e!=null&&(a.push(s),o.set(s,e))}})),new ad(o,new ri(a),i.fieldTransforms)}function _d(e,t,n,r,i,a){let o=e.Cc(1,t,n),s=[Y(t,r,n)],c=[i];if(a.length%2!=0)throw new F(P.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let e=0;e<a.length;e+=2)s.push(Y(t,a[e])),c.push(a[e+1]);let l=[],u=Hi.empty();for(let e=s.length-1;e>=0;--e)if(!Ed(l,s[e])){let t=s[e],n=c[e];n=Ne(n);let r=o.yc(t);if(n instanceof dd)l.push(t);else{let e=yd(n,r);e!=null&&(l.push(t),u.set(t,e))}}return new ad(u,new ri(l),o.fieldTransforms)}function vd(e,t,n,r=!1){return yd(n,e.Cc(r?4:3,t))}function yd(e,t){if(xd(e=Ne(e)))return Sd(`Unsupported field value:`,t,e),bd(e,t);if(e instanceof ed)return function(e,t){if(!od(t.Ac))throw t.Sc(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Sc(`${e._methodName}() is not currently supported inside arrays`);let n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc(`Nested arrays are not supported`);return function(e,t){let n=[],r=0;for(let i of e){let e=yd(i,t.wc(r));e??={nullValue:`NULL_VALUE`},n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if((e=Ne(e))===null)return{nullValue:`NULL_VALUE`};if(typeof e==`number`)return Xa(t.serializer,e);if(typeof e==`boolean`)return{booleanValue:e};if(typeof e==`string`)return{stringValue:e};if(e instanceof Date){let n=Or.fromDate(e);return{timestampValue:$o(t.serializer,n)}}if(e instanceof Or){let n=new Or(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:$o(t.serializer,n)}}if(e instanceof td)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Qu)return{bytesValue:es(t.serializer,e._byteString)};if(e instanceof Vu){let n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:rs(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof nd)return function(e,t){return{mapValue:{fields:{[bi]:{stringValue:Ci},[wi]:{arrayValue:{values:e.toArray().map((e=>{if(typeof e!=`number`)throw t.Sc(`VectorValues must only contain numeric values.`);return Ja(t.serializer,e)}))}}}}}}(e,t);throw t.Sc(`Unsupported field value: ${xr(e)}`)}(e,t)}function bd(e,t){let n={};return Zr(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Xr(e,((e,r)=>{let i=yd(r,t.mc(e));i!=null&&(n[e]=i)})),{mapValue:{fields:n}}}function xd(e){return!(typeof e!=`object`||!e||e instanceof Array||e instanceof Date||e instanceof Or||e instanceof td||e instanceof Qu||e instanceof Vu||e instanceof ed||e instanceof nd)}function Sd(e,t,n){if(!xd(n)||!br(n)){let r=xr(n);throw r===`an object`?t.Sc(e+` a custom object`):t.Sc(e+` `+r)}}function Y(e,t,n){if((t=Ne(t))instanceof $u)return t._internalPath;if(typeof t==`string`)return wd(e,t);throw Td(`Field path arguments must be of type string or `,e,!1,void 0,n)}var Cd=RegExp(`[~\\*/\\[\\]]`);function wd(e,t,n){if(t.search(Cd)>=0)throw Td(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new $u(...t.split(`.`))._internalPath}catch{throw Td(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Td(e,t,n,r,i){let a=r&&!r.isEmpty(),o=i!==void 0,s=`Function ${t}() called with invalid data`;n&&(s+=" (via `toFirestore()`)"),s+=`. `;let c=``;return(a||o)&&(c+=` (found`,a&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=`)`),new F(P.INVALID_ARGUMENT,s+e+c)}function Ed(e,t){return e.some((e=>e.isEqual(t)))}var Dd=class{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Vu(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Od(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(kd(`DocumentSnapshot.get`,e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Od=class extends Dd{data(){return super.data()}};function kd(e,t){return typeof t==`string`?wd(e,t):t instanceof $u?t._internalPath:t._delegate._internalPath}function Ad(e){if(e.limitType===`L`&&e.explicitOrderBy.length===0)throw new F(P.UNIMPLEMENTED,`limitToLast() queries require specifying at least one orderBy() clause`)}var jd=class{},Md=class extends jd{};function Nd(e,t,...n){let r=[];t instanceof jd&&r.push(t),r=r.concat(n),function(e){let t=e.filter((e=>e instanceof Fd)).length,n=e.filter((e=>e instanceof Pd)).length;if(t>1||t>0&&n>0)throw new F(P.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let t of r)e=t._apply(e);return e}var Pd=class e extends Md{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type=`where`}static _create(t,n,r){return new e(t,n,r)}_apply(e){let t=this._parse(e);return Hd(e._query,t),new Bu(e.firestore,e.converter,Ea(e._query,t))}_parse(e){let t=ld(e.firestore);return function(e,t,n,r,i,a,o){let s;if(i.isKeyField()){if(a===`array-contains`||a===`array-contains-any`)throw new F(P.INVALID_ARGUMENT,`Invalid Query. You can't perform '${a}' queries on documentId().`);if(a===`in`||a===`not-in`){Vd(o,a);let t=[];for(let n of o)t.push(Bd(r,e,n));s={arrayValue:{values:t}}}else s=Bd(r,e,o)}else a!==`in`&&a!==`not-in`&&a!==`array-contains-any`||Vd(o,a),s=vd(n,t,o,a===`in`||a===`not-in`);return Zi.create(i,a,s)}(e._query,`where`,t,e.firestore._databaseId,this._field,this._op,this._value)}},Fd=class e extends jd{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(t,n){return new e(t,n)}_parse(e){let t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return t.length===1?t[0]:Qi.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(e,t){let n=e,r=t.getFlattenedFilters();for(let e of r)Hd(n,e),n=Ea(n,e)}(e._query,t),new Bu(e.firestore,e.converter,Ea(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type===`and`?`and`:`or`}},Id=class e extends Md{constructor(e,t){super(),this._field=e,this._direction=t,this.type=`orderBy`}static _create(t,n){return new e(t,n)}_apply(e){let t=function(e,t,n){if(e.startAt!==null)throw new F(P.INVALID_ARGUMENT,`Invalid query. You must not call startAt() or startAfter() before calling orderBy().`);if(e.endAt!==null)throw new F(P.INVALID_ARGUMENT,`Invalid query. You must not call endAt() or endBefore() before calling orderBy().`);return new Ji(t,n)}(e._query,this._field,this._direction);return new Bu(e.firestore,e.converter,function(e,t){let n=e.explicitOrderBy.concat([t]);return new va(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}};function Ld(e,t=`asc`){let n=t,r=kd(`orderBy`,e);return Id._create(r,n)}var Rd=class e extends Md{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(t,n,r){return new e(t,n,r)}_apply(e){return new Bu(e.firestore,e.converter,Da(e._query,this._limit,this._limitType))}};function zd(e){return Cr(`limit`,e),Rd._create(`limit`,e,`F`)}function Bd(e,t,n){if(typeof(n=Ne(n))==`string`){if(n===``)throw new F(P.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.`);if(!Sa(t)&&n.indexOf(`/`)!==-1)throw new F(P.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=t.path.child(pr.fromString(n));if(!L.isDocumentKey(r))throw new F(P.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return B(e,new L(r))}if(n instanceof Vu)return B(e,n._key);throw new F(P.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xr(n)}.`)}function Vd(e,t){if(!Array.isArray(e)||e.length===0)throw new F(P.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Hd(e,t){let n=function(e,t){for(let n of e)for(let e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case`!=`:return[`!=`,`not-in`];case`array-contains-any`:case`in`:return[`not-in`];case`not-in`:return[`array-contains-any`,`in`,`not-in`,`!=`];default:return[]}}(t.op));if(n!==null)throw n===t.op?new F(P.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new F(P.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}var Ud=class{convertValue(e,t=`none`){switch(Ti(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ci(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(li(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw j(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t=`none`){let n={};return Xr(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertVectorValue(e){let t=e.fields?.[wi].arrayValue?.values?.map((e=>ci(e.doubleValue)));return new nd(t)}convertGeoPoint(e){return new td(ci(e.latitude),ci(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case`previous`:let n=hi(e);return n==null?null:this.convertValue(n,t);case`estimate`:return this.convertTimestamp(gi(e));default:return null}}convertTimestamp(e){let t=si(e);return new Or(t.seconds,t.nanos)}convertDocumentKey(e,t){let n=pr.fromString(e);M(ks(n),9688,{name:e});let r=new yi(n.get(1),n.get(3)),i=new L(n.popFirst(5));return r.isEqual(t)||Gn(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}};function Wd(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}var Gd=class extends Ud{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qu(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Vu(this.firestore,null,t)}},Kd=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},qd=class e extends Dd{constructor(e,t,n,r,i,a){super(e,t,n,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Jd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let n=this._document.data.field(kd(`DocumentSnapshot.get`,e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new F(P.FAILED_PRECONDITION,`DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().`);let t=this._document,n={};return n.type=e._jsonSchemaVersion,n.bundle=``,n.bundleSource=`DocumentSnapshot`,n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,`previous`),n.bundle=(this._firestore,this.ref.path,`NOT SUPPORTED`),n)}};qd._jsonSchemaVersion=`firestore/documentSnapshot/1.0`,qd._jsonSchema={type:wr(`string`,qd._jsonSchemaVersion),bundleSource:wr(`string`,`DocumentSnapshot`),bundleName:wr(`string`),bundle:wr(`string`)};var Jd=class extends qd{data(e={}){return super.data(e)}},Yd=class e{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Kd(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){let e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Jd(this._firestore,this._userDataWriter,n.key,n,new Kd(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new F(P.INVALID_ARGUMENT,`To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().`);return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{let r=new Jd(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Kd(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:`added`,doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||e.type!==3)).map((t=>{let r=new Jd(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Kd(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return t.type!==0&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),t.type!==1&&(n=n.add(t.doc),a=n.indexOf(t.doc.key)),{type:Xd(t.type),doc:r,oldIndex:i,newIndex:a}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new F(P.FAILED_PRECONDITION,`QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().`);let t={};t.type=e._jsonSchemaVersion,t.bundleSource=`QuerySnapshot`,t.bundleName=ar.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach((e=>{e._document!==null&&(n.push(e._document),r.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,`previous`)),i.push(e.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,`NOT SUPPORTED`),t}};function Xd(e){switch(e){case 0:return`added`;case 2:case 3:return`modified`;case 1:return`removed`;default:return j(61501,{type:e})}}function Zd(e){e=Sr(e,Vu);let t=Sr(e.firestore,Ju);return Mu(Xu(t),e._key).then((n=>of(t,e,n)))}Yd._jsonSchemaVersion=`firestore/querySnapshot/1.0`,Yd._jsonSchema={type:wr(`string`,Yd._jsonSchemaVersion),bundleSource:wr(`string`,`QuerySnapshot`),bundleName:wr(`string`),bundle:wr(`string`)};var Qd=class extends Ud{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qu(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Vu(this.firestore,null,t)}};function $d(e,t,n){e=Sr(e,Vu);let r=Sr(e.firestore,Ju),i=Wd(e.converter,t,n);return af(r,[ud(ld(r),`setDoc`,e._key,i,e.converter!==null,n).toMutation(e._key,U.none())])}function ef(e,t,n,...r){e=Sr(e,Vu);let i=Sr(e.firestore,Ju),a=ld(i),o;return o=typeof(t=Ne(t))==`string`||t instanceof $u?_d(a,`updateDoc`,e._key,t,n,r):gd(a,`updateDoc`,e._key,t),af(i,[o.toMutation(e._key,U.exists(!0))])}function tf(e){return af(Sr(e.firestore,Ju),[new wo(e._key,U.none())])}function nf(e,t){let n=Sr(e.firestore,Ju),r=J(e),i=Wd(e.converter,t);return af(n,[ud(ld(e.firestore),`addDoc`,r._key,i,e.converter!==null,{}).toMutation(r._key,U.exists(!1))]).then((()=>r))}function rf(e,...t){e=Ne(e);let n={includeMetadataChanges:!1,source:`default`},r=0;typeof t[r]!=`object`||qu(t[r])||(n=t[r++]);let i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(qu(t[r])){let e=t[r];t[r]=e.next?.bind(e),t[r+1]=e.error?.bind(e),t[r+2]=e.complete?.bind(e)}let a,o,s;if(e instanceof Vu)o=Sr(e.firestore,Ju),s=ba(e._key.path),a={next:n=>{t[r]&&t[r](of(o,e,n))},error:t[r+1],complete:t[r+2]};else{let n=Sr(e,Bu);o=Sr(n.firestore,Ju),s=n._query;let i=new Qd(o);a={next:e=>{t[r]&&t[r](new Yd(o,i,n,e))},error:t[r+1],complete:t[r+2]},Ad(e._query)}return function(e,t,n,r){let i=new bu(r),a=new K(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>Pl(await ju(e),a))),()=>{i.Nu(),e.asyncQueue.enqueueAndForget((async()=>Fl(await ju(e),a)))}}(Xu(o),s,i,a)}function af(e,t){return function(e,t){let n=new Yn;return e.asyncQueue.enqueueAndForget((async()=>$l(await ku(e),t,n))),n.promise}(Xu(e),t)}function of(e,t,n){let r=n.docs.get(t._key);return new qd(e,new Qd(e),t._key,r,new Kd(n.hasPendingWrites,n.fromCache),t.converter)}var sf={maxAttempts:5};function cf(e,t){if((e=Ne(e)).firestore!==t)throw new F(P.INVALID_ARGUMENT,`Provided document reference is from a different Firestore instance.`);return e}var lf=class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ld(e)}get(e){let t=cf(e,this._firestore),n=new Gd(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||e.length!==1)return j(24041);let r=e[0];if(r.isFoundDocument())return new Dd(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new Dd(this._firestore,n,t._key,null,t.converter);throw j(18433,{doc:r})}))}set(e,t,n){let r=cf(e,this._firestore),i=Wd(r.converter,t,n),a=ud(this._dataReader,`Transaction.set`,r._key,i,r.converter!==null,n);return this._transaction.set(r._key,a),this}update(e,t,n,...r){let i=cf(e,this._firestore),a;return a=typeof(t=Ne(t))==`string`||t instanceof $u?_d(this._dataReader,`Transaction.update`,i._key,t,n,r):gd(this._dataReader,`Transaction.update`,i._key,t),this._transaction.update(i._key,a),this}delete(e){let t=cf(e,this._firestore);return this._transaction.delete(t._key),this}},uf=class extends lf{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=cf(e,this._firestore),n=new Qd(this._firestore);return super.get(e).then((e=>new qd(this._firestore,n,t._key,e._document,new Kd(!1,!1),t.converter)))}};function df(e,t,n){e=Sr(e,Ju);let r={...sf,...n};return(function(e){if(e.maxAttempts<1)throw new F(P.INVALID_ARGUMENT,`Max attempts must be at least 1`)})(r),function(e,t,n){let r=new Yn;return e.asyncQueue.enqueueAndForget((async()=>{let i=await Au(e);new Su(e.asyncQueue,i,n,t,r).ju()})),r.promise}(Xu(e),(n=>t(new uf(e,n))),r)}function ff(){return new pd(`serverTimestamp`)}function pf(...e){return new md(`arrayUnion`,e)}function mf(...e){return new hd(`arrayRemove`,e)}(function(e,t=!0){(function(e){Hn=e})(rn),Qt(new Pe(`firestore`,((e,{instanceIdentifier:n,options:r})=>{let i=e.getProvider(`app`).getImmediate(),a=new Ju(new $n(e.getProvider(`auth-internal`)),new rr(i,e.getProvider(`app-check-internal`)),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,[`projectId`]))throw new F(P.INVALID_ARGUMENT,`"projectId" not provided in firebase.initializeApp.`);return new yi(e.options.projectId,t)}(i,n),i);return r={useFetchStreams:t,...r},a._setSettings(r),a}),`PUBLIC`).setMultipleInstances(!0)),sn(zn,Bn,e),sn(zn,Bn,`esm2020`)})();function hf(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var gf=hf,_f=new be(`auth`,`Firebase`,hf()),vf=new Ge(`@firebase/auth`);function yf(e,...t){vf.logLevel<=O.WARN&&vf.warn(`Auth (${rn}): ${e}`,...t)}function bf(e,...t){vf.logLevel<=O.ERROR&&vf.error(`Auth (${rn}): ${e}`,...t)}function xf(e,...t){throw Tf(e,...t)}function Sf(e,...t){return Tf(e,...t)}function Cf(e,t,n){return new be(`auth`,`Firebase`,{...gf(),[t]:n}).create(t,{appName:e.name})}function wf(e){return Cf(e,`operation-not-supported-in-this-environment`,`Operations that alter the current user are not supported in conjunction with FirebaseServerApp`)}function Tf(e,...t){if(typeof e!=`string`){let n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return _f.create(e,...t)}function X(e,t,...n){if(!e)throw Tf(t,...n)}function Ef(e){let t=`INTERNAL ASSERTION FAILED: `+e;throw bf(t),Error(t)}function Df(e,t){e||Ef(t)}function Of(){return typeof self<`u`&&self.location?.href||``}function kf(){return Af()===`http:`||Af()===`https:`}function Af(){return typeof self<`u`&&self.location?.protocol||null}function jf(){return typeof navigator<`u`&&navigator&&`onLine`in navigator&&typeof navigator.onLine==`boolean`&&(kf()||fe()||`connection`in navigator)?navigator.onLine:!0}function Mf(){if(typeof navigator>`u`)return null;let e=navigator;return e.languages&&e.languages[0]||e.language||null}var Nf=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Df(t>e,`Short delay should be less than long delay!`),this.isMobile=D()||pe()}get(){return jf()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Pf(e,t){Df(e.emulator,`Emulator should always be set here`);let{url:n}=e.emulator;return t?`${n}${t.startsWith(`/`)?t.slice(1):t}`:n}var Ff=class{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<`u`&&`fetch`in self)return self.fetch;if(typeof globalThis<`u`&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<`u`)return fetch;Ef(`Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill`)}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<`u`&&`Headers`in self)return self.Headers;if(typeof globalThis<`u`&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<`u`)return Headers;Ef(`Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill`)}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<`u`&&`Response`in self)return self.Response;if(typeof globalThis<`u`&&globalThis.Response)return globalThis.Response;if(typeof Response<`u`)return Response;Ef(`Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill`)}},If={CREDENTIAL_MISMATCH:`custom-token-mismatch`,MISSING_CUSTOM_TOKEN:`internal-error`,INVALID_IDENTIFIER:`invalid-email`,MISSING_CONTINUE_URI:`internal-error`,INVALID_PASSWORD:`wrong-password`,MISSING_PASSWORD:`missing-password`,INVALID_LOGIN_CREDENTIALS:`invalid-credential`,EMAIL_EXISTS:`email-already-in-use`,PASSWORD_LOGIN_DISABLED:`operation-not-allowed`,INVALID_IDP_RESPONSE:`invalid-credential`,INVALID_PENDING_TOKEN:`invalid-credential`,FEDERATED_USER_ID_ALREADY_LINKED:`credential-already-in-use`,MISSING_REQ_TYPE:`internal-error`,EMAIL_NOT_FOUND:`user-not-found`,RESET_PASSWORD_EXCEED_LIMIT:`too-many-requests`,EXPIRED_OOB_CODE:`expired-action-code`,INVALID_OOB_CODE:`invalid-action-code`,MISSING_OOB_CODE:`internal-error`,CREDENTIAL_TOO_OLD_LOGIN_AGAIN:`requires-recent-login`,INVALID_ID_TOKEN:`invalid-user-token`,TOKEN_EXPIRED:`user-token-expired`,USER_NOT_FOUND:`user-token-expired`,TOO_MANY_ATTEMPTS_TRY_LATER:`too-many-requests`,PASSWORD_DOES_NOT_MEET_REQUIREMENTS:`password-does-not-meet-requirements`,INVALID_CODE:`invalid-verification-code`,INVALID_SESSION_INFO:`invalid-verification-id`,INVALID_TEMPORARY_PROOF:`invalid-credential`,MISSING_SESSION_INFO:`missing-verification-id`,SESSION_EXPIRED:`code-expired`,MISSING_ANDROID_PACKAGE_NAME:`missing-android-pkg-name`,UNAUTHORIZED_DOMAIN:`unauthorized-continue-uri`,INVALID_OAUTH_CLIENT_ID:`invalid-oauth-client-id`,ADMIN_ONLY_OPERATION:`admin-restricted-operation`,INVALID_MFA_PENDING_CREDENTIAL:`invalid-multi-factor-session`,MFA_ENROLLMENT_NOT_FOUND:`multi-factor-info-not-found`,MISSING_MFA_ENROLLMENT_ID:`missing-multi-factor-info`,MISSING_MFA_PENDING_CREDENTIAL:`missing-multi-factor-session`,SECOND_FACTOR_EXISTS:`second-factor-already-in-use`,SECOND_FACTOR_LIMIT_EXCEEDED:`maximum-second-factor-count-exceeded`,BLOCKING_FUNCTION_ERROR_RESPONSE:`internal-error`,RECAPTCHA_NOT_ENABLED:`recaptcha-not-enabled`,MISSING_RECAPTCHA_TOKEN:`missing-recaptcha-token`,INVALID_RECAPTCHA_TOKEN:`invalid-recaptcha-token`,INVALID_RECAPTCHA_ACTION:`invalid-recaptcha-action`,MISSING_CLIENT_TYPE:`missing-client-type`,MISSING_RECAPTCHA_VERSION:`missing-recaptcha-version`,INVALID_RECAPTCHA_VERSION:`invalid-recaptcha-version`,INVALID_REQ_TYPE:`invalid-req-type`},Lf=[`/v1/accounts:signInWithCustomToken`,`/v1/accounts:signInWithEmailLink`,`/v1/accounts:signInWithIdp`,`/v1/accounts:signInWithPassword`,`/v1/accounts:signInWithPhoneNumber`,`/v1/token`],Rf=new Nf(3e4,6e4);function zf(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function Bf(e,t,n,r,i={}){return Vf(e,i,async()=>{let i={},a={};r&&(t===`GET`?a=r:i={body:JSON.stringify(r)});let o=Ee({key:e.config.apiKey,...a}).slice(1),s=await e._getAdditionalHeaders();s[`Content-Type`]=`application/json`,e.languageCode&&(s[`X-Firebase-Locale`]=e.languageCode);let c={method:t,headers:s,...i};return de()||(c.referrerPolicy=`no-referrer`),e.emulatorConfig&&re(e.emulatorConfig.host)&&(c.credentials=`include`),Ff.fetch()(await Uf(e,e.config.apiHost,n,o),c)})}async function Vf(e,t,n){e._canInitEmulator=!1;let r={...If,...t};try{let t=new Gf(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();let a=await i.json();if(`needConfirmation`in a)throw Kf(e,`account-exists-with-different-credential`,a);if(i.ok&&!(`errorMessage`in a))return a;{let[t,n]=(i.ok?a.errorMessage:a.error.message).split(` : `);if(t===`FEDERATED_USER_ID_ALREADY_LINKED`)throw Kf(e,`credential-already-in-use`,a);if(t===`EMAIL_EXISTS`)throw Kf(e,`email-already-in-use`,a);if(t===`USER_DISABLED`)throw Kf(e,`user-disabled`,a);let o=r[t]||t.toLowerCase().replace(/[_\s]+/g,`-`);if(n)throw Cf(e,o,n);xf(e,o)}}catch(t){if(t instanceof ye)throw t;xf(e,`network-request-failed`,{message:String(t)})}}async function Hf(e,t,n,r,i={}){let a=await Bf(e,t,n,r,i);return`mfaPendingCredential`in a&&xf(e,`multi-factor-auth-required`,{_serverResponse:a}),a}async function Uf(e,t,n,r){let i=`${t}${n}?${r}`,a=e,o=a.config.emulator?Pf(e.config,i):`${e.config.apiScheme}://${i}`;return Lf.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()===`COOKIE`)?a._getPersistence()._getFinalTarget(o).toString():o}function Wf(e){switch(e){case`ENFORCE`:return`ENFORCE`;case`AUDIT`:return`AUDIT`;case`OFF`:return`OFF`;default:return`ENFORCEMENT_STATE_UNSPECIFIED`}}var Gf=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Sf(this.auth,`network-request-failed`)),Rf.get())})}};function Kf(e,t,n){let r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Sf(e,t,r);return i.customData._tokenResponse=n,i}function qf(e){return e!==void 0&&e.enterprise!==void 0}var Jf=class{constructor(e){if(this.siteKey=``,this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw Error(`recaptchaKey undefined`);this.siteKey=e.recaptchaKey.split(`/`)[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Wf(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)===`ENFORCE`||this.getProviderEnforcementState(e)===`AUDIT`}isAnyProviderEnabled(){return this.isProviderEnabled(`EMAIL_PASSWORD_PROVIDER`)||this.isProviderEnabled(`PHONE_PROVIDER`)}};async function Yf(e,t){return Bf(e,`GET`,`/v2/recaptchaConfig`,zf(e,t))}async function Xf(e,t){return Bf(e,`POST`,`/v1/accounts:delete`,t)}async function Zf(e,t){return Bf(e,`POST`,`/v1/accounts:lookup`,t)}function Qf(e){if(e)try{let t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function $f(e,t=!1){let n=Ne(e),r=await n.getIdToken(t),i=tp(r);X(i&&i.exp&&i.auth_time&&i.iat,n.auth,`internal-error`);let a=typeof i.firebase==`object`?i.firebase:void 0,o=a?.sign_in_provider;return{claims:i,token:r,authTime:Qf(ep(i.auth_time)),issuedAtTime:Qf(ep(i.iat)),expirationTime:Qf(ep(i.exp)),signInProvider:o||null,signInSecondFactor:a?.sign_in_second_factor||null}}function ep(e){return Number(e)*1e3}function tp(e){let[t,n,r]=e.split(`.`);if(t===void 0||n===void 0||r===void 0)return bf(`JWT malformed, contained fewer than 3 sections`),null;try{let e=_(n);return e?JSON.parse(e):(bf(`Failed to decode base64 JWT payload`),null)}catch(e){return bf(`Caught error parsing JWT payload as JSON`,e?.toString()),null}}function np(e){let t=tp(e);return X(t,`internal-error`),X(t.exp!==void 0,`internal-error`),X(t.iat!==void 0,`internal-error`),Number(t.exp)-Number(t.iat)}async function rp(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof ye&&ip(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}function ip({code:e}){return e===`auth/user-disabled`||e===`auth/user-token-expired`}var ap=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;let e=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code===`auth/network-request-failed`&&this.schedule(!0);return}this.schedule()}},op=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qf(this.lastLoginAt),this.creationTime=Qf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function sp(e){let t=e.auth,n=await rp(e,Zf(t,{idToken:await e.getIdToken()}));X(n?.users.length,t,`internal-error`);let r=n.users[0];e._notifyReloadListener(r);let i=r.providerUserInfo?.length?up(r.providerUserInfo):[],a=lp(e.providerData,i),o=e.isAnonymous,s=!(e.email&&r.passwordHash)&&!a?.length,c=o?s:!1,l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new op(r.createdAt,r.lastLoginAt),isAnonymous:c};Object.assign(e,l)}async function cp(e){let t=Ne(e);await sp(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function lp(e,t){return[...e.filter(e=>!t.some(t=>t.providerId===e.providerId)),...t]}function up(e){return e.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||``,displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function dp(e,t){let n=await Vf(e,{},async()=>{let n=Ee({grant_type:`refresh_token`,refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,a=await Uf(e,r,`/v1/token`,`key=${i}`),o=await e._getAdditionalHeaders();o[`Content-Type`]=`application/x-www-form-urlencoded`;let s={method:`POST`,headers:o,body:n};return e.emulatorConfig&&re(e.emulatorConfig.host)&&(s.credentials=`include`),Ff.fetch()(a,s)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function fp(e,t){return Bf(e,`POST`,`/v2/accounts:revokeToken`,zf(e,t))}var pp=class e{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){X(e.idToken,`internal-error`),X(e.idToken!==void 0,`internal-error`),X(e.refreshToken!==void 0,`internal-error`);let t=`expiresIn`in e&&e.expiresIn!==void 0?Number(e.expiresIn):np(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){X(e.length!==0,`internal-error`);let t=np(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(X(this.refreshToken,e,`user-token-expired`),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:n,refreshToken:r,expiresIn:i}=await dp(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(t,n){let{refreshToken:r,accessToken:i,expirationTime:a}=n,o=new e;return r&&(X(typeof r==`string`,`internal-error`,{appName:t}),o.refreshToken=r),i&&(X(typeof i==`string`,`internal-error`,{appName:t}),o.accessToken=i),a&&(X(typeof a==`number`,`internal-error`,{appName:t}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new e,this.toJSON())}_performRefresh(){return Ef(`not implemented`)}};function mp(e,t){X(typeof e==`string`||e===void 0,`internal-error`,{appName:t})}var hp=class e{constructor({uid:e,auth:t,stsTokenManager:n,...r}){this.providerId=`firebase`,this.proactiveRefresh=new ap(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new op(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){let t=await rp(this,this.stsTokenManager.getToken(this.auth,e));return X(t,this.auth,`internal-error`),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return $f(this,e)}reload(){return cp(this)}_assign(e){this!==e&&(X(this.uid===e.uid,this.auth,`internal-error`),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>({...e})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(t){let n=new e({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){X(!this.reloadListener,this.auth,`internal-error`),this.reloadListener=e,this.reloadUserInfo&&=(this._notifyReloadListener(this.reloadUserInfo),null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await sp(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(en(this.auth.app))return Promise.reject(wf(this.auth));let e=await this.getIdToken();return await rp(this,Xf(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||``}static _fromJSON(t,n){let r=n.displayName??void 0,i=n.email??void 0,a=n.phoneNumber??void 0,o=n.photoURL??void 0,s=n.tenantId??void 0,c=n._redirectEventId??void 0,l=n.createdAt??void 0,u=n.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:p,providerData:m,stsTokenManager:h}=n;X(d&&h,t,`internal-error`);let g=pp.fromJSON(this.name,h);X(typeof d==`string`,t,`internal-error`),mp(r,t.name),mp(i,t.name),X(typeof f==`boolean`,t,`internal-error`),X(typeof p==`boolean`,t,`internal-error`),mp(a,t.name),mp(o,t.name),mp(s,t.name),mp(c,t.name),mp(l,t.name),mp(u,t.name);let _=new e({uid:d,auth:t,email:i,emailVerified:f,displayName:r,isAnonymous:p,photoURL:o,phoneNumber:a,tenantId:s,stsTokenManager:g,createdAt:l,lastLoginAt:u});return m&&Array.isArray(m)&&(_.providerData=m.map(e=>({...e}))),c&&(_._redirectEventId=c),_}static async _fromIdTokenResponse(t,n,r=!1){let i=new pp;i.updateFromServerResponse(n);let a=new e({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await sp(a),a}static async _fromGetAccountInfoResponse(t,n,r){let i=n.users[0];X(i.localId!==void 0,`internal-error`);let a=i.providerUserInfo===void 0?[]:up(i.providerUserInfo),o=!(i.email&&i.passwordHash)&&!a?.length,s=new pp;s.updateFromIdToken(r);let c=new e({uid:i.localId,auth:t,stsTokenManager:s,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new op(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(c,l),c}},gp=new Map;function _p(e){Df(e instanceof Function,`Expected a class definition`);let t=gp.get(e);return t?(Df(t instanceof e,`Instance stored in cache mismatched with class`),t):(t=new e,gp.set(e,t),t)}var vp=class{constructor(){this.type=`NONE`,this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){let t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}};vp.type=`NONE`;var yp=vp;function bp(e,t,n){return`firebase:${e}:${t}:${n}`}var xp=class e{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;let{config:r,name:i}=this.auth;this.fullUserKey=bp(this.userKey,r.apiKey,i),this.fullPersistenceKey=bp(`persistence`,r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e==`string`){let t=await Zf(this.auth,{idToken:e}).catch(()=>void 0);return t?hp._fromGetAccountInfoResponse(this.auth,t,e):null}return hp._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r=`authUser`){if(!n.length)return new e(_p(yp),t,r);let i=(await Promise.all(n.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e),a=i[0]||_p(yp),o=bp(r,t.config.apiKey,t.name),s=null;for(let e of n)try{let n=await e._get(o);if(n){let r;if(typeof n==`string`){let e=await Zf(t,{idToken:n}).catch(()=>void 0);if(!e)break;r=await hp._fromGetAccountInfoResponse(t,e,n)}else r=hp._fromJSON(t,n);e!==a&&(s=r),a=e;break}}catch{}let c=i.filter(e=>e._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new e(a,t,r):(a=c[0],s&&await a._set(o,s.toJSON()),await Promise.all(n.map(async e=>{if(e!==a)try{await e._remove(o)}catch{}})),new e(a,t,r))}};function Sp(e){let t=e.toLowerCase();if(t.includes(`opera/`)||t.includes(`opr/`)||t.includes(`opios/`))return`Opera`;if(Ep(t))return`IEMobile`;if(t.includes(`msie`)||t.includes(`trident/`))return`IE`;if(t.includes(`edge/`))return`Edge`;if(Cp(t))return`Firefox`;if(t.includes(`silk/`))return`Silk`;if(Op(t))return`Blackberry`;if(kp(t))return`Webos`;if(wp(t))return`Safari`;if((t.includes(`chrome/`)||Tp(t))&&!t.includes(`edge/`))return`Chrome`;if(Dp(t))return`Android`;{let t=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(t?.length===2)return t[1]}return`Other`}function Cp(e=E()){return/firefox\//i.test(e)}function wp(e=E()){let t=e.toLowerCase();return t.includes(`safari/`)&&!t.includes(`chrome/`)&&!t.includes(`crios/`)&&!t.includes(`android`)}function Tp(e=E()){return/crios\//i.test(e)}function Ep(e=E()){return/iemobile/i.test(e)}function Dp(e=E()){return/android/i.test(e)}function Op(e=E()){return/blackberry/i.test(e)}function kp(e=E()){return/webos/i.test(e)}function Ap(e=E()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function jp(e=E()){return Ap(e)&&!!window.navigator?.standalone}function Mp(){return me()&&document.documentMode===10}function Np(e=E()){return Ap(e)||Dp(e)||kp(e)||Op(e)||/windows phone/i.test(e)||Ep(e)}function Pp(e,t=[]){let n;switch(e){case`Browser`:n=Sp(E());break;case`Worker`:n=`${Sp(E())}-${e}`;break;default:n=e}let r=t.length?t.join(`,`):`FirebaseCore-web`;return`${n}/JsCore/${rn}/${r}`}var Fp=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let n=t=>new Promise((n,r)=>{try{n(e(t))}catch(e){r(e)}});n.onAbort=t,this.queue.push(n);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(e){t.reverse();for(let e of t)try{e()}catch{}throw this.auth._errorFactory.create(`login-blocked`,{originalMessage:e?.message})}}};async function Ip(e,t={}){return Bf(e,`GET`,`/v2/passwordPolicy`,zf(e,t))}var Lp=6,Rp=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Lp,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState===`ENFORCEMENT_STATE_UNSPECIFIED`&&(this.enforcementState=`OFF`),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join(``)??``,this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&=t.meetsMinPasswordLength??!0,t.isValid&&=t.meetsMaxPasswordLength??!0,t.isValid&&=t.containsLowercaseLetter??!0,t.isValid&&=t.containsUppercaseLetter??!0,t.isValid&&=t.containsNumericCharacter??!0,t.isValid&&=t.containsNonAlphanumericCharacter??!0,t}validatePasswordLengthOptions(e,t){let n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>=`a`&&n<=`z`,n>=`A`&&n<=`Z`,n>=`0`&&n<=`9`,this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||=t),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||=n),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||=r),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||=i)}},zp=class{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Vp(this),this.idTokenSubscription=new Vp(this),this.beforeStateQueue=new Fp(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_f,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=_p(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await xp.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await Zf(this,{idToken:e}),n=await hp._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(e){console.warn(`FirebaseServerApp could not login user with provided authIdToken: `,e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(en(this.app)){let e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}let t=await this.assertedPersistence.getCurrentUser(),n=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let t=this.redirectUser?._redirectEventId,i=n?._redirectEventId,a=await this.tryRedirectSignIn(e);(!t||t===i)&&a?.user&&(n=a.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(e){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(e))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return X(this._popupRedirectResolver,this,`argument-error`),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await sp(e)}catch(e){if(e?.code!==`auth/network-request-failed`)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Mf()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(en(this.app))return Promise.reject(wf(this));let t=e?Ne(e):null;return t&&X(t.auth.config.apiKey===this.config.apiKey,this,`invalid-user-token`),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&X(this.tenantId===e.tenantId,this,`tenant-id-mismatch`),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return en(this.app)?Promise.reject(wf(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return en(this.app)?Promise.reject(wf(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_p(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion===this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?t.validatePassword(e):Promise.reject(this._errorFactory.create(`unsupported-password-policy-schema-version`,{}))}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=new Rp(await Ip(this));this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new be(`auth`,`Firebase`,e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t={providerId:`apple.com`,tokenType:`ACCESS_TOKEN`,token:e,idToken:await this.currentUser.getIdToken()};this.tenantId!=null&&(t.tenantId=this.tenantId),await fp(this,t)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){let n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&_p(e)||this._popupRedirectResolver;X(t,this,`argument-error`),this.redirectPersistenceManager=await xp.create(this,[_p(t._redirectPersistence)],`redirectUser`),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};let i=typeof t==`function`?t:t.next.bind(t),a=!1,o=this._isInitialized?Promise.resolve():this._initializationPromise;if(X(o,this,`internal-error`),o.then(()=>{a||i(this.currentUser)}),typeof t==`function`){let i=e.addObserver(t,n,r);return()=>{a=!0,i()}}else{let n=e.addObserver(t);return()=>{a=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return X(this.persistenceManager,this,`internal-error`),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Pp(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e[`X-Firebase-gmpid`]=this.app.options.appId);let t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e[`X-Firebase-Client`]=t);let n=await this._getAppCheckToken();return n&&(e[`X-Firebase-AppCheck`]=n),e}async _getAppCheckToken(){if(en(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&yf(`Error while retrieving App Check token: ${e.error}`),e?.token}};function Bp(e){return Ne(e)}var Vp=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=ke(e=>this.observer=e)}get next(){return X(this.observer,this.auth,`internal-error`),this.observer.next.bind(this.observer)}},Hp={async loadJS(){throw Error(`Unable to load external scripts`)},recaptchaV2Script:``,recaptchaEnterpriseScript:``,gapiScript:``};function Up(e){Hp=e}function Wp(e){return Hp.loadJS(e)}function Gp(){return Hp.recaptchaEnterpriseScript}function Kp(){return Hp.gapiScript}function qp(e){return`__${e}${Math.floor(Math.random()*1e6)}`}var Jp=class{constructor(){this.enterprise=new Yp}ready(e){e()}execute(e,t){return Promise.resolve(`token`)}render(e,t){return``}},Yp=class{ready(e){e()}execute(e,t){return Promise.resolve(`token`)}render(e,t){return``}},Xp=`recaptcha-enterprise`,Zp=`NO_RECAPTCHA`,Qp=class{constructor(e){this.type=Xp,this.auth=Bp(e)}async verify(e=`verify`,t=!1){async function n(e){if(!t){if(e.tenantId==null&&e._agentRecaptchaConfig!=null)return e._agentRecaptchaConfig.siteKey;if(e.tenantId!=null&&e._tenantRecaptchaConfigs[e.tenantId]!==void 0)return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{Yf(e,{clientType:`CLIENT_TYPE_WEB`,version:`RECAPTCHA_ENTERPRISE`}).then(r=>{if(r.recaptchaKey===void 0)n(Error(`recaptcha Enterprise site key undefined`));else{let n=new Jf(r);return e.tenantId==null?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}}).catch(e=>{n(e)})})}function r(t,n,r){let i=window.grecaptcha;qf(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(Zp)})}):r(Error(`No reCAPTCHA enterprise script loaded.`))}return this.auth.settings.appVerificationDisabledForTesting?new Jp().execute(`siteKey`,{action:`verify`}):new Promise((e,i)=>{n(this.auth).then(n=>{if(!t&&qf(window.grecaptcha))r(n,e,i);else{if(typeof window>`u`){i(Error(`RecaptchaVerifier is only supported in browser`));return}let t=Gp();t.length!==0&&(t+=n),Wp(t).then(()=>{r(n,e,i)}).catch(e=>{i(e)})}}).catch(e=>{i(e)})})}};async function $p(e,t,n,r=!1,i=!1){let a=new Qp(e),o;if(i)o=Zp;else try{o=await a.verify(n)}catch{o=await a.verify(n,!0)}let s={...t};if(n===`mfaSmsEnrollment`||n===`mfaSmsSignIn`){if(`phoneEnrollmentInfo`in s){let e=s.phoneEnrollmentInfo.phoneNumber,t=s.phoneEnrollmentInfo.recaptchaToken;Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:`CLIENT_TYPE_WEB`,recaptchaVersion:`RECAPTCHA_ENTERPRISE`}})}else if(`phoneSignInInfo`in s){let e=s.phoneSignInInfo.recaptchaToken;Object.assign(s,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:`CLIENT_TYPE_WEB`,recaptchaVersion:`RECAPTCHA_ENTERPRISE`}})}return s}return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:`CLIENT_TYPE_WEB`}),Object.assign(s,{recaptchaVersion:`RECAPTCHA_ENTERPRISE`}),s}async function em(e,t,n,r,i){return i===`EMAIL_PASSWORD_PROVIDER`?e._getRecaptchaConfig()?.isProviderEnabled(`EMAIL_PASSWORD_PROVIDER`)?r(e,await $p(e,t,n,n===`getOobCode`)):r(e,t).catch(async i=>i.code===`auth/missing-recaptcha-token`?(console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`),r(e,await $p(e,t,n,n===`getOobCode`))):Promise.reject(i)):i===`PHONE_PROVIDER`?e._getRecaptchaConfig()?.isProviderEnabled(`PHONE_PROVIDER`)?r(e,await $p(e,t,n)).catch(async i=>e._getRecaptchaConfig()?.getProviderEnforcementState(`PHONE_PROVIDER`)===`AUDIT`&&(i.code===`auth/missing-recaptcha-token`||i.code===`auth/invalid-app-credential`)?(console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`),r(e,await $p(e,t,n,!1,!0))):Promise.reject(i)):r(e,await $p(e,t,n,!1,!0)):Promise.reject(i+` provider is not supported.`)}async function tm(e){let t=Bp(e),n=new Jf(await Yf(t,{clientType:`CLIENT_TYPE_WEB`,version:`RECAPTCHA_ENTERPRISE`}));t.tenantId==null?t._agentRecaptchaConfig=n:t._tenantRecaptchaConfigs[t.tenantId]=n,n.isAnyProviderEnabled()&&new Qp(t).verify()}function nm(e,t){let n=$t(e,`auth`);if(n.isInitialized()){let e=n.getImmediate();if(we(n.getOptions(),t??{}))return e;xf(e,`already-initialized`)}return n.initialize({options:t})}function rm(e,t){let n=t?.persistence||[],r=(Array.isArray(n)?n:[n]).map(_p);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t?.popupRedirectResolver)}function im(e,t,n){let r=Bp(e);X(/^https?:\/\//.test(t),r,`invalid-emulator-scheme`);let i=!!n?.disableWarnings,a=am(t),{host:o,port:s}=om(t),c=s===null?``:`:${s}`,l={url:`${a}//${o}${c}/`},u=Object.freeze({host:o,port:s,protocol:a.replace(`:`,``),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){X(r.config.emulator&&r.emulatorConfig,r,`emulator-config-failed`),X(we(l,r.config.emulator)&&we(u,r.emulatorConfig),r,`emulator-config-failed`);return}r.config.emulator=l,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,re(o)?(ie(`${a}//${o}${c}`),le(`Auth`,!0)):i||cm()}function am(e){let t=e.indexOf(`:`);return t<0?``:e.substr(0,t+1)}function om(e){let t=am(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:``,port:null};let r=n[2].split(`@`).pop()||``,i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let e=i[1];return{host:e,port:sm(r.substr(e.length+1))}}else{let[e,t]=r.split(`:`);return{host:e,port:sm(t)}}}function sm(e){if(!e)return null;let t=Number(e);return isNaN(t)?null:t}function cm(){function e(){let e=document.createElement(`p`),t=e.style;e.innerText=`Running in emulator mode. Do not use with production credentials.`,t.position=`fixed`,t.width=`100%`,t.backgroundColor=`#ffffff`,t.border=`.1em solid #000000`,t.color=`#b50000`,t.bottom=`0px`,t.left=`0px`,t.margin=`0px`,t.zIndex=`10000`,t.textAlign=`center`,e.classList.add(`firebase-emulator-warning`),document.body.appendChild(e)}typeof console<`u`&&typeof console.info==`function`&&console.info(`WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.`),typeof window<`u`&&typeof document<`u`&&(document.readyState===`loading`?window.addEventListener(`DOMContentLoaded`,e):e())}var lm=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ef(`not implemented`)}_getIdTokenResponse(e){return Ef(`not implemented`)}_linkToIdToken(e,t){return Ef(`not implemented`)}_getReauthenticationResolver(e){return Ef(`not implemented`)}};async function um(e,t){return Bf(e,`POST`,`/v1/accounts:signUp`,t)}async function dm(e,t){return Hf(e,`POST`,`/v1/accounts:signInWithPassword`,zf(e,t))}async function fm(e,t){return Hf(e,`POST`,`/v1/accounts:signInWithEmailLink`,zf(e,t))}async function pm(e,t){return Hf(e,`POST`,`/v1/accounts:signInWithEmailLink`,zf(e,t))}var mm=class e extends lm{constructor(e,t,n,r=null){super(`password`,n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(t,n){return new e(t,n,`password`)}static _fromEmailAndCode(t,n,r=null){return new e(t,n,`emailLink`,r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e==`string`?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod===`password`)return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod===`emailLink`)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case`password`:return em(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:`CLIENT_TYPE_WEB`},`signInWithPassword`,dm,`EMAIL_PASSWORD_PROVIDER`);case`emailLink`:return fm(e,{email:this._email,oobCode:this._password});default:xf(e,`internal-error`)}}async _linkToIdToken(e,t){switch(this.signInMethod){case`password`:return em(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:`CLIENT_TYPE_WEB`},`signUpPassword`,um,`EMAIL_PASSWORD_PROVIDER`);case`emailLink`:return pm(e,{idToken:t,email:this._email,oobCode:this._password});default:xf(e,`internal-error`)}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};async function hm(e,t){return Hf(e,`POST`,`/v1/accounts:signInWithIdp`,zf(e,t))}var gm=`http://localhost`,_m=class e extends lm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){let n=new e(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):xf(`argument-error`),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){let{providerId:n,signInMethod:r,...i}=typeof t==`string`?JSON.parse(t):t;if(!n||!r)return null;let a=new e(n,r);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){return hm(e,this.buildRequest())}_linkToIdToken(e,t){let n=this.buildRequest();return n.idToken=t,hm(e,n)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,hm(e,t)}buildRequest(){let e={requestUri:gm,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ee(t)}return e}};async function vm(e,t){return Bf(e,`POST`,`/v1/accounts:sendVerificationCode`,zf(e,t))}async function ym(e,t){return Hf(e,`POST`,`/v1/accounts:signInWithPhoneNumber`,zf(e,t))}async function bm(e,t){let n=await Hf(e,`POST`,`/v1/accounts:signInWithPhoneNumber`,zf(e,t));if(n.temporaryProof)throw Kf(e,`account-exists-with-different-credential`,n);return n}var xm={USER_NOT_FOUND:`user-not-found`};async function Sm(e,t){return Hf(e,`POST`,`/v1/accounts:signInWithPhoneNumber`,zf(e,{...t,operation:`REAUTH`}),xm)}var Cm=class e extends lm{constructor(e){super(`phone`,`phone`),this.params=e}static _fromVerification(t,n){return new e({verificationId:t,verificationCode:n})}static _fromTokenResponse(t,n){return new e({phoneNumber:t,temporaryProof:n})}_getIdTokenResponse(e){return ym(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return bm(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return Sm(e,this._makeVerificationRequest())}_makeVerificationRequest(){let{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){let e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(t){typeof t==`string`&&(t=JSON.parse(t));let{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:a}=t;return!r&&!n&&!i&&!a?null:new e({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:a})}};function wm(e){switch(e){case`recoverEmail`:return`RECOVER_EMAIL`;case`resetPassword`:return`PASSWORD_RESET`;case`signIn`:return`EMAIL_SIGNIN`;case`verifyEmail`:return`VERIFY_EMAIL`;case`verifyAndChangeEmail`:return`VERIFY_AND_CHANGE_EMAIL`;case`revertSecondFactorAddition`:return`REVERT_SECOND_FACTOR_ADDITION`;default:return null}}function Tm(e){let t=De(Oe(e)).link,n=t?De(Oe(t)).deep_link_id:null,r=De(Oe(e)).deep_link_id;return(r?De(Oe(r)).link:null)||r||n||t||e}var Em=class e{constructor(e){let t=De(Oe(e)),n=t.apiKey??null,r=t.oobCode??null,i=wm(t.mode??null);X(n&&r&&i,`argument-error`),this.apiKey=n,this.operation=i,this.code=r,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(t){let n=Tm(t);try{return new e(n)}catch{return null}}},Dm=class e{constructor(){this.providerId=e.PROVIDER_ID}static credential(e,t){return mm._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){let n=Em.parseLink(t);return X(n,`argument-error`),mm._fromEmailAndCode(e,n.code,n.tenantId)}};Dm.PROVIDER_ID=`password`,Dm.EMAIL_PASSWORD_SIGN_IN_METHOD=`password`,Dm.EMAIL_LINK_SIGN_IN_METHOD=`emailLink`;var Om=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}},km=class extends Om{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}},Am=class e extends km{constructor(){super(`facebook.com`)}static credential(t){return _m._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!(`oauthAccessToken`in t)||!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch{return null}}};Am.FACEBOOK_SIGN_IN_METHOD=`facebook.com`,Am.PROVIDER_ID=`facebook.com`;var jm=class e extends km{constructor(){super(`google.com`),this.addScope(`profile`)}static credential(t,n){return _m._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return e.credential(n,r)}catch{return null}}};jm.GOOGLE_SIGN_IN_METHOD=`google.com`,jm.PROVIDER_ID=`google.com`;var Mm=class e extends km{constructor(){super(`github.com`)}static credential(t){return _m._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!(`oauthAccessToken`in t)||!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch{return null}}};Mm.GITHUB_SIGN_IN_METHOD=`github.com`,Mm.PROVIDER_ID=`github.com`;var Nm=class e extends km{constructor(){super(`twitter.com`)}static credential(t,n){return _m._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return e.credential(n,r)}catch{return null}}};Nm.TWITTER_SIGN_IN_METHOD=`twitter.com`,Nm.PROVIDER_ID=`twitter.com`;async function Pm(e,t){return Hf(e,`POST`,`/v1/accounts:signUp`,zf(e,t))}var Fm=class e{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){return new e({user:await hp._fromIdTokenResponse(t,r,i),providerId:Im(r),_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){return await t._updateTokensIfNecessary(r,!0),new e({user:t,providerId:Im(r),_tokenResponse:r,operationType:n})}};function Im(e){return e.providerId?e.providerId:`phoneNumber`in e?`phone`:null}async function Lm(e){if(en(e.app))return Promise.reject(wf(e));let t=Bp(e);if(await t._initializationPromise,t.currentUser?.isAnonymous)return new Fm({user:t.currentUser,providerId:null,operationType:`signIn`});let n=await Pm(t,{returnSecureToken:!0}),r=await Fm._fromIdTokenResponse(t,`signIn`,n,!0);return await t._updateCurrentUser(r.user),r}var Rm=class e extends ye{constructor(t,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,e.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new e(t,n,r,i)}};function zm(e,t,n,r){return(t===`reauthenticate`?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{throw n.code===`auth/multi-factor-auth-required`?Rm._fromErrorAndOperation(e,n,t,r):n})}async function Bm(e,t,n=!1){let r=await rp(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Fm._forOperation(e,`link`,r)}async function Vm(e,t,n=!1){let{auth:r}=e;if(en(r.app))return Promise.reject(wf(r));let i=`reauthenticate`;try{let a=await rp(e,zm(r,i,t,e),n);X(a.idToken,r,`internal-error`);let o=tp(a.idToken);X(o,r,`internal-error`);let{sub:s}=o;return X(e.uid===s,r,`user-mismatch`),Fm._forOperation(e,i,a)}catch(e){throw e?.code===`auth/user-not-found`&&xf(r,`user-mismatch`),e}}async function Hm(e,t,n=!1){if(en(e.app))return Promise.reject(wf(e));let r=`signIn`,i=await zm(e,r,t),a=await Fm._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(a.user),a}async function Um(e,t){return Hm(Bp(e),t)}async function Wm(e){let t=Bp(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Gm(e,t,n){if(en(e.app))return Promise.reject(wf(e));let r=Bp(e),i=await em(r,{returnSecureToken:!0,email:t,password:n,clientType:`CLIENT_TYPE_WEB`},`signUpPassword`,Pm,`EMAIL_PASSWORD_PROVIDER`).catch(t=>{throw t.code===`auth/password-does-not-meet-requirements`&&Wm(e),t}),a=await Fm._fromIdTokenResponse(r,`signIn`,i);return await r._updateCurrentUser(a.user),a}function Km(e,t,n){return en(e.app)?Promise.reject(wf(e)):Um(Ne(e),Dm.credential(t,n)).catch(async t=>{throw t.code===`auth/password-does-not-meet-requirements`&&Wm(e),t})}async function qm(e,t){return Bf(e,`POST`,`/v1/accounts:update`,t)}async function Jm(e,{displayName:t,photoURL:n}){if(t===void 0&&n===void 0)return;let r=Ne(e),i={idToken:await r.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},a=await rp(r,qm(r.auth,i));r.displayName=a.displayName||null,r.photoURL=a.photoUrl||null;let o=r.providerData.find(({providerId:e})=>e===`password`);o&&(o.displayName=r.displayName,o.photoURL=r.photoURL),await r._updateTokensIfNecessary(a)}function Ym(e,t,n,r){return Ne(e).onIdTokenChanged(t,n,r)}function Xm(e,t,n){return Ne(e).beforeAuthStateChanged(t,n)}function Zm(e,t,n,r){return Ne(e).onAuthStateChanged(t,n,r)}function Qm(e){return Ne(e).signOut()}function $m(e,t){return Bf(e,`POST`,`/v2/accounts/mfaEnrollment:start`,zf(e,t))}function eh(e,t){return Bf(e,`POST`,`/v2/accounts/mfaEnrollment:finalize`,zf(e,t))}function th(e,t){return Bf(e,`POST`,`/v2/accounts/mfaEnrollment:start`,zf(e,t))}function nh(e,t){return Bf(e,`POST`,`/v2/accounts/mfaEnrollment:finalize`,zf(e,t))}var rh=`__sak`,ih=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(rh,`1`),this.storage.removeItem(rh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}},ah=1e3,oh=10,sh=class extends ih{constructor(){super(()=>window.localStorage,`LOCAL`),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Np(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(let t of Object.keys(this.listeners)){let n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});return}let n=e.key;t?this.detachListener():this.stopPolling();let r=()=>{let e=this.storage.getItem(n);!t&&this.localCache[n]===e||this.notifyListeners(n,e)},i=this.storage.getItem(n);Mp()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,oh):r()}notifyListeners(e,t){this.localCache[e]=t;let n=this.listeners[e];if(n)for(let e of Array.from(n))e(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent(`storage`,{key:e,oldValue:t,newValue:n}),!0)})},ah)}stopPolling(){this.pollTimer&&=(clearInterval(this.pollTimer),null)}attachListener(){window.addEventListener(`storage`,this.boundEventHandler)}detachListener(){window.removeEventListener(`storage`,this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){let t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}};sh.type=`LOCAL`;var ch=sh,lh=1e3;function uh(e){let t=e.replace(/[\\^$.*+?()[\]{}|]/g,`\\$&`),n=RegExp(`${t}=([^;]+)`);return document.cookie.match(n)?.[1]??null}function dh(e){return`${window.location.protocol===`http:`?`__dev_`:`__HOST-`}FIREBASE_${e.split(`:`)[3]}`}var fh=class{constructor(){this.type=`COOKIE`,this.listenerUnsubscribes=new Map}_getFinalTarget(e){let t=new URL(`${window.location.origin}/__cookies__`);return t.searchParams.set(`finalTarget`,e),t}async _isAvailable(){return typeof isSecureContext==`boolean`&&!isSecureContext||typeof navigator>`u`||typeof document>`u`?!1:navigator.cookieEnabled??!0}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;let t=dh(e);return window.cookieStore?(await window.cookieStore.get(t))?.value:uh(t)}async _remove(e){if(!this._isAvailable()||!await this._get(e))return;let t=dh(e);document.cookie=`${t}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch(`/__cookies__`,{method:`DELETE`}).catch(()=>void 0)}_addListener(e,t){if(!this._isAvailable())return;let n=dh(e);if(window.cookieStore){let e=(e=>{let r=e.changed.find(e=>e.name===n);r&&t(r.value),e.deleted.find(e=>e.name===n)&&t(null)});return this.listenerUnsubscribes.set(t,()=>window.cookieStore.removeEventListener(`change`,e)),window.cookieStore.addEventListener(`change`,e)}let r=uh(n),i=setInterval(()=>{let e=uh(n);e!==r&&(t(e),r=e)},lh);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){let n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}};fh.type=`COOKIE`;var ph=class extends ih{constructor(){super(()=>window.sessionStorage,`SESSION`)}_addListener(e,t){}_removeListener(e,t){}};ph.type=`SESSION`;var mh=ph;function hh(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}}))}var gh=class e{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let n=this.receivers.find(e=>e.isListeningto(t));if(n)return n;let r=new e(t);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){let t=e,{eventId:n,eventType:r,data:i}=t.data,a=this.handlersMap[r];if(!a?.size)return;t.ports[0].postMessage({status:`ack`,eventId:n,eventType:r});let o=await hh(Array.from(a).map(async e=>e(t.origin,i)));t.ports[0].postMessage({status:`done`,eventId:n,eventType:r,response:o})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener(`message`,this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener(`message`,this.boundEventHandler)}};gh.receivers=[];function _h(e=``,t=10){let n=``;for(let e=0;e<t;e++)n+=Math.floor(Math.random()*10);return e+n}var vh=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener(`message`,e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){let r=typeof MessageChannel<`u`?new MessageChannel:null;if(!r)throw Error(`connection_unavailable`);let i,a;return new Promise((o,s)=>{let c=_h(``,20);r.port1.start();let l=setTimeout(()=>{s(Error(`unsupported_event`))},n);a={messageChannel:r,onMessage(e){let t=e;if(t.data.eventId===c)switch(t.data.status){case`ack`:clearTimeout(l),i=setTimeout(()=>{s(Error(`timeout`))},3e3);break;case`done`:clearTimeout(i),o(t.data.response);break;default:clearTimeout(l),clearTimeout(i),s(Error(`invalid_response`));break}}},this.handlers.add(a),r.port1.addEventListener(`message`,a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}};function yh(){return window}function bh(e){yh().location.href=e}function xh(){return yh().WorkerGlobalScope!==void 0&&typeof yh().importScripts==`function`}async function Sh(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Ch(){return navigator?.serviceWorker?.controller||null}function wh(){return xh()?self:null}var Th=`firebaseLocalStorageDb`,Eh=1,Dh=`firebaseLocalStorage`,Oh=`fbase_key`,kh=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener(`success`,()=>{e(this.request.result)}),this.request.addEventListener(`error`,()=>{t(this.request.error)})})}};function Ah(e,t){return e.transaction([Dh],t?`readwrite`:`readonly`).objectStore(Dh)}function jh(){return new kh(indexedDB.deleteDatabase(Th)).toPromise()}function Mh(){let e=indexedDB.open(Th,Eh);return new Promise((t,n)=>{e.addEventListener(`error`,()=>{n(e.error)}),e.addEventListener(`upgradeneeded`,()=>{let t=e.result;try{t.createObjectStore(Dh,{keyPath:Oh})}catch(e){n(e)}}),e.addEventListener(`success`,async()=>{let n=e.result;n.objectStoreNames.contains(Dh)?t(n):(n.close(),await jh(),t(await Mh()))})})}async function Nh(e,t,n){return new kh(Ah(e,!0).put({[Oh]:t,value:n})).toPromise()}async function Ph(e,t){let n=await new kh(Ah(e,!1).get(t)).toPromise();return n===void 0?null:n.value}function Fh(e,t){return new kh(Ah(e,!0).delete(t)).toPromise()}var Ih=800,Lh=3,Rh=class{constructor(){this.type=`LOCAL`,this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||=await Mh(),this.db}async _withRetries(e){let t=0;for(;;)try{return await e(await this._openDb())}catch(e){if(t++>Lh)throw e;this.db&&=(this.db.close(),void 0)}}async initializeServiceWorkerMessaging(){return xh()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=gh._getInstance(wh()),this.receiver._subscribe(`keyChanged`,async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe(`ping`,async(e,t)=>[`keyChanged`])}async initializeSender(){if(this.activeServiceWorker=await Sh(),!this.activeServiceWorker)return;this.sender=new vh(this.activeServiceWorker);let e=await this.sender._send(`ping`,{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes(`keyChanged`)&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Ch()!==this.activeServiceWorker))try{await this.sender._send(`keyChanged`,{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let e=await Mh();return await Nh(e,rh,`1`),await Fh(e,rh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Nh(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){let t=await this._withRetries(t=>Ph(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Fh(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){let e=await this._withRetries(e=>new kh(Ah(e,!1).getAll()).toPromise());if(!e||this.pendingWrites!==0)return[];let t=[],n=new Set;if(e.length!==0)for(let{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(let e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;let n=this.listeners[e];if(n)for(let e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Ih)}stopPolling(){this.pollTimer&&=(clearInterval(this.pollTimer),null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}};Rh.type=`LOCAL`;var zh=Rh;function Bh(e,t){return Bf(e,`POST`,`/v2/accounts/mfaSignIn:start`,zf(e,t))}function Vh(e,t){return Bf(e,`POST`,`/v2/accounts/mfaSignIn:finalize`,zf(e,t))}function Hh(e,t){return Bf(e,`POST`,`/v2/accounts/mfaSignIn:finalize`,zf(e,t))}qp(`rcb`),new Nf(3e4,6e4);var Uh=`recaptcha`;async function Wh(e,t,n){if(!e._getRecaptchaConfig())try{await tm(e)}catch{console.log(`Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.`)}try{let r;if(r=typeof t==`string`?{phoneNumber:t}:t,`session`in r){let t=r.session;if(`phoneNumber`in r)return X(t.type===`enroll`,e,`internal-error`),(await em(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:`CLIENT_TYPE_WEB`}},`mfaSmsEnrollment`,async(e,t)=>t.phoneEnrollmentInfo.captchaResponse===Zp?(X(n?.type===Uh,e,`argument-error`),$m(e,await Gh(e,t,n))):$m(e,t),`PHONE_PROVIDER`).catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo;{X(t.type===`signin`,e,`internal-error`);let i=r.multiFactorHint?.uid||r.multiFactorUid;return X(i,e,`missing-multi-factor-info`),(await em(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:i,phoneSignInInfo:{clientType:`CLIENT_TYPE_WEB`}},`mfaSmsSignIn`,async(e,t)=>t.phoneSignInInfo.captchaResponse===Zp?(X(n?.type===Uh,e,`argument-error`),Bh(e,await Gh(e,t,n))):Bh(e,t),`PHONE_PROVIDER`).catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}else return(await em(e,{phoneNumber:r.phoneNumber,clientType:`CLIENT_TYPE_WEB`},`sendVerificationCode`,async(e,t)=>t.captchaResponse===Zp?(X(n?.type===Uh,e,`argument-error`),vm(e,await Gh(e,t,n))):vm(e,t),`PHONE_PROVIDER`).catch(e=>Promise.reject(e))).sessionInfo}finally{n?._reset()}}async function Gh(e,t,n){X(n.type===Uh,e,`argument-error`);let r=await n.verify();X(typeof r==`string`,e,`argument-error`);let i={...t};if(`phoneEnrollmentInfo`in i){let e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,a=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:a}}),i}else if(`phoneSignInInfo`in i){let e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}else return Object.assign(i,{recaptchaToken:r}),i}var Kh=class e{constructor(t){this.providerId=e.PROVIDER_ID,this.auth=Bp(t)}verifyPhoneNumber(e,t){return Wh(this.auth,e,Ne(t))}static credential(e,t){return Cm._fromVerification(e,t)}static credentialFromResult(t){let n=t;return e.credentialFromTaggedObject(n)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{phoneNumber:t,temporaryProof:n}=e;return t&&n?Cm._fromTokenResponse(t,n):null}};Kh.PROVIDER_ID=`phone`,Kh.PHONE_SIGN_IN_METHOD=`phone`;function qh(e,t){return t?_p(t):(X(e._popupRedirectResolver,e,`argument-error`),e._popupRedirectResolver)}var Jh=class extends lm{constructor(e){super(`custom`,`custom`),this.params=e}_getIdTokenResponse(e){return hm(e,this._buildIdpRequest())}_linkToIdToken(e,t){return hm(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return hm(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function Yh(e){return Hm(e.auth,new Jh(e),e.bypassAuthState)}function Xh(e){let{auth:t,user:n}=e;return X(n,t,`internal-error`),Vm(n,new Jh(e),e.bypassAuthState)}async function Zh(e){let{auth:t,user:n}=e;return X(n,t,`internal-error`),Bm(n,new Jh(e),e.bypassAuthState)}var Qh=class{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:a,type:o}=e;if(a){this.reject(a);return}let s={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(s))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case`signInViaPopup`:case`signInViaRedirect`:return Yh;case`linkViaPopup`:case`linkViaRedirect`:return Zh;case`reauthViaPopup`:case`reauthViaRedirect`:return Xh;default:xf(this.auth,`internal-error`)}}resolve(e){Df(this.pendingPromise,`Pending promise was never set`),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Df(this.pendingPromise,`Pending promise was never set`),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}},$h=new Nf(2e3,1e4),eg=class e extends Qh{constructor(t,n,r,i,a){super(t,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,e.currentPopupAction&&e.currentPopupAction.cancel(),e.currentPopupAction=this}async executeNotNull(){let e=await this.execute();return X(e,this.auth,`internal-error`),e}async onExecution(){Df(this.filter.length===1,`Popup operations only handle one event`);let e=_h();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Sf(this.auth,`web-storage-unsupported`))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Sf(this.auth,`cancelled-popup-request`))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,e.currentPopupAction=null}pollUserCancellation(){let e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Sf(this.auth,`popup-closed-by-user`))},8e3);return}this.pollId=window.setTimeout(e,$h.get())};e()}};eg.currentPopupAction=null;var tg=`pendingRedirect`,ng=new Map,rg=class extends Qh{constructor(e,t,n=!1){super(e,[`signInViaRedirect`,`linkViaRedirect`,`reauthViaRedirect`,`unknown`],t,void 0,n),this.eventId=null}async execute(){let e=ng.get(this.auth._key());if(!e){try{let t=await ig(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}ng.set(this.auth._key(),e)}return this.bypassAuthState||ng.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type===`signInViaRedirect`)return super.onAuthEvent(e);if(e.type===`unknown`){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function ig(e,t){let n=sg(t),r=og(e);if(!await r._isAvailable())return!1;let i=await r._get(n)===`true`;return await r._remove(n),i}function ag(e,t){ng.set(e._key(),t)}function og(e){return _p(e._redirectPersistence)}function sg(e){return bp(tg,e.config.apiKey,e.name)}async function cg(e,t,n=!1){if(en(e.app))return Promise.reject(wf(e));let r=Bp(e),i=await new rg(r,qh(r,t),n).execute();return i&&!n&&(delete i.user._redirectEventId,await r._persistUserIfCurrent(i.user),await r._setRedirectUser(null,t)),i}var lg=600*1e3,ug=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!pg(e)?t:(this.hasHandledPotentialRedirect=!0,t||=(this.queuedRedirectEvent=e,!0),t)}sendToConsumer(e,t){if(e.error&&!fg(e)){let n=e.error.code?.split(`auth/`)[1]||`internal-error`;t.onError(Sf(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=lg&&this.cachedEventUids.clear(),this.cachedEventUids.has(dg(e))}saveEventToCache(e){this.cachedEventUids.add(dg(e)),this.lastProcessedEventTime=Date.now()}};function dg(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join(`-`)}function fg({type:e,error:t}){return e===`unknown`&&t?.code===`auth/no-auth-event`}function pg(e){switch(e.type){case`signInViaRedirect`:case`linkViaRedirect`:case`reauthViaRedirect`:return!0;case`unknown`:return fg(e);default:return!1}}async function mg(e,t={}){return Bf(e,`GET`,`/v1/projects`,t)}var hg=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gg=/^https?/;async function _g(e){if(e.config.emulator)return;let{authorizedDomains:t}=await mg(e);for(let e of t)try{if(vg(e))return}catch{}xf(e,`unauthorized-domain`)}function vg(e){let t=Of(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith(`chrome-extension://`)){let i=new URL(e);return i.hostname===``&&r===``?n===`chrome-extension:`&&e.replace(`chrome-extension://`,``)===t.replace(`chrome-extension://`,``):n===`chrome-extension:`&&i.hostname===r}if(!gg.test(n))return!1;if(hg.test(e))return r===e;let i=e.replace(/\./g,`\\.`);return RegExp(`^(.+\\.`+i+`|`+i+`)$`,`i`).test(r)}var yg=new Nf(3e4,6e4);function bg(){let e=yh().___jsl;if(e?.H){for(let t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}}function xg(e){return new Promise((t,n)=>{function r(){bg(),gapi.load(`gapi.iframes`,{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{bg(),n(Sf(e,`network-request-failed`))},timeout:yg.get()})}if(yh().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(yh().gapi?.load)r();else{let t=qp(`iframefcb`);return yh()[t]=()=>{gapi.load?r():n(Sf(e,`network-request-failed`))},Wp(`${Kp()}?onload=${t}`).catch(e=>n(e))}}).catch(e=>{throw Sg=null,e})}var Sg=null;function Cg(e){return Sg||=xg(e),Sg}var wg=new Nf(5e3,15e3),Tg=`__/auth/iframe`,Eg=`emulator/auth/iframe`,Dg={style:{position:`absolute`,top:`-100px`,width:`1px`,height:`1px`},"aria-hidden":`true`,tabindex:`-1`},Og=new Map([[`identitytoolkit.googleapis.com`,`p`],[`staging-identitytoolkit.sandbox.googleapis.com`,`s`],[`test-identitytoolkit.sandbox.googleapis.com`,`t`]]);function kg(e){let t=e.config;X(t.authDomain,e,`auth-domain-config-required`);let n=t.emulator?Pf(t,Eg):`https://${e.config.authDomain}/${Tg}`,r={apiKey:t.apiKey,appName:e.name,v:rn},i=Og.get(e.config.apiHost);i&&(r.eid=i);let a=e._getFrameworks();return a.length&&(r.fw=a.join(`,`)),`${n}?${Ee(r).slice(1)}`}async function Ag(e){let t=await Cg(e),n=yh().gapi;return X(n,e,`internal-error`),t.open({where:document.body,url:kg(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Dg,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});let i=Sf(e,`network-request-failed`),a=yh().setTimeout(()=>{r(i)},wg.get());function o(){yh().clearTimeout(a),n(t)}t.ping(o).then(o,()=>{r(i)})}))}var jg={location:`yes`,resizable:`yes`,statusbar:`yes`,toolbar:`no`},Mg=500,Ng=600,Pg=`_blank`,Fg=`http://localhost`,Ig=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Lg(e,t,n,r=Mg,i=Ng){let a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),s=``,c={...jg,width:r.toString(),height:i.toString(),top:a,left:o},l=E().toLowerCase();n&&(s=Tp(l)?Pg:n),Cp(l)&&(t||=Fg,c.scrollbars=`yes`);let u=Object.entries(c).reduce((e,[t,n])=>`${e}${t}=${n},`,``);if(jp(l)&&s!==`_self`)return Rg(t||``,s),new Ig(null);let d=window.open(t||``,s,u);X(d,e,`popup-blocked`);try{d.focus()}catch{}return new Ig(d)}function Rg(e,t){let n=document.createElement(`a`);n.href=e,n.target=t;let r=document.createEvent(`MouseEvent`);r.initMouseEvent(`click`,!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var zg=`__/auth/handler`,Bg=`emulator/auth/handler`,Vg=`fac`;async function Hg(e,t,n,r,i,a){X(e.config.authDomain,e,`auth-domain-config-required`),X(e.config.apiKey,e,`invalid-api-key`);let o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:rn,eventId:i};if(t instanceof Om){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||``,Ce(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(let[e,t]of Object.entries(a||{}))o[e]=t}if(t instanceof km){let e=t.getScopes().filter(e=>e!==``);e.length>0&&(o.scopes=e.join(`,`))}e.tenantId&&(o.tid=e.tenantId);let s=o;for(let e of Object.keys(s))s[e]===void 0&&delete s[e];let c=await e._getAppCheckToken(),l=c?`#${Vg}=${encodeURIComponent(c)}`:``;return`${Ug(e)}?${Ee(s).slice(1)}${l}`}function Ug({config:e}){return e.emulator?Pf(e,Bg):`https://${e.authDomain}/${zg}`}var Wg=`webStorageSupport`,Gg=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=mh,this._completeRedirectFn=cg,this._overrideRedirectResult=ag}async _openPopup(e,t,n,r){return Df(this.eventManagers[e._key()]?.manager,`_initialize() not called before _openPopup()`),Lg(e,await Hg(e,t,n,Of(),r),_h())}async _openRedirect(e,t,n,r){return await this._originValidation(e),bh(await Hg(e,t,n,Of(),r)),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Df(n,`If manager is not set, promise should be`),n)}let n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){let t=await Ag(e),n=new ug(e);return t.register(`authEvent`,t=>(X(t?.authEvent,e,`invalid-auth-event`),{status:n.onEvent(t.authEvent)?`ACK`:`ERROR`}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Wg,{type:Wg},n=>{let r=n?.[0]?.[Wg];r!==void 0&&t(!!r),xf(e,`internal-error`)},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=_g(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Np()||wp()||Ap()}},Kg=class{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case`enroll`:return this._finalizeEnroll(e,t.credential,n);case`signin`:return this._finalizeSignIn(e,t.credential);default:return Ef(`unexpected MultiFactorSessionType`)}}},qg=class e extends Kg{constructor(e){super(`phone`),this.credential=e}static _fromCredential(t){return new e(t)}_finalizeEnroll(e,t,n){return eh(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return Vh(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},Jg=class{constructor(){}static assertion(e){return qg._fromCredential(e)}};Jg.FACTOR_ID=`phone`;var Yg=class{static assertionForEnrollment(e,t){return Xg._fromSecret(e,t)}static assertionForSignIn(e,t){return Xg._fromEnrollmentId(e,t)}static async generateSecret(e){let t=e;X(t.user?.auth!==void 0,`internal-error`);let n=await th(t.user.auth,{idToken:t.credential,totpEnrollmentInfo:{}});return Zg._fromStartTotpMfaEnrollmentResponse(n,t.user.auth)}};Yg.FACTOR_ID=`totp`;var Xg=class e extends Kg{constructor(e,t,n){super(`totp`),this.otp=e,this.enrollmentId=t,this.secret=n}static _fromSecret(t,n){return new e(n,void 0,t)}static _fromEnrollmentId(t,n){return new e(n,t)}async _finalizeEnroll(e,t,n){return X(this.secret!==void 0,e,`argument-error`),nh(e,{idToken:t,displayName:n,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(e,t){X(this.enrollmentId!==void 0&&this.otp!==void 0,e,`argument-error`);let n={verificationCode:this.otp};return Hh(e,{mfaPendingCredential:t,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:n})}},Zg=class e{constructor(e,t,n,r,i,a,o){this.sessionInfo=a,this.auth=o,this.secretKey=e,this.hashingAlgorithm=t,this.codeLength=n,this.codeIntervalSeconds=r,this.enrollmentCompletionDeadline=i}static _fromStartTotpMfaEnrollmentResponse(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,t){let n=!1;return(Qg(e)||Qg(t))&&(n=!0),n&&(Qg(e)&&(e=this.auth.currentUser?.email||`unknownuser`),Qg(t)&&(t=this.auth.name)),`otpauth://totp/${t}:${e}?secret=${this.secretKey}&issuer=${t}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}};function Qg(e){return e===void 0||e?.length===0}var $g=`@firebase/auth`,e_=`1.11.1`,t_=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(t=>{e(t?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){X(this.auth._initializationPromise,`dependent-sdk-initialized-before-auth`)}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function n_(e){switch(e){case`Node`:return`node`;case`ReactNative`:return`rn`;case`Worker`:return`webworker`;case`Cordova`:return`cordova`;case`WebExtension`:return`web-extension`;default:return}}function r_(e){Qt(new Pe(`auth`,(t,{options:n})=>{let r=t.getProvider(`app`).getImmediate(),i=t.getProvider(`heartbeat`),a=t.getProvider(`app-check-internal`),{apiKey:o,authDomain:s}=r.options;X(o&&!o.includes(`:`),`invalid-api-key`,{appName:r.name});let c=new zp(r,i,a,{apiKey:o,authDomain:s,clientPlatform:e,apiHost:`identitytoolkit.googleapis.com`,tokenApiHost:`securetoken.googleapis.com`,apiScheme:`https`,sdkClientVersion:Pp(e)});return rm(c,n),c},`PUBLIC`).setInstantiationMode(`EXPLICIT`).setInstanceCreatedCallback((e,t,n)=>{e.getProvider(`auth-internal`).initialize()})),Qt(new Pe(`auth-internal`,e=>(e=>new t_(e))(Bp(e.getProvider(`auth`).getImmediate())),`PRIVATE`).setInstantiationMode(`EXPLICIT`)),sn($g,e_,n_(e)),sn($g,e_,`esm2020`)}var i_=te(`authIdTokenMaxAge`)||300,a_=null,o_=e=>async t=>{let n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>i_)return;let i=n?.token;a_!==i&&(a_=i,await fetch(e,{method:i?`POST`:`DELETE`,headers:i?{Authorization:`Bearer ${i}`}:{}}))};function s_(e=on()){let t=$t(e,`auth`);if(t.isInitialized())return t.getImmediate();let n=nm(e,{popupRedirectResolver:Gg,persistence:[zh,ch,mh]}),r=te(`authTokenSyncURL`);if(r&&typeof isSecureContext==`boolean`&&isSecureContext){let e=new URL(r,location.origin);if(location.origin===e.origin){let t=o_(e.toString());Xm(n,t,()=>t(n.currentUser)),Ym(n,e=>t(e))}}let i=S(`auth`);return i&&im(n,`http://${i}`),n}function c_(){return document.getElementsByTagName(`head`)?.[0]??document}Up({loadJS(e){return new Promise((t,n)=>{let r=document.createElement(`script`);r.setAttribute(`src`,e),r.onload=t,r.onerror=e=>{let t=Sf(`internal-error`);t.customData=e,n(t)},r.type=`text/javascript`,r.charset=`UTF-8`,c_().appendChild(r)})},gapiScript:`https://apis.google.com/js/api.js`,recaptchaV2Script:`https://www.google.com/recaptcha/api.js`,recaptchaEnterpriseScript:`https://www.google.com/recaptcha/enterprise.js?render=`}),r_(`Browser`);var l_=e=>e.replace(/([a-z0-9])([A-Z])/g,`$1-$2`).toLowerCase(),u_=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),d_=e=>{let t=u_(e);return t.charAt(0).toUpperCase()+t.slice(1)},f_=(...e)=>e.filter((e,t,n)=>!!e&&e.trim()!==``&&n.indexOf(e)===t).join(` `).trim(),p_=e=>{for(let t in e)if(t.startsWith(`aria-`)||t===`role`||t===`title`)return!0},m_={xmlns:`http://www.w3.org/2000/svg`,width:24,height:24,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:2,strokeLinecap:`round`,strokeLinejoin:`round`},h_=(0,l.forwardRef)(({color:e=`currentColor`,size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i=``,children:a,iconNode:o,...s},c)=>(0,l.createElement)(`svg`,{ref:c,...m_,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:f_(`lucide`,i),...!a&&!p_(s)&&{"aria-hidden":`true`},...s},[...o.map(([e,t])=>(0,l.createElement)(e,t)),...Array.isArray(a)?a:[a]])),g_=(e,t)=>{let n=(0,l.forwardRef)(({className:n,...r},i)=>(0,l.createElement)(h_,{ref:i,iconNode:t,className:f_(`lucide-${l_(d_(e))}`,`lucide-${e}`,n),...r}));return n.displayName=d_(e),n},__=g_(`activity`,[[`path`,{d:`M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2`,key:`169zse`}]]),v_=g_(`arrow-right`,[[`path`,{d:`M5 12h14`,key:`1ays0h`}],[`path`,{d:`m12 5 7 7-7 7`,key:`xquz4c`}]]),y_=g_(`briefcase`,[[`path`,{d:`M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16`,key:`jecpp`}],[`rect`,{width:`20`,height:`14`,x:`2`,y:`6`,rx:`2`,key:`i6l2r4`}]]),b_=g_(`calendar`,[[`path`,{d:`M8 2v4`,key:`1cmpym`}],[`path`,{d:`M16 2v4`,key:`4m81vk`}],[`rect`,{width:`18`,height:`18`,x:`3`,y:`4`,rx:`2`,key:`1hopcy`}],[`path`,{d:`M3 10h18`,key:`8toen8`}]]),x_=g_(`circle-check-big`,[[`path`,{d:`M21.801 10A10 10 0 1 1 17 3.335`,key:`yps3ct`}],[`path`,{d:`m9 11 3 3L22 4`,key:`1pflzl`}]]),S_=g_(`circle-x`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`path`,{d:`m15 9-6 6`,key:`1uzhvr`}],[`path`,{d:`m9 9 6 6`,key:`z0biqf`}]]),C_=g_(`clock`,[[`path`,{d:`M12 6v6l4 2`,key:`mmk7yg`}],[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}]]),w_=g_(`crown`,[[`path`,{d:`M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z`,key:`1vdc57`}],[`path`,{d:`M5 21h14`,key:`11awu3`}]]),T_=g_(`flame`,[[`path`,{d:`M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4`,key:`1slcih`}]]),E_=g_(`gift`,[[`rect`,{x:`3`,y:`8`,width:`18`,height:`4`,rx:`1`,key:`bkv52`}],[`path`,{d:`M12 8v13`,key:`1c76mn`}],[`path`,{d:`M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7`,key:`6wjy6b`}],[`path`,{d:`M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5`,key:`1ihvrl`}]]),D_=g_(`heart`,[[`path`,{d:`M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5`,key:`mvr1a0`}]]),O_=g_(`keyboard`,[[`path`,{d:`M10 8h.01`,key:`1r9ogq`}],[`path`,{d:`M12 12h.01`,key:`1mp3jc`}],[`path`,{d:`M14 8h.01`,key:`1primd`}],[`path`,{d:`M16 12h.01`,key:`1l6xoz`}],[`path`,{d:`M18 8h.01`,key:`emo2bl`}],[`path`,{d:`M6 8h.01`,key:`x9i8wu`}],[`path`,{d:`M7 16h10`,key:`wp8him`}],[`path`,{d:`M8 12h.01`,key:`czm47f`}],[`rect`,{width:`20`,height:`16`,x:`2`,y:`4`,rx:`2`,key:`18n3k1`}]]),k_=g_(`landmark`,[[`path`,{d:`M10 18v-7`,key:`wt116b`}],[`path`,{d:`M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z`,key:`1m329m`}],[`path`,{d:`M14 18v-7`,key:`vav6t3`}],[`path`,{d:`M18 18v-7`,key:`aexdmj`}],[`path`,{d:`M3 22h18`,key:`8prr45`}],[`path`,{d:`M6 18v-7`,key:`1ivflk`}]]),A_=g_(`lock`,[[`rect`,{width:`18`,height:`11`,x:`3`,y:`11`,rx:`2`,ry:`2`,key:`1w4ew1`}],[`path`,{d:`M7 11V7a5 5 0 0 1 10 0v4`,key:`fwvmzm`}]]),j_=g_(`log-out`,[[`path`,{d:`m16 17 5-5-5-5`,key:`1bji2h`}],[`path`,{d:`M21 12H9`,key:`dn1m92`}],[`path`,{d:`M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4`,key:`1uf3rs`}]]),M_=g_(`pen`,[[`path`,{d:`M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z`,key:`1a8usu`}]]),N_=g_(`piggy-bank`,[[`path`,{d:`M11 17h3v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-3a3.16 3.16 0 0 0 2-2h1a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1h-1a5 5 0 0 0-2-4V3a4 4 0 0 0-3.2 1.6l-.3.4H11a6 6 0 0 0-6 6v1a5 5 0 0 0 2 4v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1z`,key:`1piglc`}],[`path`,{d:`M16 10h.01`,key:`1m94wz`}],[`path`,{d:`M2 8v1a2 2 0 0 0 2 2h1`,key:`1env43`}]]),P_=g_(`rotate-ccw`,[[`path`,{d:`M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8`,key:`1357e3`}],[`path`,{d:`M3 3v5h5`,key:`1xhq8a`}]]),F_=g_(`search`,[[`path`,{d:`m21 21-4.34-4.34`,key:`14j7rj`}],[`circle`,{cx:`11`,cy:`11`,r:`8`,key:`4ej97u`}]]),I_=g_(`settings`,[[`path`,{d:`M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915`,key:`1i5ecw`}],[`circle`,{cx:`12`,cy:`12`,r:`3`,key:`1v7zrd`}]]),L_=g_(`shopping-bag`,[[`path`,{d:`M16 10a4 4 0 0 1-8 0`,key:`1ltviw`}],[`path`,{d:`M3.103 6.034h17.794`,key:`awc11p`}],[`path`,{d:`M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z`,key:`o988cm`}]]),R_=g_(`skull`,[[`path`,{d:`m12.5 17-.5-1-.5 1h1z`,key:`3me087`}],[`path`,{d:`M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z`,key:`1o5pge`}],[`circle`,{cx:`15`,cy:`12`,r:`1`,key:`1tmaij`}],[`circle`,{cx:`9`,cy:`12`,r:`1`,key:`1vctgf`}]]),z_=g_(`sparkles`,[[`path`,{d:`M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z`,key:`1s2grr`}],[`path`,{d:`M20 2v4`,key:`1rf3ol`}],[`path`,{d:`M22 4h-4`,key:`gwowj6`}],[`circle`,{cx:`4`,cy:`20`,r:`2`,key:`6kqj1y`}]]),B_=g_(`square-check-big`,[[`path`,{d:`M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344`,key:`2acyp4`}],[`path`,{d:`m9 11 3 3L22 4`,key:`1pflzl`}]]),V_=g_(`target`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`circle`,{cx:`12`,cy:`12`,r:`6`,key:`1vlfrh`}],[`circle`,{cx:`12`,cy:`12`,r:`2`,key:`1c9p78`}]]),H_=g_(`trash-2`,[[`path`,{d:`M10 11v6`,key:`nco0om`}],[`path`,{d:`M14 11v6`,key:`outv1u`}],[`path`,{d:`M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6`,key:`miytrc`}],[`path`,{d:`M3 6h18`,key:`d0wm0j`}],[`path`,{d:`M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2`,key:`e791ji`}]]),U_=g_(`trophy`,[[`path`,{d:`M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978`,key:`1n3hpd`}],[`path`,{d:`M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978`,key:`rfe1zi`}],[`path`,{d:`M18 9h1.5a1 1 0 0 0 0-5H18`,key:`7xy6bh`}],[`path`,{d:`M4 22h16`,key:`57wxv0`}],[`path`,{d:`M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z`,key:`1mhfuq`}],[`path`,{d:`M6 9H4.5a1 1 0 0 1 0-5H6`,key:`tex48p`}]]),W_=g_(`user-check`,[[`path`,{d:`m16 11 2 2 4-4`,key:`9rsbq5`}],[`path`,{d:`M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2`,key:`1yyitq`}],[`circle`,{cx:`9`,cy:`7`,r:`4`,key:`nufk8`}]]),G_=g_(`user-plus`,[[`path`,{d:`M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2`,key:`1yyitq`}],[`circle`,{cx:`9`,cy:`7`,r:`4`,key:`nufk8`}],[`line`,{x1:`19`,x2:`19`,y1:`8`,y2:`14`,key:`1bvyxn`}],[`line`,{x1:`22`,x2:`16`,y1:`11`,y2:`11`,key:`1shjgl`}]]),K_=g_(`users`,[[`path`,{d:`M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2`,key:`1yyitq`}],[`path`,{d:`M16 3.128a4 4 0 0 1 0 7.744`,key:`16gr8j`}],[`path`,{d:`M22 21v-2a4 4 0 0 0-3-3.87`,key:`kshegd`}],[`circle`,{cx:`9`,cy:`7`,r:`4`,key:`nufk8`}]]),q_=g_(`zap`,[[`path`,{d:`M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z`,key:`1xq2db`}]]),J_=e((e=>{var t=Symbol.for(`react.transitional.element`),n=Symbol.for(`react.fragment`);function r(e,n,r){var i=null;if(r!==void 0&&(i=``+r),n.key!==void 0&&(i=``+n.key),`key`in n)for(var a in r={},n)a!==`key`&&(r[a]=n[a]);else r=n;return n=r.ref,{$$typeof:t,type:e,key:i,ref:n===void 0?null:n,props:r}}e.Fragment=n,e.jsx=r,e.jsxs=r})),Z=e(((e,t)=>{t.exports=J_()}))(),Y_=an({apiKey:`AIzaSyAnjuK_F8ZO3WqTfCEeXEF5J84CG8Irjq4`,authDomain:`yum-donut-school.firebaseapp.com`,projectId:`yum-donut-school`,storageBucket:`yum-donut-school.firebasestorage.app`,messagingSenderId:`910400935670`,appId:`1:910400935670:web:8f196e7da498d67ca17ed7`}),Q=Yu(Y_),X_=s_(Y_),Z_=[`Mr Rayner`,`Jacey`,`Marina`,`Amaia`,`Charlotte`,`Dewindi`,`Alison`,`Hunter`,`Katie`,`Isla`,`Chenuthi`,`Lily`,`Alice`,`Amelia`,`Mackenzie`,`Kanin`,`Faith`,`Kiara`,`Seoyeon`,`Lara`,`Armani`,`Tobin`,`Isaac`,`Lia`],Q_=5,$_=50,ev=``,$=`yum-donut-school`,tv=[`#F472B6`,`#A78BFA`,`#60A5FA`,`#34D399`,`#FBBF24`,`#F87171`,`#9CA3AF`,`#14B8A6`],nv=[``,``,``,``,``,``,``,``,``,``,``,``,``,``,``,``,``,``,``,``],rv=[{id:`raffle_ticket`,name:`Weekly Raffle Ticket`,cost:2,icon:``,desc:`Win the FRIDAY JACKPOT! (Prize: 2 items from the box).`,type:`physical`},{id:`snack_box`,name:`Snack Box Treat`,cost:5,icon:``,desc:`One treat from the box.`,type:`physical`},{id:`snack_2`,name:`Double Snack Attack`,cost:8,icon:``,desc:`Permission to take a SECOND treat.`,type:`physical`},{id:`vip_schedule`,name:`VIP Schedule Bump`,cost:25,icon:``,desc:`Bump your show to the top of the 'let's work on it' list.`,type:`physical`},{id:`comfy_chair`,name:`Comfy Chair Rental`,cost:30,icon:``,desc:`Rent the good chair for a day.`,type:`physical`},{id:`rainbow_name`,name:`Rainbow Name`,cost:50,icon:``,desc:`Make your name shimmer on the leaderboard!`,type:`digital`},{id:`gold_border`,name:`Gold Border`,cost:50,icon:``,desc:`A shiny gold border for your avatar!`,type:`digital`},{id:`neon_name`,name:`Neon Name`,cost:75,icon:``,desc:`Make your name glow with neon light!`,type:`digital`},{id:`verified_badge`,name:`Verified Badge`,cost:150,icon:``,desc:`Official blue checkmark. Serious business.`,type:`digital`},{id:`gold_pass`,name:`The GOLD Pass`,cost:100,icon:``,desc:`A physical, laminated Gold VIP Lanyard.`,type:`physical`},{id:`name_camera`,name:`Name a Camera`,cost:500,icon:``,desc:`Permanently name a DJI or Sony camera!`,type:`physical`}],iv=[{text:`May the Force be with you.`,source:`Star Wars (1977)`,reward:1},{text:`There's no place like home.`,source:`The Wizard of Oz (1939)`,reward:1},{text:`I'm the king of the world!`,source:`Titanic (1997)`,reward:1},{text:`Carpe diem. Seize the day, boys. Make your lives extraordinary.`,source:`Dead Poets Society (1989)`,reward:1},{text:`Elementary, my dear Watson.`,source:`The Adventures of Sherlock Holmes (1939)`,reward:1},{text:`It's alive! It's alive!`,source:`Frankenstein (1931)`,reward:1},{text:`My mama always said life was like a box of chocolates. You never know what you're gonna get.`,source:`Forrest Gump (1994)`,reward:5},{text:`I'll have what she's having.`,source:`When Harry Met Sally... (1989)`,reward:1},{text:`You're gonna need a bigger boat.`,source:`Jaws (1975)`,reward:1},{text:`Here's looking at you, kid.`,source:`Casablanca (1942)`,reward:1},{text:`Houston, we have a problem.`,source:`Apollo 13 (1995)`,reward:1},{text:`You can't handle the truth!`,source:`A Few Good Men (1992)`,reward:1},{text:`Life moves pretty fast. If you don't stop and look around once in a while, you could miss it.`,source:`Ferris Bueller's Day Off (1986)`,reward:5},{text:`To infinity and beyond!`,source:`Toy Story (1995)`,reward:1},{text:`Honey, where is my super suit?`,source:`The Incredibles (2004)`,reward:1},{text:`I am your father.`,source:`Star Wars: The Empire Strikes Back (1980)`,reward:1},{text:`With great power comes great responsibility.`,source:`Spider-Man (2002)`,reward:1},{text:`It does not do to dwell on dreams and forget to live.`,source:`Harry Potter and the Sorcerer's Stone (2001)`,reward:1},{text:`Roads? Where we're going, we don't need roads.`,source:`Back to the Future (1985)`,reward:1},{text:`Hakuna Matata! It means no worries for the rest of your days.`,source:`The Lion King (1994)`,reward:1},{text:`E.T. phone home.`,source:`E.T. the Extra-Terrestrial (1982)`,reward:1},{text:`Bond. James Bond.`,source:`Dr. No (1962)`,reward:1},{text:`You shall not pass!`,source:`The Lord of the Rings: The Fellowship of the Ring (2001)`,reward:1},{text:`I see dead people.`,source:`The Sixth Sense (1999)`,reward:1},{text:`Hasta la vista, baby.`,source:`Terminator 2: Judgment Day (1991)`,reward:1},{text:`Just keep swimming.`,source:`Finding Nemo (2003)`,reward:1},{text:`Magic Mirror on the wall, who is the fairest one of all?`,source:`Snow White and the Seven Dwarfs (1937)`,reward:1},{text:`Nobody puts Baby in a corner.`,source:`Dirty Dancing (1987)`,reward:1},{text:`I'm walking here! I'm walking here!`,source:`Midnight Cowboy (1969)`,reward:1},{text:`You had me at 'hello'.`,source:`Jerry Maguire (1996)`,reward:1},{text:`It ain't about how hard you hit. It's about how hard you can get hit and keep moving forward.`,source:`Rocky Balboa (2006)`,reward:5},{text:`We will not go quietly into the night! We will not vanish without a fight! We're going to live on!`,source:`Independence Day (1996)`,reward:5},{text:`All we have to decide is what to do with the time that is given us.`,source:`The Lord of the Rings: The Fellowship of the Ring (2001)`,reward:5}],av=[`The best camera is the one you have with you, but a tripod never hurts.`,`We'll fix it in post-production, said every director who regretted it later.`,`Lighting isn't just about exposure; it's about mood, depth, and storytelling.`,`Sound is half the picture, so never underestimate the power of a good microphone.`,`A film is made three times: when it is written, when it is shot, and when it is edited.`,`Continuity is key, so make sure the actor holds the cup in the same hand.`,`Wide angle lenses exaggerate distance, while telephoto lenses compress it.`,`The rule of thirds is a guideline, not a law, but you should learn it before you break it.`,`Magic hour offers the most beautiful light, but it only lasts for a short time.`,`Don't cross the 180-degree line unless you want to confuse your audience.`,`Every cut should be motivated by the story, not just because you're bored.`,`Show, don't tell, is the golden rule of visual storytelling.`,`Good editing is invisible; it guides the audience without drawing attention to itself.`],ov=[`The ISO setting on a digital camera determines the image sensor's sensitivity to light. While a lower ISO value produces a cleaner image with less digital noise, increasing the ISO allows for shooting in low-light conditions without reducing shutter speed, albeit at the cost of introducing grain. Professional cinematographers often strive to shoot at the camera's native ISO to maximize dynamic range and ensure the highest possible signal-to-noise ratio for the final grade.`,`Shutter angle is a terminology used in motion picture cameras to describe the duration of exposure. A standard 180-degree shutter angle means the shutter is open for half the duration of each frame, resulting in natural-looking motion blur that mimics the human eye. Deviating from this standard, such as using a narrow 45-degree shutter, creates a staccato, choppy effect often used in action sequences to heighten the sense of chaos and intensity.`,`Depth of field is controlled by the aperture, focal length, and distance to the subject. A wide aperture (low f-stop) creates a shallow depth of field, isolating the subject against a soft, bokeh-filled background, which is a hallmark of the cinematic look. Conversely, a narrow aperture (high f-stop) increases the depth of field, keeping both the foreground and background in sharp focus, often used in landscape photography or deep-focus cinematography.`,`Color grading is the post-production process of altering and enhancing the color of a motion picture, video image, or still image. Unlike color correction, which fixes exposure and white balance issues, grading is a creative choice used to establish a visual tone or mood. For example, a 'teal and orange' look is commonly used in blockbusters to create color contrast between skin tones and the environment.`,`Video compression codecs like H.264 and ProRes determine how video data is stored and played back. Intra-frame codecs compress each frame individually, resulting in larger file sizes but requiring less processing power to edit. Inter-frame codecs, however, save space by only storing the differences between frames, which makes them efficient for delivery but more taxing on the CPU during the editing process.`,`Three-point lighting is a standard method used in visual media. It consists of a key light, which is the primary light source illuminating the subject; a fill light, which softens the shadows created by the key light; and a backlight (or rim light), which separates the subject from the background by creating a glowing edge. Mastering this setup is fundamental to creating professional-looking interviews and narrative scenes.`,`The sample rate in digital audio determines how many times per second the sound wave is measured. The standard for video production is 48kHz, which is sufficient to capture the full range of human hearing. Bit depth, on the other hand, determines the dynamic range of the audio. Recording at 24-bit provides a much lower noise floor than 16-bit, allowing for more flexibility in post-production when adjusting levels.`,`Focal length affects not just magnification but also the psychological impact of a shot. A wide-angle lens exaggerates perspective, making objects appear further apart and movement seem faster, often creating a sense of unease or dynamism. A telephoto lens compresses space, making background elements appear closer to the subject, which can feel claustrophobic or intimate depending on the context.`],sv=[{keys:[`B`],label:`Blade Mode`},{keys:[`A`],label:`Selection Mode`},{keys:[`I`],label:`Mark In`},{keys:[`O`],label:`Mark Out`},{keys:[`J`],label:`Play Reverse`},{keys:[`K`],label:`Pause`},{keys:[`L`],label:`Play Forward`},{keys:[`M`],label:`Add Marker`}],cv=[{min:0,title:`Intern`,icon:``},{min:25,title:`Runner`,icon:``},{min:50,title:`Camera Op`,icon:``},{min:100,title:`Editor`,icon:``},{min:200,title:`Producer`,icon:``},{min:400,title:`Studio Head`,icon:``}],lv=()=>{for(let e=0;e<40;e++){let e=document.createElement(`div`);e.innerText=ev,e.style.position=`fixed`,e.style.left=Math.random()*100+`vw`,e.style.top=Math.random()*100+`vh`,e.style.fontSize=Math.random()*20+10+`px`,e.style.pointerEvents=`none`,e.style.zIndex=`9999`,e.style.transition=`transform 1s ease-out, opacity 1s ease-out`,document.body.appendChild(e);let t=Math.random()*Math.PI*2,n=Math.random()*200+50,r=Math.cos(t)*n,i=Math.sin(t)*n;requestAnimationFrame(()=>{e.style.transform=`translate(${r}px, ${i}px) rotate(${Math.random()*360}deg)`,e.style.opacity=`0`}),setTimeout(()=>e.remove(),1e3)}},uv=e=>{let t=e||0;return[...cv].reverse().find(e=>t>=e.min)||cv[0]},dv=({children:e,className:t=``})=>(0,Z.jsx)(`div`,{className:`bg-white rounded-xl shadow-sm border border-slate-100 p-4 ${t}`,children:e}),fv=({onClick:e,disabled:t,children:n,variant:r=`primary`,className:i=``})=>(0,Z.jsx)(`button`,{onClick:e,disabled:t,className:`px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center justify-center gap-2 active:scale-95 ${{primary:`bg-pink-500 hover:bg-pink-600 text-white shadow-lg shadow-pink-200 disabled:bg-pink-300 disabled:shadow-none`,secondary:`bg-slate-100 hover:bg-slate-200 text-slate-700 disabled:bg-slate-50`,outline:`border-2 border-slate-200 hover:border-pink-500 hover:text-pink-500 text-slate-600`,success:`bg-green-500 hover:bg-green-600 text-white shadow-lg shadow-green-200 disabled:bg-green-300`,danger:`bg-red-500 hover:bg-red-600 text-white shadow-lg shadow-red-200 disabled:bg-red-300`}[r]} ${i}`,children:n}),pv=({icon:e,label:t,active:n,onClick:r,badge:i})=>(0,Z.jsx)(`button`,{onClick:r,className:`flex flex-col items-center gap-1 w-16 transition-colors relative ${n?`text-pink-500`:`text-slate-400 hover:text-slate-600`}`,children:(0,Z.jsxs)(`div`,{className:`relative`,children:[(0,Z.jsx)(e,{size:24,strokeWidth:n?2.5:2}),i>0&&(0,Z.jsx)(`span`,{className:`absolute -top-2 -right-2 bg-red-500 text-white text-[10px] font-bold h-4 w-4 flex items-center justify-center rounded-full shadow-sm`,children:i}),(0,Z.jsx)(`span`,{className:`text-[10px] font-medium`,children:t})]})}),mv=({icon:e,color:t,isOnline:n,size:r=`md`,onClick:i})=>(0,Z.jsxs)(`div`,{onClick:i,className:`relative ${{sm:`w-8 h-8 text-sm`,md:`w-12 h-12 text-xl`,lg:`w-24 h-24 text-4xl`}[r]} flex items-center justify-center rounded-lg border-2 border-slate-900 shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] transition-transform hover:scale-105 cursor-pointer select-none`,style:{backgroundColor:t},children:[(0,Z.jsx)(`div`,{className:`drop-shadow-md filter`,children:e}),n&&(0,Z.jsx)(`div`,{className:`absolute -top-1 -right-1 w-3 h-3 bg-green-400 border-2 border-slate-900 rounded-full animate-pulse shadow-sm`})]}),hv=({users:e,currentUser:t,onEditProfile:n})=>{let r=e.filter(e=>e.last_seen?Date.now()-e.last_seen.toMillis()<300*1e3:!1).filter(e=>e.name!==t?.name).sort((e,t)=>e.name.localeCompare(t.name));return(0,Z.jsx)(`div`,{className:`bg-slate-800 border-b-4 border-slate-900 p-3 pb-8 overflow-x-auto no-scrollbar`,children:(0,Z.jsxs)(`div`,{className:`flex items-center gap-4 min-w-max px-2`,children:[(0,Z.jsxs)(`div`,{className:`flex items-center gap-2 mr-4 border-r border-slate-600 pr-4`,children:[(0,Z.jsxs)(`div`,{className:`text-xs font-bold text-slate-400 uppercase tracking-widest`,children:[`Live`,(0,Z.jsx)(`br`,{}),`Studio`]}),(0,Z.jsx)(`div`,{className:`w-2 h-2 bg-green-500 rounded-full animate-pulse shadow-[0_0_10px_rgba(34,197,94,0.8)]`})]}),t&&(0,Z.jsxs)(`div`,{className:`group relative mr-4`,children:[(0,Z.jsx)(mv,{icon:t.live_avatar_icon||``,color:t.live_avatar_color||`#9CA3AF`,isOnline:!0,onClick:n}),(0,Z.jsx)(`div`,{onClick:n,className:`absolute -bottom-1 -right-1 bg-white text-slate-900 rounded-full p-0.5 border border-slate-900 shadow-sm group-hover:scale-110 transition-transform cursor-pointer`,children:(0,Z.jsx)(M_,{size:10})}),(0,Z.jsx)(`div`,{className:`absolute top-full mt-2 left-1/2 -translate-x-1/2 bg-slate-900 text-white text-[10px] font-bold px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-50 pointer-events-none`,children:`You`})]}),r.length>0&&(0,Z.jsx)(`div`,{className:`w-px h-8 bg-slate-700 mx-2`}),r.length>0?r.map(e=>(0,Z.jsxs)(`div`,{className:`group relative animate-in fade-in slide-in-from-right-4 duration-500`,children:[(0,Z.jsx)(mv,{icon:e.live_avatar_icon||``,color:e.live_avatar_color||`#9CA3AF`,isOnline:!0,size:`sm`}),(0,Z.jsx)(`div`,{className:`absolute top-full mt-2 left-1/2 -translate-x-1/2 bg-slate-900 text-white text-[10px] font-bold px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-50 pointer-events-none`,children:e.name})]},e.name)):(0,Z.jsxs)(`div`,{className:`flex items-center gap-2 text-slate-500 animate-in fade-in duration-700`,children:[(0,Z.jsx)(`span`,{className:`text-2xl grayscale opacity-50`,children:``}),(0,Z.jsx)(`span`,{className:`text-xs font-medium italic`,children:`The studio is quiet...`})]})]})})},gv=({isOpen:e,onClose:t,currentData:n,onSave:r})=>{let[i,a]=(0,l.useState)(n?.color||tv[0]),[o,s]=(0,l.useState)(n?.icon||nv[0]);return e?(0,Z.jsx)(`div`,{className:`fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-in fade-in duration-200`,children:(0,Z.jsxs)(`div`,{className:`bg-white rounded-2xl border-4 border-slate-900 shadow-2xl max-w-md w-full overflow-hidden animate-in zoom-in-95 duration-200`,children:[(0,Z.jsxs)(`div`,{className:`bg-slate-100 p-4 border-b-2 border-slate-200 flex justify-between items-center`,children:[(0,Z.jsxs)(`h2`,{className:`text-xl font-black text-slate-800 flex items-center gap-2`,children:[(0,Z.jsx)(z_,{className:`text-purple-500`}),` Dressing Room`]}),(0,Z.jsx)(`button`,{onClick:t,className:`text-slate-400 hover:text-slate-600`,children:(0,Z.jsx)(S_,{})})]}),(0,Z.jsxs)(`div`,{className:`p-6 space-y-6`,children:[(0,Z.jsx)(`div`,{className:`flex justify-center`,children:(0,Z.jsxs)(`div`,{className:`text-center`,children:[(0,Z.jsx)(`p`,{className:`text-xs font-bold text-slate-400 uppercase mb-2`,children:`Preview`}),(0,Z.jsx)(mv,{icon:o,color:i,isOnline:!0,size:`lg`})]})}),(0,Z.jsxs)(`div`,{children:[(0,Z.jsx)(`p`,{className:`text-xs font-bold text-slate-400 uppercase mb-2`,children:`Choose Background`}),(0,Z.jsx)(`div`,{className:`flex flex-wrap gap-2 justify-center`,children:tv.map(e=>(0,Z.jsx)(`button`,{onClick:()=>a(e),className:`w-8 h-8 rounded-lg border-2 transition-transform hover:scale-110 ${i===e?`border-slate-900 scale-110 ring-2 ring-offset-2 ring-slate-200`:`border-transparent`}`,style:{backgroundColor:e}},e))})]}),(0,Z.jsxs)(`div`,{children:[(0,Z.jsx)(`p`,{className:`text-xs font-bold text-slate-400 uppercase mb-2`,children:`Choose Icon`}),(0,Z.jsx)(`div`,{className:`grid grid-cols-5 gap-2`,children:nv.map(e=>(0,Z.jsx)(`button`,{onClick:()=>s(e),className:`w-10 h-10 flex items-center justify-center text-xl rounded-lg border-2 transition-all hover:bg-slate-50 ${o===e?`border-slate-900 bg-slate-50 shadow-sm`:`border-slate-100`}`,children:e},e))})]}),(0,Z.jsx)(`button`,{onClick:()=>r(i,o),className:`w-full bg-slate-900 text-white font-bold py-3 rounded-xl hover:bg-slate-800 transition-colors shadow-lg active:scale-95`,children:`Save & Update`})]})]})}):null};function _v({user:e,onDeposit:t,onWithdraw:n,onPayInterest:r,isAdmin:i,allUsers:a}){let[o,s]=(0,l.useState)(``),c=e.balance||0,u=e.bank_balance||0,d=.1,f=Math.floor(u*d),p=Math.floor((f+1)/d)-u,m=a.reduce((e,t)=>e+(t.bank_balance||0),0),h=a.reduce((e,t)=>e+Math.floor((t.bank_balance||0)*d),0);return(0,Z.jsxs)(`div`,{className:`space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500`,children:[(0,Z.jsxs)(dv,{className:`bg-gradient-to-br from-slate-800 to-slate-900 text-white relative overflow-hidden`,children:[(0,Z.jsx)(`div`,{className:`absolute top-0 right-0 p-8 opacity-10`,children:(0,Z.jsx)(k_,{size:120})}),(0,Z.jsxs)(`div`,{className:`relative z-10`,children:[(0,Z.jsxs)(`h2`,{className:`text-2xl font-bold flex items-center gap-2 mb-1`,children:[(0,Z.jsx)(k_,{className:`text-yellow-400`}),` The Donut Bank`]}),(0,Z.jsx)(`p`,{className:`text-slate-400 text-sm mb-6`,children:`Secure your sweets. Earn interest.`}),(0,Z.jsxs)(`div`,{className:`grid grid-cols-2 gap-4 mb-6`,children:[(0,Z.jsxs)(`div`,{className:`bg-white/10 p-4 rounded-xl backdrop-blur-sm`,children:[(0,Z.jsx)(`p`,{className:`text-xs text-slate-400 uppercase font-bold`,children:`Wallet`}),(0,Z.jsxs)(`p`,{className:`text-2xl font-bold`,children:[c,` `,ev]})]}),(0,Z.jsxs)(`div`,{className:`bg-white/10 p-4 rounded-xl backdrop-blur-sm border border-yellow-500/30`,children:[(0,Z.jsx)(`p`,{className:`text-xs text-yellow-400 uppercase font-bold`,children:`Bank Balance`}),(0,Z.jsxs)(`p`,{className:`text-2xl font-bold text-yellow-400`,children:[u,` `,ev]})]})]}),(0,Z.jsxs)(`div`,{className:`bg-white/5 p-4 rounded-xl border border-white/10`,children:[(0,Z.jsxs)(`div`,{className:`flex justify-between items-center mb-2`,children:[(0,Z.jsx)(`span`,{className:`text-sm font-bold text-slate-300`,children:`Projected Interest (10%)`}),(0,Z.jsxs)(`span`,{className:`text-xl font-bold text-green-400`,children:[`+`,f,` `,ev]})]}),(0,Z.jsx)(`div`,{className:`w-full bg-slate-700 h-1.5 rounded-full overflow-hidden`,children:(0,Z.jsx)(`div`,{className:`bg-green-500 h-full`,style:{width:`${u%10*10}%`}})}),(0,Z.jsx)(`p`,{className:`text-[10px] text-slate-500 mt-2 text-right`,children:p>0?`Deposit ${p} more to earn +1 interest!`:`Maximizing interest!`}),(0,Z.jsx)(`p`,{className:`text-[10px] text-slate-500 mt-1 italic text-center`,children:`"The Bank doesn't deal in crumbs. We round down."`})]})]})]}),(0,Z.jsxs)(dv,{children:[(0,Z.jsxs)(`h3`,{className:`font-bold text-slate-700 mb-4 flex items-center gap-2`,children:[(0,Z.jsx)(v_,{size:16}),` Teller Window`]}),(0,Z.jsxs)(`div`,{className:`flex flex-col gap-4`,children:[(0,Z.jsxs)(`div`,{className:`relative`,children:[(0,Z.jsx)(`span`,{className:`absolute left-3 top-3 text-slate-400 font-bold`,children:ev}),(0,Z.jsx)(`input`,{type:`number`,className:`w-full pl-10 p-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-pink-500 outline-none font-bold text-lg`,placeholder:`Amount`,value:o,onChange:e=>s(e.target.value)})]}),(0,Z.jsxs)(`div`,{className:`grid grid-cols-2 gap-3`,children:[(0,Z.jsx)(fv,{onClick:()=>{t(parseInt(o)),s(``)},disabled:!o||parseInt(o)<=0||parseInt(o)>c,className:`w-full py-3`,children:`Deposit`}),(0,Z.jsx)(fv,{variant:`outline`,onClick:()=>{n(parseInt(o)),s(``)},disabled:!o||parseInt(o)<=0||parseInt(o)>u,className:`w-full py-3`,children:`Withdraw`})]}),(0,Z.jsxs)(`div`,{className:`flex justify-center gap-4 text-xs text-slate-400`,children:[(0,Z.jsx)(`button`,{onClick:()=>s(c),className:`hover:text-pink-500`,children:`Max Deposit`}),(0,Z.jsx)(`button`,{onClick:()=>s(u),className:`hover:text-pink-500`,children:`Max Withdraw`})]})]})]}),i&&(0,Z.jsxs)(`div`,{className:`bg-slate-800 text-white border border-slate-700 rounded-xl shadow-sm p-4`,children:[(0,Z.jsxs)(`h3`,{className:`font-bold text-yellow-400 mb-2 flex items-center gap-2`,children:[(0,Z.jsx)(w_,{size:16}),` Bank Manager Controls`]}),(0,Z.jsxs)(`div`,{className:`space-y-2 text-sm text-slate-300 mb-4`,children:[(0,Z.jsxs)(`div`,{className:`flex justify-between`,children:[(0,Z.jsx)(`span`,{children:`Total Deposits:`}),(0,Z.jsxs)(`span`,{className:`font-bold`,children:[m,` `,ev]})]}),(0,Z.jsxs)(`div`,{className:`flex justify-between`,children:[(0,Z.jsx)(`span`,{children:`Total Payout:`}),(0,Z.jsxs)(`span`,{className:`font-bold text-green-400`,children:[h,` `,ev]})]})]}),(0,Z.jsx)(fv,{variant:`success`,className:`w-full`,onClick:()=>{confirm(`Pay out ${h} donuts in interest to all users?`)&&r()},disabled:h===0,children:`Pay Interest (10%)`}),(0,Z.jsxs)(`div`,{className:`mt-6 pt-6 border-t border-slate-700`,children:[(0,Z.jsxs)(`h4`,{className:`font-bold text-sm text-slate-400 mb-3 uppercase tracking-wider flex items-center gap-2`,children:[(0,Z.jsx)(N_,{size:14}),` Depositor Ledger`]}),(0,Z.jsxs)(`div`,{className:`space-y-1 max-h-60 overflow-y-auto pr-2 custom-scrollbar`,children:[a.filter(e=>(e.bank_balance||0)>0).sort((e,t)=>(t.bank_balance||0)-(e.bank_balance||0)).map((e,t)=>(0,Z.jsxs)(`div`,{className:`flex justify-between items-center text-sm p-2 rounded hover:bg-white/5 transition-colors`,children:[(0,Z.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,Z.jsxs)(`span`,{className:`text-slate-500 font-mono text-xs w-4`,children:[t+1,`.`]}),(0,Z.jsx)(`span`,{className:`font-bold text-slate-200`,children:e.name})]}),(0,Z.jsxs)(`span`,{className:`font-mono text-yellow-400 font-bold`,children:[e.bank_balance,` `,ev]})]},e.id)),a.filter(e=>(e.bank_balance||0)>0).length===0&&(0,Z.jsx)(`p`,{className:`text-slate-500 text-xs italic text-center py-4`,children:`The vault is empty.`})]})]})]})]})}function vv(){let[e,t]=(0,l.useState)(null),[n,r]=(0,l.useState)(!0),[i,a]=(0,l.useState)(`give`),[o,s]=(0,l.useState)([]),[c,u]=(0,l.useState)([]),[d,f]=(0,l.useState)({tickets:[],lastWinner:null,lastWinDate:null}),[p,m]=(0,l.useState)([]),[h,g]=(0,l.useState)({current:0,target:50,title:`Frosted Friday Goal`,contributors:{}}),[_,v]=(0,l.useState)(null),[y,b]=(0,l.useState)(null),[x,ee]=(0,l.useState)(!1),[S,C]=(0,l.useState)(!1),[w,te]=(0,l.useState)([]),[ne,re]=(0,l.useState)(Z_),[ie,ae]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let e=J(Q,`artifacts`,$,`public`,`data`,`config`,`roster`),t=rf(e,t=>{if(t.exists()){let n=t.data();n.names&&Array.isArray(n.names)?re(n.names):$d(e,{names:Z_},{merge:!0})}else $d(e,{names:Z_},{merge:!0})});return()=>t()},[]);let[oe,se]=(0,l.useState)(!1),ce=_?.name===`Mr Rayner`,T=(e,t=`success`)=>{b({msg:e,type:t}),setTimeout(()=>b(null),3e3)};(0,l.useEffect)(()=>{(async()=>{if(await X_.authStateReady(),!X_.currentUser)try{await Lm(X_)}catch(e){console.warn(`Guest login skipped:`,e.code)}})();let e=Zm(X_,async e=>{if(t(e),e){let t=rf(J(Q,`artifacts`,$,`users`,e.uid,`profile`,`data`),e=>{e.exists()?v(e.data()):v(null),r(!1)},e=>{console.error(`Profile snapshot error`,e),r(!1),T(`Connection issue. Please refresh.`,`error`)});return()=>t()}else r(!1)}),n=setTimeout(()=>{r(e=>e&&(console.warn(`Loading timed out. Forcing UI render.`),T(`Loading timed out. Check connection.`,`error`),!1))},1e4);return()=>{e(),clearTimeout(n)}},[]),(0,l.useEffect)(()=>{if(!e||!_)return;let t=async()=>{try{let t=ff(),n=J(Q,`artifacts`,$,`users`,e.uid,`profile`,`data`),r=J(Q,`artifacts`,$,`public`,`data`,`users`,_.name);await ef(n,{last_seen:t}),await ef(r,{last_seen:t})}catch(e){console.error(`Heartbeat failed:`,e)}};t();let n=setInterval(t,300*1e3);return()=>clearInterval(n)},[e,_?.name]);let le=async(t,n)=>{if(!(!e||!_))try{let r=J(Q,`artifacts`,$,`users`,e.uid,`profile`,`data`),i=J(Q,`artifacts`,$,`public`,`data`,`users`,_.name),a={live_avatar_color:t,live_avatar_icon:n};await ef(r,a),await ef(i,a),v(e=>({...e,...a})),se(!1),T(`Profile Updated! Looking fresh. `)}catch(e){console.error(`Profile update failed:`,e),T(`Could not update profile.`,`error`)}};(0,l.useEffect)(()=>{try{let e=rf(J(Q,`config`,`shop`),e=>{if(e.exists()){let t=e.data();te(Array.isArray(t.featuredItemIds)?t.featuredItemIds:[])}},e=>{console.error(`Error fetching shop config:`,e)});return()=>e()}catch(e){console.error(`Error setting up shop listener:`,e)}},[]),(0,l.useEffect)(()=>{if(!e){s([]),u([]),m([]);return}let t=rf(Nd(Uu(Q,`artifacts`,$,`public`,`data`,`users`)),e=>{s(e.docs.map(e=>({id:e.id,...e.data()})))},e=>console.error(`Users error`,e)),n=rf(Nd(Uu(Q,`artifacts`,$,`public`,`data`,`transactions`),Ld(`timestamp`,`desc`),zd(25)),e=>{u(e.docs.map(e=>({id:e.id,...e.data()})))},e=>console.error(`Feed error`,e)),r=J(Q,`artifacts`,$,`public`,`data`,`goals`,`active_goal`),i=rf(r,e=>{e.exists()?g(e.data()):$d(r,{current:0,target:50,title:`Frosted Friday Goal`,contributors:{}})},e=>console.error(`Goal error`,e)),a=rf(Nd(Uu(Q,`artifacts`,$,`public`,`data`,`bounties`),Ld(`createdAt`,`desc`)),e=>{m(e.docs.map(e=>({id:e.id,...e.data()})))},e=>console.error(`Bounties error`,e)),o=rf(J(Q,`artifacts`,$,`public`,`data`,`raffle`,`state`),e=>{e.exists()?f(e.data()):f(null)},e=>console.error(`Raffle error`,e));return()=>{t(),n(),i(),a(),o()}},[e]),(0,l.useEffect)(()=>{if(!e||!_||o.length===0||x)return;let t=o.find(e=>e.name===_.name);if(t){let n=t.balance||0,r=_.balance||0,i=t.bank_balance||0,a=_.bank_balance||0;(n!==r||i!==a)&&ef(J(Q,`artifacts`,$,`users`,e.uid,`profile`,`data`),{balance:n,bank_balance:i}).catch(console.error)}},[e,_,o,x]);let E=p.filter(t=>!(t.status!==`open`||t.expiresAt&&t.expiresAt<Date.now()&&e.uid!==`admin_uid_placeholder`)).length,D=uv(o.find(e=>e.name===_?.name)?.lifetime_given||0),ue=async(e,t)=>{let n=J(Q,`artifacts`,$,`public`,`data`,`users`,t),r=await Zd(n),i=0,a=0,o=0,s=`hsl(${Math.random()*360}, 70%, 50%)`,c=!1,l=tv[e.charCodeAt(0)%tv.length],u=nv[e.charCodeAt(e.length-1)%nv.length];if(r.exists()){let e=r.data();i=e.balance||0,a=e.lifetime_given||0,o=e.lifetime_received||i,e.avatar_color&&(s=e.avatar_color),e.rainbow_name&&(c=e.rainbow_name)}let d={name:t,balance:i,bank_balance:0,given_today:0,last_given_date:new Date().toDateString(),last_training_date:null,last_training_date_sudden_death:null,last_training_date_ninja:null,training_earned_today:0,training_last_earned_date:new Date().toDateString(),sudden_death_won:!1,typing_license:!1,avatar_color:s,live_avatar_color:l,live_avatar_icon:u,last_seen:ff()};await $d(J(Q,`artifacts`,$,`users`,e,`profile`,`data`),d),await $d(n,{name:t,balance:i,lifetime_given:a,lifetime_received:o,avatar_color:s,rainbow_name:c,claimed:!0,uid:e,typing_license:!1,live_avatar_color:l,live_avatar_icon:u,last_seen:ff()},{merge:!0})},de=async(e,n,i=!1)=>{if(!(!e||!n)){r(!0);try{if(i){ee(!0);let n=o.find(t=>t.name===e);if(n){t({uid:n.uid||`dev-uid`,name:n.name});let i=await Zd(J(Q,`artifacts`,$,`users`,n.uid,`profile`,`data`));i.exists()?v(i.data()):v({name:n.name,balance:n.balance||0,bank_balance:n.bank_balance||0,given_today:0,last_given_date:new Date().toDateString(),last_training_date:null,typing_license:!0,avatar_color:n.avatar_color||`hsl(${Math.random()*360}, 70%, 50%)`}),T(`Welcome to Sandbox, ${e}!`),r(!1);return}else{T(`Sandbox user not found. Try a real user name or create one first.`,`error`),r(!1);return}}ee(!1);let a=(await Km(X_,`${e.replace(/\s+/g,``).toLowerCase()}@yumdonut.school`,n)).user.uid;(await Zd(J(Q,`artifacts`,$,`users`,a,`profile`,`data`))).exists()?T(`Welcome back, ${e}!`):(await ue(a,e),T(`Welcome back, ${e}! Profile restored.`))}catch(t){if(t.code===`auth/invalid-credential`||t.code===`auth/user-not-found`||t.code===`auth/invalid-email`)try{let t=await Gm(X_,`${e.replace(/\s+/g,``).toLowerCase()}@yumdonut.school`,n);await Jm(t.user,{displayName:e}),await ue(t.user.uid,e),T(`Account created for ${e}!`)}catch(e){console.error(e),T(`Could not create account.`,`error`)}else console.error(t),T(`Login failed. Check password.`,`error`)}r(!1)}},fe=()=>{Qm(X_),ee(!1),window.location.reload()},pe=async(t,n,r=1)=>{if(!_)return;if(x){T(`Sandbox: Gave ${r} donut(s) to ${t} (Simulated)`,`info`);return}let i=new Date().toDateString(),o=_.last_given_date===i?_.given_today:0;if(_.name!==`Mr Rayner`&&o+r>Q_){T(`You only have ${Q_-o} ${ev} left!`,`error`);return}try{lv(),await nf(Uu(Q,`artifacts`,$,`public`,`data`,`transactions`),{fromName:_.name,toName:t,message:n,timestamp:ff(),emoji:ev,amount:r,likes:[]}),await ef(J(Q,`artifacts`,$,`users`,e.uid,`profile`,`data`),{given_today:o+r,last_given_date:i});let s=J(Q,`artifacts`,$,`public`,`data`,`users`,_.name),c=await Zd(s);c.exists()&&await ef(s,{lifetime_given:(c.data().lifetime_given||0)+r});let l=J(Q,`artifacts`,$,`public`,`data`,`users`,t),u=await Zd(l);if(u.exists()){let e=u.data().balance||0,t=u.data().lifetime_received||e;await ef(l,{balance:e+r,lifetime_received:t+r})}else await $d(l,{name:t,balance:r,lifetime_given:0,lifetime_received:r,avatar_color:`hsl(${Math.random()*360}, 60%, 80%)`,claimed:!1,last_training_date:null});T(`Sent ${r} ${ev} successfully!`),a(`feed`)}catch(e){console.error(e),T(`Failed to send donut.`,`error`)}},me=async(e,t)=>{if(_){if(x){T(`Sandbox: Munched 1 donut from ${e} (Simulated)`,`info`);return}try{let n=J(Q,`artifacts`,$,`public`,`data`,`users`,e),r=await Zd(n);if(!r.exists()){T(`User has no wallet to munch!`,`error`);return}let i=r.data().balance||0,o=r.data().bank_balance||0,s={},c=``;if(i>=1)s={balance:i-1},c=`wallet`;else if(o>=1)s={bank_balance:o-1},c=`bank`;else{T(`The Muncher goes hungry (0 donuts anywhere).`,`error`);return}await ef(n,s),await nf(Uu(Q,`artifacts`,$,`public`,`data`,`transactions`),{fromName:`The Donut Muncher`,toName:`Someone`,message:`Nom nom! Ate a donut from ${c===`bank`?`the BANK`:`wallet`} because: ${t}`,timestamp:ff(),emoji:``,amount:1,likes:[]}),T(`Munched 1 donut from ${e}'s ${c}!`),a(`feed`)}catch(e){console.error(e),T(`Munch failed.`,`error`)}}},he=async(e,t)=>{t&&t.includes(_.name)||await ef(J(Q,`artifacts`,$,`public`,`data`,`transactions`,e),{likes:pf(_.name)})},ge={WHANAUNGATANGA:{id:`WHANAUNGATANGA`,label:`Whanaungatanga`,color:`bg-teal-500`,lightColor:`bg-teal-50`,borderColor:`border-teal-200`,textColor:`text-teal-700`,icon:``,virtues:[`Connection`,`Belonging`,`Teamwork`,`Inclusion`,`Support`]},EKEA:{id:`EKEA`,label:`Ekea`,color:`bg-emerald-600`,lightColor:`bg-emerald-50`,borderColor:`border-emerald-200`,textColor:`text-emerald-800`,icon:``,virtues:[`Empowerment`,`Ownership`,`Leadership`,`Initiative`,`Growth`]},RAAKAU:{id:`RAAKAU`,label:`Raakau`,color:`bg-green-500`,lightColor:`bg-green-50`,borderColor:`border-green-200`,textColor:`text-green-700`,icon:``,virtues:[`Resilience`,`Perseverance`,`Courage`,`Determination`,`Strength`]},ORA:{id:`ORA`,label:`Ora`,color:`bg-lime-400`,lightColor:`bg-lime-50`,borderColor:`border-lime-200`,textColor:`text-lime-800`,icon:``,virtues:[`Wellbeing`,`Open-mindedness`,`Balance`,`Kindness`,`Positivity`]}};return n?(0,Z.jsx)(`div`,{className:`flex items-center justify-center min-h-screen bg-pink-50`,children:(0,Z.jsx)(`div`,{className:`animate-spin text-4xl`,children:ev})}):!e||!_?(0,Z.jsx)(bv,{onLogin:de,existingUsers:o,roster:ne}):(0,Z.jsxs)(`div`,{className:`min-h-screen font-sans text-slate-800 pb-20 md:pb-0 transition-colors duration-500 ${i===`give`&&y?.type===`munch`?`bg-red-50`:`bg-slate-50`}`,children:[(0,Z.jsx)(hv,{users:o,currentUser:_,onEditProfile:()=>se(!0)}),(0,Z.jsxs)(`div`,{className:`bg-white border-b border-slate-200 sticky top-0 z-10 px-4 py-3 flex justify-between items-center shadow-sm`,children:[x&&(0,Z.jsx)(`div`,{className:`absolute top-0 left-0 w-full bg-yellow-400 text-yellow-900 text-[10px] font-bold text-center uppercase tracking-widest`,children:` Sandbox Mode: Read Only `}),(0,Z.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,Z.jsx)(`div`,{className:`bg-pink-100 p-2 rounded-lg`,children:(0,Z.jsx)(`span`,{className:`text-xl leading-none`,children:ev})}),(0,Z.jsxs)(`div`,{children:[(0,Z.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,Z.jsx)(`h1`,{className:`font-bold text-lg text-slate-900 leading-tight`,children:`YumDonut`}),(0,Z.jsxs)(`button`,{onClick:()=>C(!0),className:`text-[10px] font-bold bg-gradient-to-r from-pink-500 to-purple-600 text-white px-2 py-0.5 rounded-full hover:scale-105 transition-transform shadow-sm flex items-center gap-1`,children:[(0,Z.jsx)(z_,{size:10}),` What's New`]})]}),(0,Z.jsxs)(`div`,{className:`flex flex-col`,children:[(0,Z.jsx)(`p`,{className:`text-xs text-slate-500`,children:`Berkley TV Recognition`}),(0,Z.jsxs)(`div`,{className:`flex items-center gap-1 text-[10px] bg-slate-100 px-1.5 rounded-full w-fit mt-0.5`,children:[(0,Z.jsx)(`span`,{children:D.icon}),(0,Z.jsx)(`span`,{className:`font-bold text-slate-700`,children:D.title})]})]})]})]}),(0,Z.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,Z.jsxs)(`div`,{className:`hidden md:block text-right`,children:[(0,Z.jsxs)(`div`,{className:`flex items-center justify-end gap-2`,children:[(0,Z.jsx)(`p`,{className:`text-sm font-semibold`,children:_.name}),_.name===`Mr Rayner`&&(0,Z.jsx)(`button`,{onClick:()=>ae(!0),className:`text-slate-400 hover:text-blue-600 transition-colors`,title:`Manage Roster`,children:(0,Z.jsx)(K_,{size:14})}),(0,Z.jsx)(`button`,{onClick:()=>se(!0),className:`text-slate-400 hover:text-slate-600 transition-colors`,children:(0,Z.jsx)(I_,{size:14})})]}),(0,Z.jsx)(`p`,{className:`text-xs text-slate-500`,children:_.name===`Mr Rayner`?(0,Z.jsx)(`span`,{className:`text-pink-600 font-bold`,children:` left (Admin)`}):`${Q_-(_.last_given_date===new Date().toDateString()?_.given_today:0)} left to give`})]}),(0,Z.jsx)(`div`,{className:`w-10 h-10 rounded-full flex items-center justify-center text-white font-bold text-sm shadow-inner cursor-pointer hover:opacity-80 transition-opacity`,style:{backgroundColor:_.avatar_color},title:`Click to Logout`,onClick:fe,children:_.name.charAt(0).toUpperCase()})]})]}),(0,Z.jsx)(gv,{isOpen:oe,onClose:()=>se(!1),currentData:{color:_.live_avatar_color,icon:_.live_avatar_icon},onSave:le}),ie&&(0,Z.jsx)(Sv,{onClose:()=>ae(!1),roster:ne}),(0,Z.jsxs)(`div`,{className:`max-w-md md:max-w-2xl mx-auto p-4 pb-24 md:pb-4`,children:[S&&(0,Z.jsx)(xv,{onClose:()=>C(!1)}),y&&(0,Z.jsx)(`div`,{className:`fixed top-4 left-1/2 -translate-x-1/2 px-6 py-3 rounded-full shadow-xl z-50 animate-bounce ${y.type===`error`?`bg-red-500 text-white`:`bg-green-500 text-white`}`,children:y.msg}),(0,Z.jsx)(`div`,{className:`flex overflow-x-auto justify-between border-b border-slate-200 mb-4 pb-1 no-scrollbar`,children:[`give`,`jobs`,`shop`,`bank`,`training`,`goal`,`feed`,`leaderboard`].map(e=>(0,Z.jsxs)(`button`,{onClick:()=>a(e),className:`px-3 py-2 font-medium text-sm capitalize border-b-2 transition-colors whitespace-nowrap relative ${i===e?`border-pink-500 text-pink-600`:`border-transparent text-slate-500 hover:text-slate-700`}`,children:[e,e===`jobs`&&E>0&&(0,Z.jsx)(`span`,{className:`absolute -top-1 -right-1 bg-red-500 text-white text-[10px] font-bold px-1.5 py-0.5 rounded-full shadow-sm`,children:E})]},e))}),i===`give`&&(0,Z.jsx)(Ev,{roster:ne,existingUsers:o,currentUserName:_.name,onGive:pe,onMunch:me,remaining:Q_-(_.last_given_date===new Date().toDateString()?_.given_today:0),coreValues:ge}),i===`jobs`&&(0,Z.jsx)(wv,{bounties:p,currentUser:_,userId:e.uid,onCreate:async(e,t,n,r,i=null)=>{let a=parseInt(n)||1,o=i?new Date(i).getTime():Date.now(),s=null;r&&(s=new Date(r).getTime()),await nf(Uu(Q,`artifacts`,$,`public`,`data`,`bounties`),{title:e,reward:parseInt(t),status:`open`,remaining:a,expiresAt:s,scheduledFor:i?o:null,createdBy:_.name,createdAt:ff()});let c=s?` (Due: ${new Date(s).toLocaleTimeString([],{hour:`numeric`,minute:`2-digit`})})`:``,l=i?` [Scheduled for ${new Date(i).toLocaleTimeString([],{hour:`numeric`,minute:`2-digit`})}]`:``;await nf(Uu(Q,`artifacts`,$,`public`,`data`,`transactions`),{fromName:`Job Board`,toName:`EVERYONE`,message:` New Job ${i?`Scheduled`:`Posted`}: ${e} (${t} ${ev}) - ${a} spots!${c}${l}`,timestamp:ff(),emoji:``,likes:[]}),T(i?`Job Scheduled!`:`Job Posted & Announced!`)},onDelete:async e=>{try{await tf(J(Q,`artifacts`,$,`public`,`data`,`bounties`,e)),T(`Job Deleted!`)}catch(e){console.error(e),T(`Failed to delete job.`,`error`)}},onClaim:async(t,n)=>{if(p.some(t=>t.status===`claimed`&&t.claimantId===e.uid)){T(`Finish your current job first!`,`error`);return}let r=J(Q,`artifacts`,$,`public`,`data`,`bounties`,t);if(n>1){let i=p.find(e=>e.id===t);await df(Q,async a=>{a.update(r,{remaining:n-1});let o=J(Uu(Q,`artifacts`,$,`public`,`data`,`bounties`));a.set(o,{title:i.title,reward:i.reward,status:`claimed`,claimantName:_.name,claimantId:e.uid,createdAt:ff(),parentId:t})})}else await ef(r,{status:`claimed`,remaining:0,claimantName:_.name,claimantId:e.uid});T(`Job Claimed! Good luck.`)},onUnclaim:async e=>{await ef(J(Q,`artifacts`,$,`public`,`data`,`bounties`,e),{status:`open`,claimantName:null,claimantId:null}),T(`Job is open again.`)},onPay:async(e,t,n)=>{try{let r=J(Q,`artifacts`,$,`public`,`data`,`users`,t),i=await Zd(r);if(i.exists()){let e=i.data().balance||0,t=i.data().lifetime_received||e;await ef(r,{balance:e+n,lifetime_received:t+n})}await ef(J(Q,`artifacts`,$,`public`,`data`,`bounties`,e),{status:`paid`}),await nf(Uu(Q,`artifacts`,$,`public`,`data`,`transactions`),{fromName:`Mr Rayner`,toName:t,message:`Completed the bounty: ${n} Donuts awarded!`,timestamp:ff(),emoji:``,likes:[]}),lv(),T(`Bounty Paid!`)}catch(e){console.error(e),T(`Payment failed`,`error`)}},onMarkDone:async e=>{await ef(J(Q,`artifacts`,$,`public`,`data`,`bounties`,e),{status:`pending_review`}),T(`Marked as done! Wait for inspection.`)},onReject:async e=>{await ef(J(Q,`artifacts`,$,`public`,`data`,`bounties`,e),{status:`claimed`}),T(`Work rejected. Student must redo.`)}}),i===`shop`&&(0,Z.jsx)(Cv,{items:rv,userBalance:_?.balance||0,onPurchase:async t=>{if(!_||_.balance<t.cost){T(`Not enough donuts!`,`error`);return}let n=o.find(e=>e.name===_.name);if(t.type===`digital`){if(t.id===`rainbow_name`&&n?.rainbow_name){T(`Already owned!`,`error`);return}if(t.id===`gold_border`&&n?.gold_border){T(`Already owned!`,`error`);return}if(t.id===`neon_name`&&n?.neon_name){T(`Already owned!`,`error`);return}if(t.id===`verified_badge`&&n?.verified_badge){T(`Already owned!`,`error`);return}}try{let n=J(Q,`artifacts`,$,`public`,`data`,`users`,_.name);await df(Q,async e=>{let r=await e.get(n);if(!r.exists())throw`User missing`;let i=null,a=J(Q,`artifacts`,$,`public`,`data`,`raffle`,`state`);t.id===`raffle_ticket`&&(i=await e.get(a));let o=r.data().balance||0;if(o<t.cost)throw`Not enough funds`;let s={balance:o-t.cost};if(t.type===`digital`&&(t.id===`rainbow_name`&&(s.rainbow_name=!0),t.id===`gold_border`&&(s.gold_border=!0),t.id===`neon_name`&&(s.neon_name=!0),t.id===`verified_badge`&&(s.verified_badge=!0)),e.update(n,s),t.id===`raffle_ticket`)if(i&&i.exists()){let t=i.data().tickets||[];e.update(a,{tickets:[...t,_.name]})}else e.set(a,{tickets:[_.name],lastWinner:null,lastWinDate:null});let c=J(Uu(Q,`artifacts`,$,`public`,`data`,`transactions`));e.set(c,{fromName:_.name,toName:`The Shop`,message:`Purchased: ${t.name}`,timestamp:ff(),emoji:``,likes:[]})}),await ef(J(Q,`artifacts`,$,`users`,e.uid,`profile`,`data`),{balance:_.balance-t.cost}),T(`Bought ${t.name}!`),lv()}catch(e){console.error(e),T(`Purchase failed.`,`error`)}},currentUserPublic:_,raffleState:d,onDrawRaffle:async()=>{if(d.tickets.length===0){T(`No tickets sold yet!`,`error`);return}let e=Math.floor(Math.random()*d.tickets.length),t=d.tickets[e];try{await ef(J(Q,`artifacts`,$,`public`,`data`,`raffle`,`state`),{tickets:[],lastWinner:t,lastWinDate:Date.now()}),await nf(Uu(Q,`artifacts`,$,`public`,`data`,`transactions`),{fromName:`The Raffle`,toName:t,message:` RAFFLE WINNER! `,timestamp:ff(),emoji:``,likes:[]}),lv(),T(`Winner: ${t}!`)}catch(e){console.error(e),T(`Draw failed.`,`error`)}},onRestoreRaffle:async()=>{try{let e=Nd(Uu(Q,`artifacts`,$,`public`,`data`,`transactions`),Ld(`timestamp`,`desc`),zd(500)),t=await getDocs(e),n=[];t.forEach(e=>{let t=e.data();t.message&&t.message.includes(`Purchased: Weekly Raffle Ticket`)&&n.push(t.fromName)}),n.length>0?(await $d(J(Q,`artifacts`,$,`public`,`data`,`raffle`,`state`),{tickets:n,lastWinner:null,lastWinDate:null},{merge:!0}),T(`Restored ${n.length} tickets!`),lv()):T(`No ticket purchases found.`,`info`)}catch(e){console.error(e),T(`Restore failed.`,`error`)}},featuredItemIds:w,onToggleFeatured:async e=>{if(!ce)return;let t=w||[],n;n=t.includes(e)?t.filter(t=>t!==e):[...t,e],await $d(J(Q,`config`,`shop`),{featuredItemIds:n},{merge:!0})}}),i===`bank`&&(0,Z.jsx)(_v,{user:_,onDeposit:async t=>{if(!(!_||t<=0)){if(_.balance<t){T(`Not enough donuts in wallet!`,`error`);return}try{let n=J(Q,`artifacts`,$,`users`,e.uid,`profile`,`data`),r=J(Q,`artifacts`,$,`public`,`data`,`users`,_.name);await df(Q,async e=>{let i=await e.get(n),a=await e.get(r);if(!i.exists()||!a.exists())throw`User missing`;let o=i.data().balance||0,s=i.data().bank_balance||0;if(o<t)throw`Insufficient funds`;if(x){T(`Sandbox: Deposited ${t} donuts (Simulated)`,`info`);return}e.update(n,{balance:o-t,bank_balance:s+t}),e.update(r,{balance:o-t,bank_balance:s+t})}),T(`Deposited ${t} donuts!`)}catch(e){console.error(e),T(`Deposit failed.`,`error`)}}},onWithdraw:async t=>{if(!(!_||t<=0)){if((_.bank_balance||0)<t){T(`Not enough donuts in bank!`,`error`);return}try{let n=J(Q,`artifacts`,$,`users`,e.uid,`profile`,`data`),r=J(Q,`artifacts`,$,`public`,`data`,`users`,_.name);await df(Q,async e=>{let i=await e.get(n);await e.get(r);let a=i.data().balance||0,o=i.data().bank_balance||0;if(o<t)throw`Insufficient bank funds`;if(x){T(`Sandbox: Withdrew ${t} donuts (Simulated)`,`info`);return}e.update(n,{balance:a+t,bank_balance:o-t}),e.update(r,{balance:a+t,bank_balance:o-t})}),T(`Withdrew ${t} donuts!`)}catch(e){console.error(e),T(`Withdrawal failed.`,`error`)}}},onPayInterest:async()=>{if(_.name===`Mr Rayner`){if(x){T(`Sandbox: Interest paid (Simulated)`,`info`);return}try{let e=0;for(let t of o){let n=t.bank_balance||0;if(n<10)continue;let r=Math.floor(n*.1);if(r>0){let i=J(Q,`artifacts`,$,`public`,`data`,`users`,t.id);if(t.uid){let a=J(Q,`artifacts`,$,`users`,t.uid,`profile`,`data`);await ef(i,{bank_balance:n+r}),await ef(a,{bank_balance:n+r}),e+=r}}}e>0?(await nf(Uu(Q,`artifacts`,$,`public`,`data`,`transactions`),{fromName:`The Bank`,toName:`EVERYONE`,message:`PAID INTEREST! Total of ${e} Donuts distributed to savers! `,timestamp:ff(),emoji:``,likes:[]}),lv(),T(`Paid ${e} donuts in interest!`)):T(`No interest to pay (nobody has enough savings).`)}catch(e){console.error(e),T(`Interest payout failed.`,`error`)}}},isAdmin:_.name===`Mr Rayner`,allUsers:o}),i===`training`&&(0,Z.jsx)(yv,{user:_,onReward:async(n,r,i=1,a=null,o=`scriptwriter`,s=0)=>{if(!_)return;if(x){T(`Sandbox: Earned ${i} donut(s) (Simulated)`,`info`);return}if(!_.typing_license){T(`Practice complete! Get your license from Mr Rayner to earn donuts.`,`info`);return}let c=new Date().toDateString(),l=`last_training_date`;if(o===`sudden_death`&&(l=`last_training_date_sudden_death`),o===`shortcut_ninja`&&(l=`last_training_date_ninja`),_[l]===c){T(`You've already trained in ${o===`scriptwriter`?`Scriptwriter`:o===`sudden_death`?`Sudden Death`:`Ninja`} mode today!`,`error`);return}if(o!==`shortcut_ninja`&&(n<30||r<95)){T(`Goal not met. Keep practicing!`,`error`);return}let u=1,d=!1;o===`sudden_death`?_.sudden_death_won?u=2:(u=10,d=!0,a=`perfectionist_badge`):u=o===`shortcut_ninja`&&s>=20?2:1;let f=_.training_earned_today||0;if(_.training_last_earned_date!==c&&(f=0),!d&&f+u>3){T(`Daily Training Cap Reached (3/3). Come back tomorrow!`,`error`);return}try{let r=J(Q,`artifacts`,$,`users`,e.uid,`profile`,`data`),i=J(Q,`artifacts`,$,`public`,`data`,`users`,_.name);await df(Q,async e=>{let t=await e.get(r),s=await e.get(i);if(!t.exists()||!s.exists())throw`User missing`;let p=t.data().balance||0,m=t.data().lifetime_received||p,h={balance:p+u,lifetime_received:m+u,[l]:c,training_earned_today:f+u,training_last_earned_date:c};d&&(h.sudden_death_won=!0),a&&(h[a]=!0),n>=50&&(h.silver_border=!0),n>=70&&(h.gold_border=!0),n>=90&&(h.flame_name=!0),e.update(r,h),e.update(i,h);let g=J(Uu(Q,`artifacts`,$,`public`,`data`,`transactions`));e.set(g,{fromName:`Typing Dojo`,toName:_.name,message:`Earned ${u} donut(s) in ${o===`sudden_death`?`Sudden Death`:o===`shortcut_ninja`?`Ninja Mode`:`Training`}! (${o===`shortcut_ninja`?`Streak: ${maxNinjaCombo}`:`${n} WPM`})`,timestamp:ff(),emoji:o===`sudden_death`?``:o===`shortcut_ninja`?``:``,amount:u,likes:[]})}),lv(),T(`Earned ${u} donut(s)!`,`success`),t(e=>({...e,balance:(e.balance||0)+u}));let s=`Training Complete! +${u} Donut${u>1?`s`:``} `;d&&(s+=` & JACKPOT! `),T(s)}catch(e){console.error(e),T(`Reward failed.`,`error`)}},allUsers:o,onUpdateLicense:async(e,t,n)=>{if(x){T(`Sandbox: ${n?`Granted`:`Revoked`} license for ${t} (Simulated)`,`info`);return}try{let r=J(Q,`artifacts`,$,`users`,e,`profile`,`data`),i=J(Q,`artifacts`,$,`public`,`data`,`users`,t);await ef(r,{typing_license:n}),await ef(i,{typing_license:n}),T(`${n?`Granted`:`Revoked`} license for ${t}!`)}catch(e){console.error(e),T(`Failed to update license.`,`error`)}}}),i===`goal`&&(0,Z.jsx)(Tv,{goalData:h,userBalance:_.balance,onContribute:async()=>{if(!_||_.balance<1){T(`Not enough donuts!`,`error`);return}try{let t=J(Q,`artifacts`,$,`public`,`data`,`users`,_.name),n=J(Q,`artifacts`,$,`public`,`data`,`goals`,`active_goal`);await df(Q,async e=>{let r=await e.get(t),i=await e.get(n);if(!r.exists())throw`User missing`;let a=(r.data().balance||0)-1;if(a<0)throw`Not enough donuts!`;let o=(i.data()?.current||0)+1,s=((i.data()?.contributors||{})[_.name]||0)+1;e.update(t,{balance:a}),e.update(n,{current:o,[`contributors.${_.name}`]:s});let c=J(Uu(Q,`artifacts`,$,`public`,`data`,`transactions`));e.set(c,{fromName:_.name,toName:i.data()?.title||`Team Goal`,message:`Contributed to the goal!`,timestamp:ff(),emoji:``,likes:[]})}),await ef(J(Q,`artifacts`,$,`users`,e.uid,`profile`,`data`),{balance:_.balance-1}),T(`Contributed 1 donut!`),lv()}catch(e){console.error(e),T(`Contribution failed.`,`error`)}},currentUserName:_.name,onActivate:async()=>{try{await ef(J(Q,`artifacts`,$,`public`,`data`,`goals`,`active_goal`),{current:0}),await nf(Uu(Q,`artifacts`,$,`public`,`data`,`transactions`),{fromName:`Mr Rayner`,toName:`EVERYONE`,message:` FROSTED FRIDAY IS ON! The goal was met! `,timestamp:ff(),emoji:``,likes:[]}),T(`Activated! Goal reset.`),lv(),a(`feed`)}catch(e){console.error(e),T(`Failed to activate.`,`error`)}},onUpdateGoal:async(e,t)=>{try{await ef(J(Q,`artifacts`,$,`public`,`data`,`goals`,`active_goal`),{title:e,target:parseInt(t)}),T(`Goal updated!`)}catch(e){console.error(e),T(`Update failed.`,`error`)}},onResetGoal:async()=>{ce&&confirm(`Are you sure you want to reset the goal? This will clear all contributions.`)&&(await $d(J(Q,`artifacts`,$,`public`,`data`,`goals`,`active_goal`),{current:0,target:50,title:`Frosted Friday Goal`,contributors:{},isActive:!0}),T(`Goal has been reset!`))},onToggleActive:async e=>{if(console.log(`Toggling Goal Active:`,e,`Is Admin:`,ce),!ce){console.error(`Not admin, cannot toggle.`);return}try{await ef(J(Q,`artifacts`,$,`public`,`data`,`goals`,`active_goal`),{isActive:e}),console.log(`Goal updated successfully to:`,e),T(`Goal is now ${e?`Active`:`Inactive`}`)}catch(e){console.error(`Error toggling goal:`,e),T(`Failed to toggle goal.`,`error`)}}}),i===`feed`&&(0,Z.jsx)(Dv,{transactions:c,onReact:he,coreValues:ge}),i===`leaderboard`&&(0,Z.jsx)(Ov,{users:o,roster:ne})]}),(0,Z.jsxs)(`div`,{className:`md:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-slate-200 px-6 py-3 flex justify-between z-20 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)]`,children:[(0,Z.jsx)(pv,{icon:E_,label:`Give`,active:i===`give`,onClick:()=>a(`give`)}),(0,Z.jsx)(pv,{icon:y_,label:`Jobs`,active:i===`jobs`,onClick:()=>a(`jobs`),badge:E}),(0,Z.jsx)(pv,{icon:L_,label:`Shop`,active:i===`shop`,onClick:()=>a(`shop`)}),(0,Z.jsx)(pv,{icon:k_,label:`Bank`,active:i===`bank`,onClick:()=>a(`bank`)}),(0,Z.jsx)(pv,{icon:O_,label:`Train`,active:i===`training`,onClick:()=>a(`training`)}),(0,Z.jsx)(pv,{icon:__,label:`Feed`,active:i===`feed`,onClick:()=>a(`feed`)})]})]})}function yv({user:e,onReward:t,allUsers:n,onUpdateLicense:r}){let[i,a]=(0,l.useState)(`idle`),[o,s]=(0,l.useState)(`scriptwriter`),[c,u]=(0,l.useState)(null),[d,f]=(0,l.useState)(null),[p,m]=(0,l.useState)(``),[h,g]=(0,l.useState)(null),[_,v]=(0,l.useState)(``),[y,b]=(0,l.useState)(0),[x,ee]=(0,l.useState)(0),S=(0,l.useRef)(null),[C,w]=(0,l.useState)(null),[te,ne]=(0,l.useState)(0),[re,ie]=(0,l.useState)(3),[ae,oe]=(0,l.useState)(0),[se,ce]=(0,l.useState)(0),[T,le]=(0,l.useState)([]),[E,D]=(0,l.useState)(3e3),[ue,de]=(0,l.useState)(0),[fe,pe]=(0,l.useState)(null),me=(0,l.useRef)(null);(0,l.useEffect)(()=>{if(o===`shortcut_ninja`&&i===`playing`){let e=e=>{if([`Space`,`ArrowUp`,`ArrowDown`,`ArrowLeft`,`ArrowRight`].includes(e.code),!C)return;let t=e.key.toLowerCase();if(t===C.keys[0].toLowerCase())_e();else{if([`shift`,`control`,`alt`,`meta`].includes(t))return;ve()}};return window.addEventListener(`keydown`,e),()=>window.removeEventListener(`keydown`,e)}},[o,i,C]),(0,l.useEffect)(()=>{if(o===`shortcut_ninja`&&i===`playing`)return me.current=setInterval(()=>{D(e=>e<=0?(ve(!0),3e3):e-100)},100),()=>clearInterval(me.current)},[o,i]);let he=()=>{ne(0),ie(3),oe(0),ce(0),le([]),D(3e3),a(`playing`),ge()},ge=()=>{let e=sv[Math.floor(Math.random()*sv.length)];w(e),D(3e3),de(Date.now())},_e=()=>{pe(`correct`),setTimeout(()=>pe(null),200);let e=Date.now()-ue,t=e<1e3;le(t=>[...t,e]),oe(e=>{let t=e+1;return ce(e=>Math.max(e,t)),t});let n=t?10:0,r=ae>=10?2:1;ne(e=>e+(10+n)*r),ge()},ve=(e=!1)=>{pe(`wrong`),setTimeout(()=>pe(null),200),ne(e=>Math.max(0,e-5)),oe(0),ie(e=>{let t=e-1;return t<=0?ye():ge(),t})},ye=()=>{clearInterval(me.current),a(`finished`),te>=1e3&&e.typing_license&&t(0,0,1,null,o,se)},be=()=>{if(o===`shortcut_ninja`){he();return}let t,n=null;o===`sudden_death`?(t=ov[Math.floor(Math.random()*ov.length)],n={text:t,source:`Technical Manual`,reward:10}):e.typing_license?(n=iv[Math.floor(Math.random()*iv.length)],t=n.text):t=av[Math.floor(Math.random()*av.length)],g(n),m(t),v(``),a(`playing`),u(Date.now()),f(null),setTimeout(()=>S.current?.focus(),100)},xe=e=>{let t=e.target.value;if(o===`sudden_death`&&!p.startsWith(t)){a(`failed`);return}v(t),t===p&&Se(t)},Se=n=>{let r=Date.now();f(r),a(`finished`);let i=(r-c)/6e4,s=p.split(` `).length,l=Math.round(s/i),u=0,d=n||_;for(let e=0;e<p.length;e++)d[e]===p[e]&&u++;let m=Math.round(u/p.length*100);b(l),ee(m),e.typing_license&&(o===`sudden_death`?m===100&&l>30&&t(l,100,10,`perfectionist_badge`,o):l>30&&m>=95&&t(l,m,h?.reward||1,null,o))},Ce=new Date().toDateString(),we=!1;o===`scriptwriter`&&e.last_training_date===Ce&&(we=!0),o===`sudden_death`&&e.last_training_date_sudden_death===Ce&&(we=!0),o===`shortcut_ninja`&&e.last_training_date_ninja===Ce&&(we=!0);let Te=e.typing_license,Ee=e.name===`Mr Rayner`;return(0,Z.jsxs)(`div`,{className:`space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500`,children:[(0,Z.jsxs)(`div`,{className:`rounded-xl shadow-sm p-6 text-white transition-colors duration-500 ${o===`sudden_death`?`bg-slate-900`:o===`shortcut_ninja`?`bg-slate-800`:Te?`bg-gradient-to-r from-cyan-500 to-blue-500`:`bg-slate-600`}`,children:[(0,Z.jsxs)(`div`,{className:`flex flex-col md:flex-row justify-between items-start gap-4`,children:[(0,Z.jsxs)(`div`,{children:[(0,Z.jsxs)(`h2`,{className:`text-2xl font-bold flex items-center gap-2 whitespace-nowrap`,children:[o===`sudden_death`?(0,Z.jsx)(V_,{className:`text-red-500`}):o===`shortcut_ninja`?(0,Z.jsx)(q_,{className:`text-yellow-400`}):(0,Z.jsx)(O_,{}),o===`sudden_death`?`Sudden Death`:o===`shortcut_ninja`?`Shortcut Ninja`:`Typing Dojo`]}),(0,Z.jsx)(`p`,{className:`opacity-90 mt-1`,children:o===`sudden_death`?`100% Accuracy Required. One mistake = Game Over.`:o===`shortcut_ninja`?`Hit shortcuts fast! Build your combo.`:Te?`Type the movie quote. Earn donuts.`:`Practice Mode. Get licensed to earn rewards.`})]}),(Te||Ee)&&(0,Z.jsxs)(`div`,{className:`flex bg-black/20 rounded-lg p-1`,children:[(0,Z.jsx)(`button`,{onClick:()=>s(`scriptwriter`),className:`px-3 py-1 rounded-md text-xs font-bold transition-all whitespace-nowrap ${o===`scriptwriter`?`bg-white text-blue-600 shadow-sm`:`text-white/70 hover:text-white`}`,children:`Scriptwriter`}),(0,Z.jsx)(`button`,{onClick:()=>s(`sudden_death`),className:`px-3 py-1 rounded-md text-xs font-bold transition-all whitespace-nowrap ${o===`sudden_death`?`bg-red-600 text-white shadow-sm`:`text-white/70 hover:text-white`}`,children:`Sudden Death`}),(0,Z.jsx)(`button`,{onClick:()=>s(`shortcut_ninja`),className:`hidden md:block px-3 py-1 rounded-md text-xs font-bold transition-all whitespace-nowrap ${o===`shortcut_ninja`?`bg-yellow-400 text-slate-900 shadow-sm`:`text-white/70 hover:text-white`}`,children:`Ninja`}),(0,Z.jsx)(`span`,{className:`md:hidden px-3 py-1 text-xs font-bold text-white/30 cursor-not-allowed whitespace-nowrap`,children:`Ninja (PC)`})]})]}),(0,Z.jsx)(`div`,{className:`mt-4 text-sm font-bold inline-block px-3 py-1 rounded-full ${o===`sudden_death`?`bg-red-500/20 text-red-200 border border-red-500/50`:o===`shortcut_ninja`?`bg-yellow-400/20 text-yellow-200 border border-yellow-400/50`:Te?`bg-white/20`:`bg-yellow-400 text-slate-900`}`,children:o===`sudden_death`?e?.sudden_death_won?`Reward: 2 Donuts (Daily Practice)`:`Reward: 10 Donuts +  Badge (First Time Only)`:o===`shortcut_ninja`?`Reward: 1 Donut (2 for 20+ Streak)`:Te?`Daily Goal: >30 WPM & 95% Accuracy`:`PRACTICE MODE (0 Donuts)`})]}),(0,Z.jsxs)(dv,{className:`text-center py-8 transition-colors duration-200 ${fe===`correct`?`bg-green-50 border-green-200 scale-[1.02]`:fe===`wrong`?`bg-red-50 border-red-200 translate-x-1`:``}`,children:[i===`failed`&&o===`sudden_death`&&(0,Z.jsxs)(`div`,{className:`space-y-4 animate-in zoom-in duration-300`,children:[(0,Z.jsx)(`div`,{className:`w-20 h-20 rounded-full bg-red-100 text-red-600 flex items-center justify-center mx-auto mb-4`,children:(0,Z.jsx)(S_,{size:40})}),(0,Z.jsx)(`h3`,{className:`text-2xl font-bold text-red-600`,children:`GAME OVER`}),(0,Z.jsx)(`p`,{className:`text-slate-600`,children:`One mistake is all it takes.`}),(0,Z.jsx)(fv,{onClick:()=>a(`idle`),variant:`outline`,className:`mt-4`,children:`Try Again`})]}),i===`finished`&&o===`shortcut_ninja`&&(0,Z.jsxs)(`div`,{className:`space-y-4 animate-in zoom-in duration-300`,children:[(0,Z.jsx)(`div`,{className:`w-20 h-20 rounded-full bg-yellow-100 text-yellow-600 flex items-center justify-center mx-auto mb-4`,children:(0,Z.jsx)(q_,{size:40})}),(0,Z.jsx)(`h3`,{className:`text-2xl font-bold text-slate-800`,children:`DOJO CLOSED`}),(0,Z.jsxs)(`div`,{className:`text-4xl font-black text-slate-900 my-4`,children:[te,` PTS`]}),(0,Z.jsx)(`div`,{className:`inline-block px-4 py-2 rounded-full font-bold text-white mb-4`,style:{backgroundColor:te>=1500?`#000`:te>=500?`#22c55e`:`#cbd5e1`},children:te>=1500?` BLACK BELT`:te>=500?` GREEN BELT`:` WHITE BELT`}),(0,Z.jsx)(`p`,{className:`text-slate-600`,children:te>=1e3?`Incredible reflexes! You earned a donut.`:`Keep training to reach 1000 points!`}),(0,Z.jsx)(fv,{onClick:()=>a(`idle`),variant:`outline`,className:`mt-4`,children:`Train Again`})]}),i===`idle`&&(0,Z.jsxs)(`div`,{className:`space-y-4`,children:[(0,Z.jsx)(`div`,{className:`w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4 ${o===`sudden_death`?`bg-red-100 text-red-600`:o===`shortcut_ninja`?`bg-yellow-100 text-yellow-600`:Te?`bg-blue-100 text-blue-500`:`bg-slate-100 text-slate-500`}`,children:o===`sudden_death`?(0,Z.jsx)(V_,{size:40}):o===`shortcut_ninja`?(0,Z.jsx)(q_,{size:40}):(0,Z.jsx)(O_,{size:40})}),(0,Z.jsx)(`h3`,{className:`text-xl font-bold text-slate-800`,children:`Ready to Train?`}),(0,Z.jsx)(`p`,{className:`text-slate-500 max-w-md mx-auto`,children:o===`shortcut_ninja`?`Press the correct keys as fast as you can. Don't break your streak!`:`Type the filmmaking quote exactly as it appears. Speed and precision are key!`}),we&&Te?(0,Z.jsx)(`div`,{className:`bg-green-100 text-green-700 p-3 rounded-lg font-bold`,children:`You've already earned your daily donut! Come back tomorrow.`}):(0,Z.jsx)(fv,{onClick:be,className:`w-full max-w-xs py-3 text-lg mx-auto`,children:Te?`Start Challenge`:`Start Practice`})]}),i===`playing`&&o===`shortcut_ninja`&&(0,Z.jsx)(`div`,{className:`max-w-md mx-auto transition-all duration-300 ${ae>=10?`p-1 rounded-2xl bg-gradient-to-r from-yellow-300 via-yellow-500 to-yellow-300 animate-pulse`:``}`,children:(0,Z.jsxs)(`div`,{className:`bg-white rounded-xl p-6 ${ae>=10?`border-4 border-yellow-400`:``}`,children:[(0,Z.jsxs)(`div`,{className:`flex justify-between items-center mb-8`,children:[(0,Z.jsx)(`div`,{className:`flex gap-1`,children:[...[,,,]].map((e,t)=>(0,Z.jsx)(D_,{size:24,className:t<re?`text-red-500 fill-red-500`:`text-slate-200`},t))}),(0,Z.jsx)(`div`,{className:`text-2xl font-black text-slate-900`,children:te})]}),(0,Z.jsxs)(`div`,{className:`py-8 relative`,children:[(0,Z.jsx)(`div`,{className:`absolute top-0 left-0 right-0 h-2 bg-slate-100 rounded-full overflow-hidden`,children:(0,Z.jsx)(`div`,{className:`h-full bg-slate-800 transition-all duration-100 ease-linear`,style:{width:`${E/3e3*100}%`}})}),(0,Z.jsx)(`div`,{className:`mt-8 text-5xl font-black text-slate-800 mb-4`,children:C?.label}),(0,Z.jsxs)(`div`,{className:`text-2xl font-bold text-slate-400 transition-opacity duration-500`,style:{opacity:Math.max(0,1-ae/20)},children:[`PRESS [ `,(0,Z.jsx)(`span`,{className:`text-slate-800`,children:C?.keys[0]}),` ]`]}),ae>=5&&(0,Z.jsxs)(`div`,{className:`mt-8 animate-bounce text-orange-500 font-black text-xl`,children:[ae,`x COMBO! `]})]})]})}),i===`playing`&&o!==`shortcut_ninja`&&(0,Z.jsxs)(`div`,{className:`space-y-6`,children:[(0,Z.jsxs)(`div`,{className:`flex justify-between items-center px-2`,children:[(0,Z.jsx)(`span`,{className:`text-sm font-bold text-slate-500 italic`,children:h?.source}),Te&&(0,Z.jsxs)(`span`,{className:`text-xs font-bold px-2 py-1 rounded-full ${h?.reward>1?`bg-yellow-100 text-yellow-700`:`bg-pink-100 text-pink-600`}`,children:[`Reward: `,h?.reward,` `,ev]})]}),(0,Z.jsx)(`div`,{className:`bg-slate-100 p-6 rounded-xl text-xl font-serif text-slate-700 leading-relaxed select-none`,children:p.split(``).map((e,t)=>{let n=`text-slate-700`;return t<_.length&&(n=_[t]===e?`text-green-600`:`text-red-500 bg-red-100`),(0,Z.jsx)(`span`,{className:n,children:e},t)})}),(0,Z.jsx)(`input`,{ref:S,type:`text`,className:`w-full p-4 text-lg border-2 border-blue-200 rounded-xl focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all`,placeholder:`Type here...`,value:_,onChange:xe,onPaste:e=>e.preventDefault()}),(0,Z.jsx)(`p`,{className:`text-xs text-slate-400 uppercase font-bold tracking-wider`,children:`Timer Running...`})]}),i===`finished`&&o===`shortcut_ninja`&&(0,Z.jsxs)(`div`,{className:`space-y-6`,children:[(0,Z.jsxs)(`div`,{className:`grid grid-cols-2 gap-4`,children:[(0,Z.jsxs)(`div`,{className:`bg-slate-50 p-4 rounded-xl`,children:[(0,Z.jsx)(`p`,{className:`text-xs text-slate-400 font-bold uppercase`,children:`Avg Reaction`}),(0,Z.jsxs)(`p`,{className:`text-3xl font-black text-blue-500`,children:[T.length>0?(T.reduce((e,t)=>e+t,0)/T.length/1e3).toFixed(2):`0.00`,` `,(0,Z.jsx)(`span`,{className:`text-sm text-slate-400 font-normal`,children:`s`})]})]}),(0,Z.jsxs)(`div`,{className:`bg-slate-50 p-4 rounded-xl`,children:[(0,Z.jsx)(`p`,{className:`text-xs text-slate-400 font-bold uppercase`,children:`Max Streak`}),(0,Z.jsx)(`p`,{className:`text-3xl font-black text-yellow-500`,children:se})]})]}),(0,Z.jsxs)(`div`,{className:`flex flex-col items-center gap-3 mt-6`,children:[(0,Z.jsx)(fv,{onClick:be,variant:`outline`,className:`w-full max-w-xs`,children:`Train Again`}),(0,Z.jsx)(`button`,{onClick:()=>a(`idle`),className:`text-slate-400 hover:text-slate-600 text-sm`,children:`Back to Menu`})]})]}),i===`finished`&&o!==`shortcut_ninja`&&(0,Z.jsxs)(`div`,{className:`space-y-6`,children:[(0,Z.jsxs)(`div`,{className:`grid grid-cols-2 gap-4`,children:[(0,Z.jsxs)(`div`,{className:`bg-slate-50 p-4 rounded-xl`,children:[(0,Z.jsx)(`p`,{className:`text-xs text-slate-400 font-bold uppercase`,children:`Speed`}),(0,Z.jsxs)(`p`,{className:`text-3xl font-black ${y>30?`text-green-500`:`text-orange-500`}`,children:[y,` `,(0,Z.jsx)(`span`,{className:`text-sm text-slate-400 font-normal`,children:`WPM`})]})]}),(0,Z.jsxs)(`div`,{className:`bg-slate-50 p-4 rounded-xl`,children:[(0,Z.jsx)(`p`,{className:`text-xs text-slate-400 font-bold uppercase`,children:`Accuracy`}),(0,Z.jsxs)(`p`,{className:`text-3xl font-black ${x>=95?`text-green-500`:`text-orange-500`}`,children:[x,`%`]})]})]}),y>30&&x>=95?(0,Z.jsxs)(`div`,{className:`p-6 rounded-xl animate-bounce ${Te?`bg-green-100 text-green-700`:`bg-slate-100 text-slate-700`}`,children:[(0,Z.jsxs)(`h3`,{className:`text-xl font-bold mb-1`,children:[` `,Te?`Challenge Complete!`:`Practice Complete!`]}),(0,Z.jsx)(`p`,{children:o===`sudden_death`?`You earned 10 Donuts! `:Te?`You earned ${h?.reward||1} Donut${(h?.reward||1)>1?`s`:``}!`:`Great job! Get licensed to earn rewards.`})]}):(0,Z.jsxs)(`div`,{className:`bg-orange-50 text-orange-700 p-6 rounded-xl`,children:[(0,Z.jsx)(`h3`,{className:`text-xl font-bold mb-1`,children:`So Close!`}),(0,Z.jsx)(`p`,{children:`You need >30 WPM and 95% Accuracy. Try again!`})]}),(0,Z.jsxs)(`div`,{className:`flex flex-col items-center gap-3 mt-6`,children:[(0,Z.jsx)(fv,{onClick:be,variant:`outline`,className:`w-full max-w-xs`,children:`Try Again`}),(0,Z.jsx)(`button`,{onClick:()=>a(`idle`),className:`text-slate-400 hover:text-slate-600 text-sm`,children:`Back to Menu`})]})]})]}),Ee&&n&&(0,Z.jsxs)(dv,{className:`bg-white border-2 border-slate-200`,children:[(0,Z.jsxs)(`h3`,{className:`font-bold text-slate-800 mb-4 flex items-center gap-2`,children:[(0,Z.jsx)(w_,{size:16,className:`text-yellow-500`}),` Instructor Controls`]}),(0,Z.jsx)(`div`,{className:`space-y-2`,children:n.filter(e=>e.name!==`Mr Rayner`).map(e=>(0,Z.jsxs)(`div`,{className:`flex justify-between items-center bg-slate-50 p-3 rounded-lg border border-slate-100`,children:[(0,Z.jsx)(`span`,{className:`font-bold text-slate-700`,children:e.name}),e.typing_license?(0,Z.jsx)(`button`,{onClick:()=>r(e.uid,e.name,!1),className:`text-xs bg-red-100 text-red-600 px-3 py-1.5 rounded-lg font-bold hover:bg-red-200 transition-colors`,children:`Revoke License`}):(0,Z.jsx)(`button`,{onClick:()=>r(e.uid,e.name,!0),className:`text-xs bg-green-100 text-green-600 px-3 py-1.5 rounded-lg font-bold hover:bg-green-200 transition-colors`,children:`Grant License`})]},e.id))})]})]})}function bv({onLogin:e,existingUsers:t,roster:n}){let[r,i]=(0,l.useState)(``),[a,o]=(0,l.useState)(null),[s,c]=(0,l.useState)(``),[u,d]=(0,l.useState)(!1),f=(n||[]).filter(e=>e.toLowerCase().includes(r.toLowerCase())),p=()=>{a&&s&&e(a,s)};return(0,Z.jsxs)(`div`,{className:`min-h-screen flex flex-col items-center justify-center bg-slate-50 p-4`,children:[u&&(0,Z.jsx)(xv,{onClose:()=>d(!1)}),(0,Z.jsxs)(`div`,{className:`bg-white p-8 rounded-2xl shadow-xl w-full max-w-md text-center border-t-8 border-pink-500 relative`,children:[(0,Z.jsxs)(`button`,{onClick:()=>d(!0),className:`absolute top-4 right-4 text-[10px] font-bold bg-gradient-to-r from-pink-500 to-purple-600 text-white px-2 py-0.5 rounded-full hover:scale-105 transition-transform shadow-sm flex items-center gap-1`,children:[(0,Z.jsx)(z_,{size:10}),` What's New`]}),(0,Z.jsx)(`div`,{className:`text-6xl mb-4`,children:ev}),(0,Z.jsx)(`h1`,{className:`text-2xl font-bold mb-2 text-slate-800`,children:`Welcome to YumDonut`}),(0,Z.jsx)(`p`,{className:`text-slate-500 mb-6`,children:`Select your name to get started.`}),a?(0,Z.jsxs)(`div`,{className:`space-y-4 text-left animate-in fade-in slide-in-from-right-4`,children:[(0,Z.jsxs)(`div`,{className:`flex items-center justify-between bg-pink-50 p-3 rounded-lg`,children:[(0,Z.jsx)(`div`,{className:`flex items-center gap-2`,children:(0,Z.jsx)(`span`,{className:`font-bold text-pink-700`,children:a})}),(0,Z.jsx)(`button`,{onClick:()=>{o(null),c(``)},className:`text-xs text-pink-400 hover:text-pink-600`,children:`Change`})]}),(0,Z.jsxs)(`div`,{children:[(0,Z.jsx)(`label`,{className:`block text-xs font-bold text-slate-500 mb-1 uppercase`,children:`Password`}),(0,Z.jsxs)(`div`,{className:`relative`,children:[(0,Z.jsx)(A_,{className:`absolute left-3 top-3 text-slate-400`,size:18}),(0,Z.jsx)(`input`,{type:`password`,className:`w-full pl-10 p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-pink-500 outline-none`,placeholder:`Enter password`,value:s,onChange:e=>c(e.target.value),onKeyDown:e=>e.key===`Enter`&&p()})]}),(0,Z.jsx)(`p`,{className:`text-xs text-slate-400 mt-1`,children:`First time? Create a password. Returning? Login.`})]}),(0,Z.jsx)(fv,{variant:`primary`,className:`w-full py-3 text-lg`,onClick:p,disabled:!s,children:`Continue`})]}):(0,Z.jsxs)(`div`,{className:`space-y-4 text-left`,children:[(0,Z.jsxs)(`div`,{className:`relative`,children:[(0,Z.jsx)(F_,{className:`absolute left-3 top-3 text-slate-400`,size:20}),(0,Z.jsx)(`input`,{type:`text`,className:`w-full pl-10 p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-pink-500 outline-none transition`,placeholder:`Search your name...`,value:r,onChange:e=>i(e.target.value)})]}),(0,Z.jsx)(`div`,{className:`h-48 overflow-y-auto border border-slate-100 rounded-lg bg-slate-50 p-2 space-y-1`,children:f.length===0?(0,Z.jsx)(`div`,{className:`text-center text-slate-400 py-4 text-sm`,children:`No names found.`}):f.map(e=>(0,Z.jsx)(`button`,{onClick:()=>o(e),className:`w-full text-left px-4 py-2 rounded-md text-sm font-medium hover:bg-white hover:shadow-sm text-slate-600 transition-all flex justify-between items-center`,children:(0,Z.jsx)(`span`,{children:e})},e))})]}),!1]})]})}function xv({onClose:e}){return(0,Z.jsx)(`div`,{className:`fixed inset-0 bg-black/50 flex items-center justify-center z-50 animate-in fade-in duration-200`,children:(0,Z.jsxs)(`div`,{className:`bg-white rounded-2xl shadow-2xl max-w-lg w-full m-4 overflow-hidden animate-in zoom-in-95 duration-200`,children:[(0,Z.jsxs)(`div`,{className:`bg-gradient-to-r from-pink-500 to-purple-600 p-6 text-white flex justify-between items-start`,children:[(0,Z.jsxs)(`div`,{children:[(0,Z.jsxs)(`h2`,{className:`text-2xl font-bold flex items-center gap-2`,children:[(0,Z.jsx)(z_,{className:`text-yellow-300`}),` What's New`]}),(0,Z.jsx)(`p`,{className:`opacity-90 text-sm mt-1`,children:`Live Studio & Visual Upgrades!`})]}),(0,Z.jsx)(`button`,{onClick:e,className:`text-white/70 hover:text-white transition-colors`,children:(0,Z.jsx)(S_,{size:24})})]}),(0,Z.jsxs)(`div`,{className:`p-6 space-y-6 max-h-[70vh] overflow-y-auto`,children:[(0,Z.jsxs)(`div`,{className:`space-y-2`,children:[(0,Z.jsxs)(`h3`,{className:`font-bold text-slate-800 flex items-center gap-2`,children:[(0,Z.jsx)(D_,{className:`text-teal-500`,size:20}),` Values & Virtues`]}),(0,Z.jsxs)(`p`,{className:`text-slate-600 text-sm`,children:[`Giving donuts just got deeper! You can now tag your gift with one of our 4 Core Values: `,(0,Z.jsx)(`strong`,{children:`Whanaungatanga`}),`, `,(0,Z.jsx)(`strong`,{children:`Ekea`}),`, `,(0,Z.jsx)(`strong`,{children:`Raakau`}),`, or `,(0,Z.jsx)(`strong`,{children:`Ora`}),`. `]})]}),(0,Z.jsxs)(`div`,{className:`space-y-2`,children:[(0,Z.jsxs)(`h3`,{className:`font-bold text-slate-800 flex items-center gap-2`,children:[(0,Z.jsx)(K_,{className:`text-pink-500`,size:20}),` Live Studio`]}),(0,Z.jsxs)(`p`,{className:`text-slate-600 text-sm`,children:[`The new `,(0,Z.jsx)(`strong`,{children:`Live Dock`}),` at the top shows you who is online right now!`,(0,Z.jsx)(`br`,{}),(0,Z.jsx)(`span`,{className:`text-xs italic text-slate-500`,children:`* Only active users appear in the VIP Lounge.`})]})]}),(0,Z.jsxs)(`div`,{className:`space-y-2`,children:[(0,Z.jsxs)(`h3`,{className:`font-bold text-slate-800 flex items-center gap-2`,children:[(0,Z.jsx)(M_,{className:`text-purple-500`,size:20}),` Pixel Avatars`]}),(0,Z.jsxs)(`p`,{className:`text-slate-600 text-sm`,children:[`Visit the `,(0,Z.jsx)(`strong`,{children:`Dressing Room`}),` (click the pencil or your avatar) to customize your retro look with new colors and icons! `]})]}),(0,Z.jsxs)(`div`,{className:`space-y-2`,children:[(0,Z.jsxs)(`h3`,{className:`font-bold text-slate-800 flex items-center gap-2`,children:[(0,Z.jsx)(U_,{className:`text-yellow-500`,size:20}),` Shiny Goals`]}),(0,Z.jsxs)(`p`,{className:`text-slate-600 text-sm`,children:[`When we hit the target, the goal card now turns `,(0,Z.jsx)(`strong`,{children:`GOLD`}),` to celebrate! `]})]}),(0,Z.jsxs)(`div`,{className:`space-y-2`,children:[(0,Z.jsxs)(`h3`,{className:`font-bold text-slate-800 flex items-center gap-2`,children:[(0,Z.jsx)(V_,{className:`text-red-500`,size:20}),` Sudden Death Fixed`]}),(0,Z.jsx)(`p`,{className:`text-slate-600 text-sm`,children:`Fixed the blank screen issue in Sudden Death mode. Get back in there and earn those 10 donuts!`})]})]}),(0,Z.jsx)(`div`,{className:`p-4 bg-slate-50 border-t border-slate-100 text-center`,children:(0,Z.jsx)(fv,{onClick:e,className:`w-full`,children:`Got it!`})})]})})}function Sv({onClose:e,roster:t}){let[n,r]=(0,l.useState)(``),[i,a]=(0,l.useState)(``),o=async()=>{if(n.trim()){if(t.includes(n.trim())){a(`User already exists!`);return}try{await $d(J(Q,`artifacts`,$,`public`,`data`,`config`,`roster`),{names:pf(n.trim())},{merge:!0}),r(``),a(``)}catch(e){console.error(e),a(`Failed to add user.`)}}},s=async e=>{if(confirm(`Are you sure you want to remove ${e}?`))try{await $d(J(Q,`artifacts`,$,`public`,`data`,`config`,`roster`),{names:mf(e)},{merge:!0})}catch(e){console.error(e),a(`Failed to remove user.`)}};return(0,Z.jsx)(`div`,{className:`fixed inset-0 bg-black/50 flex items-center justify-center z-50 animate-in fade-in duration-200`,children:(0,Z.jsxs)(`div`,{className:`bg-white rounded-2xl shadow-2xl max-w-md w-full m-4 overflow-hidden animate-in zoom-in-95 duration-200 flex flex-col max-h-[80vh]`,children:[(0,Z.jsxs)(`div`,{className:`bg-slate-800 p-4 text-white flex justify-between items-center`,children:[(0,Z.jsxs)(`h2`,{className:`text-lg font-bold flex items-center gap-2`,children:[(0,Z.jsx)(K_,{size:20}),` Manage Roster`]}),(0,Z.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,Z.jsx)(`button`,{onClick:async()=>{if(confirm(`Reset roster to default list? This will remove custom additions.`))try{await $d(J(Q,`artifacts`,$,`public`,`data`,`config`,`roster`),{names:Z_},{merge:!0})}catch(e){console.error(e)}},className:`text-xs bg-slate-700 hover:bg-slate-600 px-2 py-1 rounded text-slate-300 transition-colors`,children:`Reset`}),(0,Z.jsx)(`button`,{onClick:e,className:`text-white/70 hover:text-white transition-colors`,children:(0,Z.jsx)(S_,{size:24})})]})]}),(0,Z.jsxs)(`div`,{className:`p-4 border-b border-slate-100 bg-slate-50`,children:[(0,Z.jsxs)(`div`,{className:`flex gap-2`,children:[(0,Z.jsx)(`input`,{className:`flex-1 p-2 border border-slate-300 rounded-lg text-sm`,placeholder:`Enter new student name...`,value:n,onChange:e=>r(e.target.value),onKeyDown:e=>e.key===`Enter`&&o()}),(0,Z.jsx)(`button`,{onClick:o,disabled:!n.trim(),className:`bg-green-500 text-white px-4 py-2 rounded-lg font-bold text-sm hover:bg-green-600 disabled:opacity-50`,children:`Add`})]}),i&&(0,Z.jsx)(`p`,{className:`text-red-500 text-xs mt-2`,children:i})]}),(0,Z.jsx)(`div`,{className:`flex-1 overflow-y-auto p-2`,children:[...t].sort().map(e=>(0,Z.jsxs)(`div`,{className:`flex justify-between items-center p-3 hover:bg-slate-50 rounded-lg group`,children:[(0,Z.jsx)(`span`,{className:`font-medium text-slate-700`,children:e}),(0,Z.jsx)(`button`,{onClick:()=>s(e),className:`text-slate-300 hover:text-red-500 transition-colors`,children:(0,Z.jsx)(H_,{size:18})})]},e))}),(0,Z.jsxs)(`div`,{className:`p-3 bg-slate-50 text-center text-xs text-slate-400 border-t border-slate-100`,children:[t.length,` students in roster`]})]})})}function Cv({items:e,userBalance:t,onPurchase:n,currentUserPublic:r,raffleState:i,onDrawRaffle:a,onRestoreRaffle:o,featuredItemIds:s,onToggleFeatured:c}){let l=r?.name===`Mr Rayner`;return(0,Z.jsxs)(`div`,{className:`space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500`,children:[(0,Z.jsxs)(`div`,{className:`bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl shadow-sm border border-slate-100 p-6`,children:[(0,Z.jsxs)(`h2`,{className:`text-2xl font-bold flex items-center gap-2`,children:[(0,Z.jsx)(L_,{}),` The Donut Shop`]}),(0,Z.jsx)(`p`,{className:`opacity-90`,children:`Spend your hard-earned donuts on rewards!`}),(0,Z.jsxs)(`div`,{className:`mt-4 text-sm font-bold bg-white/20 inline-block px-3 py-1 rounded-full`,children:[`Your Balance: `,t,` `,ev]})]}),i&&(0,Z.jsxs)(`div`,{className:`bg-yellow-50 border-2 border-yellow-200 rounded-xl p-4 text-center relative overflow-hidden`,children:[(0,Z.jsx)(`div`,{className:`absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-yellow-300 via-orange-400 to-yellow-300`}),(0,Z.jsx)(`h3`,{className:`font-bold text-yellow-800 text-lg flex items-center justify-center gap-2`,children:` WEEKLY RAFFLE `}),i.lastWinner?(0,Z.jsxs)(`div`,{className:`mt-2 animate-bounce`,children:[(0,Z.jsx)(`p`,{className:`text-xs text-yellow-600 uppercase font-bold`,children:`Last Winner`}),(0,Z.jsx)(`p`,{className:`text-xl font-black text-purple-600`,children:i.lastWinner}),(0,Z.jsx)(`p`,{className:`text-[10px] text-slate-400`,children:new Date(i.lastWinDate).toLocaleDateString()})]}):(0,Z.jsx)(`p`,{className:`text-sm text-yellow-700 mt-1`,children:`Buy a ticket to win the jackpot!`}),(0,Z.jsxs)(`div`,{className:`mt-3 text-xs font-bold text-slate-500 bg-white/50 inline-block px-3 py-1 rounded-full`,children:[i.tickets?.length||0,` Tickets in the Hat`]}),l&&(0,Z.jsx)(`div`,{className:`mt-4 border-t border-yellow-200 pt-3`,children:(0,Z.jsx)(`button`,{onClick:a,className:`w-full bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 rounded transition-colors`,children:` Draw Winner`})})]}),(0,Z.jsx)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 gap-4`,children:e.map(e=>{let i=t>=(e.cost||0),a=!1;try{a=!!(e.type===`digital`&&r&&(e.id===`rainbow_name`&&r.rainbow_name||e.id===`gold_border`&&r.gold_border||e.id===`neon_name`&&r.neon_name||e.id===`verified_badge`&&r.verified_badge))}catch(e){console.error(`Error checking ownership:`,e)}let o=(Array.isArray(s)?s:[]).includes(e.id);return(0,Z.jsxs)(`div`,{className:`flex flex-col justify-between relative overflow-hidden border-2 transition-all duration-300 rounded-xl p-6 ${o?`bg-gradient-to-br from-yellow-50 to-amber-100 border-yellow-400 shadow-lg scale-[1.02]`:`bg-white border-slate-100 hover:border-pink-200`}`,children:[a&&(0,Z.jsx)(`div`,{className:`absolute top-2 right-2 text-green-500`,children:(0,Z.jsx)(x_,{})}),o&&(0,Z.jsx)(`div`,{className:`absolute top-0 right-0 bg-yellow-400 text-yellow-900 text-[10px] font-bold px-2 py-1 rounded-bl-lg shadow-sm z-10`,children:`FEATURED`}),l&&(0,Z.jsx)(`button`,{onClick:t=>{t.stopPropagation(),c&&c(e.id)},className:`absolute top-2 left-2 z-20 hover:scale-110 transition-transform`,children:o?(0,Z.jsx)(`div`,{className:`text-yellow-500 drop-shadow-sm`,children:``}):(0,Z.jsx)(`div`,{className:`text-slate-300 hover:text-yellow-400`,children:``})}),(0,Z.jsxs)(`div`,{children:[(0,Z.jsxs)(`div`,{className:`text-4xl mb-2 flex items-center gap-2`,children:[e.icon,o&&(0,Z.jsx)(`span`,{className:`text-lg animate-pulse`,children:``})]}),(0,Z.jsx)(`h3`,{className:`font-bold text-lg ${o?`text-yellow-900`:`text-slate-800`}`,children:e.name}),(0,Z.jsx)(`p`,{className:`text-sm mb-4 ${o?`text-yellow-800/80`:`text-slate-500`}`,children:e.desc})]}),(0,Z.jsxs)(`div`,{className:`flex justify-between items-center mt-2`,children:[(0,Z.jsxs)(`span`,{className:`font-bold ${o?`text-yellow-700`:`text-pink-600`}`,children:[e.cost,` `,ev]}),(0,Z.jsx)(`button`,{onClick:()=>n(e),disabled:!i||a,className:`px-4 py-2 rounded transition-colors text-white ${i?`hover:bg-opacity-90`:`opacity-50 cursor-not-allowed`} ${o?`bg-yellow-600`:`bg-pink-600`}`,children:a?`Owned`:`Buy`})]})]},e.id)})})]})}function wv({bounties:e,currentUser:t,userId:n,onCreate:r,onDelete:i,onClaim:a,onUnclaim:o,onPay:s,onMarkDone:c,onReject:u}){let[d,f]=(0,l.useState)(``),[p,m]=(0,l.useState)(5),[h,g]=(0,l.useState)(1),[_,v]=(0,l.useState)(``),[y,b]=(0,l.useState)(!1),[x,ee]=(0,l.useState)(``),S=t.name===`Mr Rayner`,C=e.filter(e=>{if(e.status===`paid`)return!1;let t=Date.now(),n=e.expiresAt&&e.expiresAt<t;return e.scheduledFor&&e.scheduledFor>t&&!S?!1:S?!0:!(e.status===`open`&&n)}),w=e=>{if(!e)return null;let t=e-Date.now();return t<=0?0:Math.ceil(t/6e4)},te=e=>e?new Date(e).toLocaleTimeString([],{hour:`numeric`,minute:`2-digit`}):``,[,ne]=(0,l.useState)(0);return(0,l.useEffect)(()=>{let e=setInterval(()=>ne(e=>e+1),6e4);return()=>clearInterval(e)},[]),_&&te(new Date(_).getTime()),(0,Z.jsxs)(`div`,{className:`space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500`,children:[S&&(0,Z.jsxs)(dv,{className:`bg-pink-50 border-pink-100`,children:[(0,Z.jsxs)(`h3`,{className:`font-bold text-pink-700 mb-3 flex items-center gap-2`,children:[(0,Z.jsx)(y_,{size:20}),` Post New Job`]}),(0,Z.jsxs)(`div`,{className:`grid grid-cols-2 md:grid-cols-5 gap-3`,children:[(0,Z.jsxs)(`div`,{className:`col-span-2 md:col-span-5`,children:[(0,Z.jsx)(`label`,{className:`text-[10px] text-pink-400 font-bold uppercase`,children:`Job Description`}),(0,Z.jsx)(`input`,{className:`w-full p-2 rounded-lg border border-pink-200`,placeholder:`e.g. Film Assembly`,value:d,onChange:e=>f(e.target.value)})]}),(0,Z.jsxs)(`div`,{children:[(0,Z.jsx)(`label`,{className:`text-[10px] text-pink-400 font-bold uppercase`,children:`Reward`}),(0,Z.jsx)(`input`,{type:`number`,className:`w-full p-2 rounded-lg border border-pink-200`,value:p,onChange:e=>m(e.target.value)})]}),(0,Z.jsxs)(`div`,{children:[(0,Z.jsx)(`label`,{className:`text-[10px] text-pink-400 font-bold uppercase`,children:`Spots`}),(0,Z.jsx)(`input`,{type:`number`,min:`1`,className:`w-full p-2 rounded-lg border border-pink-200`,value:h,onChange:e=>g(e.target.value)})]}),(0,Z.jsxs)(`div`,{children:[(0,Z.jsx)(`label`,{className:`text-[10px] text-pink-400 font-bold uppercase`,children:`Due Date`}),(0,Z.jsx)(`div`,{className:`relative`,children:(0,Z.jsx)(`input`,{type:`datetime-local`,className:`w-full p-2 rounded-lg border border-pink-200`,value:_,onChange:e=>v(e.target.value)})})]}),(0,Z.jsxs)(`div`,{className:`col-span-2 md:col-span-5 flex flex-wrap items-center gap-3 mt-2 mb-2`,children:[(0,Z.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,Z.jsx)(`input`,{type:`checkbox`,id:`schedule`,checked:y,onChange:e=>b(e.target.checked),className:`rounded text-pink-500 focus:ring-pink-500`}),(0,Z.jsx)(`label`,{htmlFor:`schedule`,className:`text-xs font-bold text-slate-500 cursor-pointer select-none uppercase`,children:`Schedule for later?`})]}),y&&(0,Z.jsx)(`input`,{type:`datetime-local`,className:`p-2 rounded-lg border border-pink-200 text-xs`,value:x,onChange:e=>ee(e.target.value)})]}),(0,Z.jsx)(`div`,{className:`col-span-2 md:col-span-5`,children:(0,Z.jsx)(fv,{className:`w-full h-[42px]`,onClick:()=>{r(d,p,h,_,y?x:null),f(``),g(1),v(``),b(!1),ee(``)},children:y?`Schedule Job`:`Post Job`})})]})]}),(0,Z.jsxs)(`div`,{className:`space-y-3`,children:[(0,Z.jsx)(`h3`,{className:`font-bold text-slate-700 ml-1 flex justify-between items-center`,children:(0,Z.jsx)(`span`,{children:`Active Jobs`})}),C.length===0&&(0,Z.jsx)(`div`,{className:`text-center text-slate-400 py-8`,children:`No active jobs right now.`}),C.map(t=>{let r=t.claimantId===n,l=e.some(e=>e.status===`claimed`&&e.claimantId===n),d=t.remaining||(t.status===`open`?1:0),f=w(t.expiresAt),p=t.expiresAt>0,m=p&&f<=0,h=p?te(t.expiresAt):``,g=100,_=`bg-green-500`;if(p&&!m&&t.createdAt){let e=t.createdAt,n=e.toMillis?e.toMillis():Date.now(),r=t.expiresAt-n,i=t.expiresAt-Date.now();r>0&&(g=Math.max(0,Math.min(100,i/r*100))),g<50&&(_=`bg-yellow-500`),g<20&&(_=`bg-orange-500`),g<10&&(_=`bg-red-500 animate-pulse`)}return(0,Z.jsxs)(dv,{className:`flex flex-col border-l-4 ${m?`border-l-slate-300 bg-slate-50`:t.status===`pending_review`?`border-l-green-500 bg-green-50`:`border-l-pink-500`}`,children:[(0,Z.jsxs)(`div`,{className:`flex justify-between items-center`,children:[(0,Z.jsxs)(`div`,{className:`flex-grow min-w-0 mr-2`,children:[(0,Z.jsxs)(`h4`,{className:`font-bold text-slate-800 break-words flex items-center gap-2 flex-wrap`,children:[t.title,t.status===`pending_review`&&(0,Z.jsxs)(`span`,{className:`bg-green-100 text-green-700 px-2 py-0.5 rounded-full text-xs font-bold whitespace-nowrap flex items-center gap-1 animate-pulse`,children:[(0,Z.jsx)(x_,{size:12}),` Ready for Inspection`]})]}),(0,Z.jsxs)(`div`,{className:`flex items-center gap-2 mt-1 flex-wrap`,children:[(0,Z.jsxs)(`span`,{className:`bg-pink-100 text-pink-700 px-2 py-0.5 rounded-full text-xs font-bold whitespace-nowrap`,children:[t.reward,` `,ev,` Reward`]}),t.status===`open`&&d>1&&(0,Z.jsxs)(`span`,{className:`bg-blue-100 text-blue-700 px-2 py-0.5 rounded-full text-xs font-bold whitespace-nowrap flex items-center gap-1`,children:[(0,Z.jsx)(K_,{size:12}),` `,d,` spots left`]}),t.scheduledFor&&t.scheduledFor>Date.now()&&(0,Z.jsxs)(`span`,{className:`bg-purple-100 text-purple-700 px-2 py-0.5 rounded-full text-xs font-bold whitespace-nowrap flex items-center gap-1`,children:[(0,Z.jsx)(b_,{size:12}),` Scheduled `,te(t.scheduledFor)]}),t.status===`open`&&p&&(0,Z.jsxs)(`span`,{className:`px-2 py-0.5 rounded-full text-xs font-bold whitespace-nowrap flex items-center gap-1 ${m?`bg-red-100 text-red-600`:`bg-orange-100 text-orange-700`}`,children:[(0,Z.jsx)(C_,{size:12}),` `,m?`Expired`:`Due ${h}`]}),t.status===`claimed`&&(0,Z.jsxs)(`span`,{className:`text-xs text-slate-500 flex items-center gap-1 whitespace-nowrap`,children:[(0,Z.jsx)(B_,{size:12}),` Claimed by `,t.claimantName]}),t.status===`pending_review`&&(0,Z.jsxs)(`span`,{className:`text-xs text-green-600 flex items-center gap-1 whitespace-nowrap font-bold`,children:[(0,Z.jsx)(W_,{size:12}),` Done by `,t.claimantName]})]})]}),(0,Z.jsxs)(`div`,{className:`flex gap-2 flex-shrink-0`,children:[t.status===`open`&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(fv,{variant:`outline`,onClick:()=>a(t.id,d),disabled:l||m,className:l||m?`opacity-50 cursor-not-allowed`:``,title:m?`Job Expired`:l?`Finish your current job first!`:`Claim this job`,children:m?`Expired`:`Claim`}),S&&(0,Z.jsx)(`button`,{onClick:()=>i(t.id),className:`p-2 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors`,children:(0,Z.jsx)(H_,{size:20})})]}),t.status===`claimed`&&S&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(`button`,{onClick:()=>o(t.id),className:`p-2 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors`,title:`Revoke Claim`,children:(0,Z.jsx)(S_,{size:20})}),(0,Z.jsx)(fv,{variant:`outline`,onClick:()=>s(t.id,t.claimantName,t.reward),className:`whitespace-nowrap opacity-50 hover:opacity-100`,children:`Pay Now`})]}),t.status===`pending_review`&&S&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(`button`,{onClick:()=>u(t.id),className:`p-2 text-orange-400 hover:text-orange-600 hover:bg-orange-50 rounded-lg transition-colors`,title:`Reject Work (Redo)`,children:(0,Z.jsx)(P_,{size:20})}),(0,Z.jsx)(fv,{variant:`success`,onClick:()=>s(t.id,t.claimantName,t.reward),className:`whitespace-nowrap animate-bounce`,children:`Pay & Close`})]}),t.status===`claimed`&&r&&!S&&(0,Z.jsxs)(`div`,{className:`flex gap-2`,children:[(0,Z.jsx)(fv,{variant:`danger`,onClick:()=>o(t.id),className:`text-xs px-2 whitespace-nowrap`,children:`Cancel`}),(0,Z.jsx)(fv,{variant:`success`,onClick:()=>c(t.id),className:`text-xs px-2 whitespace-nowrap`,children:`Mark Done`})]}),t.status===`pending_review`&&r&&!S&&(0,Z.jsx)(`span`,{className:`text-xs bg-green-100 text-green-700 px-2 py-1 rounded font-bold whitespace-nowrap`,children:`Waiting for Review...`}),(t.status===`claimed`||t.status===`pending_review`)&&!r&&!S&&(0,Z.jsx)(`span`,{className:`text-xs bg-slate-100 px-2 py-1 rounded text-slate-500 self-center whitespace-nowrap`,children:`Busy`})]})]}),(t.status===`open`||t.status===`claimed`||t.status===`pending_review`)&&p&&!m&&(0,Z.jsx)(`div`,{className:`w-full h-2 bg-slate-100 rounded-full mt-3 relative`,children:(0,Z.jsx)(`div`,{className:`h-full rounded-full transition-all duration-1000 ease-linear ${_} relative`,style:{width:`${g}%`},children:(0,Z.jsx)(`span`,{className:`absolute right-0 top-1/2 -translate-y-1/2 translate-x-1/2 text-sm leading-none filter drop-shadow-sm transform hover:scale-125 transition-transform cursor-default`,title:`Time is ticking!`,children:``})})})]},t.id)})]})]})}function Tv({goalData:e,userBalance:t,onContribute:n,currentUserName:r,onActivate:i,onUpdateGoal:a,onResetGoal:o,onToggleActive:s}){let c=e.target===void 0?$_:e.target,u=e.isActive!==!1,d=r===`Mr Rayner`,f=(e.current||0)>=c||!u,p=u?c===0?100:Math.min(100,(e.current||0)/c*100):100,[m,h]=(0,l.useState)(!1),[g,_]=(0,l.useState)(e.title||`Team Goal`),[v,y]=(0,l.useState)(c),b=e.contributors||{},x=Object.entries(b).sort(([,e],[,t])=>t-e);return!u&&!d?(0,Z.jsx)(`div`,{className:`space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500`,children:(0,Z.jsxs)(dv,{className:`text-center py-12 bg-slate-50 border-2 border-dashed border-slate-200`,children:[(0,Z.jsx)(`div`,{className:`inline-flex items-center justify-center p-4 bg-slate-100 rounded-full text-slate-400 mb-4`,children:(0,Z.jsx)(A_,{size:32})}),(0,Z.jsx)(`h2`,{className:`text-2xl font-bold text-slate-400 mb-2`,children:`Coming Soon`}),(0,Z.jsx)(`p`,{className:`text-slate-400`,children:`The next goal hasn't started yet. Stay tuned!`})]})}):(0,Z.jsxs)(`div`,{className:`space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500`,children:[(0,Z.jsxs)(dv,{className:`text-center py-8 relative overflow-hidden ${!u&&!f?`opacity-75 grayscale`:``} ${f?`bg-gradient-to-br from-yellow-50 to-amber-100 border-2 border-yellow-400 shadow-xl shadow-yellow-200`:``}`,children:[f&&(0,Z.jsx)(`div`,{className:`absolute inset-0 bg-yellow-400 opacity-10 animate-pulse`}),(0,Z.jsxs)(`div`,{className:`relative z-10`,children:[(0,Z.jsx)(`div`,{className:`inline-flex items-center justify-center p-3 rounded-full mb-4 ${f?`bg-yellow-400 text-white shadow-lg scale-110`:`bg-pink-100 text-pink-500`}`,children:f?(0,Z.jsx)(U_,{size:32}):(0,Z.jsx)(z_,{size:32})}),d&&(0,Z.jsx)(`div`,{className:`mb-4 flex justify-end`,children:(0,Z.jsx)(`button`,{onClick:()=>s(!u),className:`text-xs font-bold px-3 py-1 rounded-full border ${u?`bg-green-100 text-green-600 border-green-200`:`bg-red-100 text-red-600 border-red-200`}`,children:u?` Goal Active`:` Goal Inactive`})}),d&&m?(0,Z.jsxs)(`div`,{className:`mb-6 bg-slate-50 p-4 rounded-xl border border-slate-200`,children:[(0,Z.jsx)(`h3`,{className:`text-xs font-bold text-slate-400 uppercase mb-2`,children:`Edit Goal`}),(0,Z.jsxs)(`div`,{className:`flex flex-col gap-2`,children:[(0,Z.jsx)(`input`,{className:`p-2 border rounded`,value:g,onChange:e=>_(e.target.value),placeholder:`Goal Title`}),(0,Z.jsx)(`input`,{className:`p-2 border rounded`,type:`number`,value:v,onChange:e=>y(parseInt(e.target.value)||0),placeholder:`Target Amount`}),(0,Z.jsxs)(`div`,{className:`flex gap-2 mt-2`,children:[(0,Z.jsx)(fv,{onClick:()=>{a(g,v),h(!1)},className:`flex-1`,children:`Save`}),(0,Z.jsx)(`button`,{onClick:()=>h(!1),className:`text-slate-500 text-sm px-3`,children:`Cancel`})]})]})]}):(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)(`div`,{className:`flex justify-center items-center gap-2 mb-2`,children:[(0,Z.jsx)(`h2`,{className:`text-2xl font-bold ${f?`text-yellow-700`:`text-slate-800`}`,children:f?`GOAL ACHIEVED: ${e.title||`Team Goal`}`:e.title||`Team Goal`}),d&&(0,Z.jsx)(`button`,{onClick:()=>h(!0),className:`text-slate-400 hover:text-pink-500`,children:(0,Z.jsx)(M_,{size:16})})]}),(0,Z.jsx)(`p`,{className:`${f?`text-yellow-800 font-medium`:`text-slate-500`} mb-6 max-w-md mx-auto`,children:f?`We did it! Enjoy the victory!`:`If we reach ${c} donuts together, we unlock a reward for everyone!`})]}),(0,Z.jsx)(`div`,{className:`max-w-lg mx-auto bg-slate-100 rounded-full h-8 mb-2 relative overflow-hidden border border-slate-200`,children:(0,Z.jsx)(`div`,{className:`h-full rounded-full transition-all duration-1000 ease-out flex items-center justify-end pr-2 ${f?`bg-gradient-to-r from-yellow-300 via-yellow-500 to-yellow-300 animate-shimmer bg-[length:200%_100%]`:`bg-gradient-to-r from-pink-500 to-purple-500`}`,style:{width:`${p}%`},children:(0,Z.jsxs)(`span`,{className:`text-white text-xs font-bold drop-shadow-md`,children:[Math.floor(p),`%`]})})}),(0,Z.jsxs)(`p`,{className:`text-sm font-bold ${f?`text-yellow-700`:`text-slate-700`} mb-8`,children:[e.current,` / `,c,` `,ev,` raised`]}),f?(0,Z.jsxs)(`div`,{className:`space-y-4`,children:[(0,Z.jsx)(`div`,{className:`bg-yellow-400 text-white p-4 rounded-xl font-black text-xl animate-bounce shadow-lg border-b-4 border-yellow-600 transform hover:scale-105 transition-transform cursor-default`,children:` GOAL ACHIEVED!`}),d?(0,Z.jsxs)(`div`,{className:`flex flex-col gap-2`,children:[(0,Z.jsx)(fv,{onClick:i,variant:`success`,className:`w-full py-3 text-lg shadow-lg shadow-green-200`,children:` Activate Reward! `}),(0,Z.jsxs)(`button`,{onClick:o,className:`text-xs text-slate-400 hover:text-red-500 flex items-center justify-center gap-1`,children:[(0,Z.jsx)(P_,{size:12}),` Reset Goal Manually`]})]}):(0,Z.jsx)(`div`,{className:`text-sm text-slate-500 italic`,children:`Wait for Mr Rayner to activate the reward!`})]}):(0,Z.jsxs)(`div`,{className:`flex gap-2 justify-center max-w-sm mx-auto`,children:[(0,Z.jsxs)(fv,{onClick:()=>n(1),disabled:t<1,className:`flex-1`,children:[`Give 1 `,ev]}),(0,Z.jsxs)(fv,{onClick:()=>n(5),disabled:t<5,className:`flex-1`,children:[`Give 5 `,ev]})]})]})]}),(0,Z.jsxs)(`div`,{className:`space-y-2`,children:[(0,Z.jsxs)(`h3`,{className:`font-bold text-slate-700 flex items-center gap-2`,children:[(0,Z.jsx)(K_,{size:16}),` Top Contributors`]}),x.length===0?(0,Z.jsx)(`div`,{className:`text-center py-8 text-slate-400 bg-slate-50 rounded-xl border border-dashed border-slate-200`,children:`No contributions yet. Be the hero!`}):x.map(([e,t],n)=>(0,Z.jsxs)(`div`,{className:`flex justify-between items-center p-3 rounded-lg border ${n<3&&f?`bg-yellow-50 border-yellow-200`:`bg-white border-slate-100`}`,children:[(0,Z.jsxs)(`div`,{className:`flex items-center gap-3`,children:[f&&n<3&&(0,Z.jsx)(`span`,{className:`text-xl`,children:n===0?``:n===1?``:``}),(0,Z.jsx)(`span`,{className:`font-bold ${n===0&&f?`text-yellow-700`:`text-slate-700`}`,children:e})]}),(0,Z.jsxs)(`span`,{className:`font-bold text-pink-500 bg-pink-50 px-2 py-1 rounded-md text-xs`,children:[`+`,t,` `,ev]})]},e))]})]})}function Ev({roster:e,existingUsers:t,currentUserName:n,onGive:r,onMunch:i,remaining:a,coreValues:o}){let[s,c]=(0,l.useState)(``),[u,d]=(0,l.useState)(``),[f,p]=(0,l.useState)(``),[m,h]=(0,l.useState)(1),[g,_]=(0,l.useState)(`give`),[v,y]=(0,l.useState)(1),[b,x]=(0,l.useState)(null),[ee,S]=(0,l.useState)(``),C=n===`Mr Rayner`,w=g===`munch`,te=e.filter(e=>e!==n).filter(e=>e.toLowerCase().includes(f.toLowerCase())),ne=()=>{!s||!u||!w&&!b||(w?i(s,u):r(s,u,m,b,ee),d(``),c(``),p(``),h(1),y(1),x(null),S(``))},re=e=>{c(e),p(``),y(w?3:2)};return(0,Z.jsxs)(`div`,{className:`space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500`,children:[(0,Z.jsxs)(`div`,{className:`md:hidden p-6 rounded-2xl shadow-lg shadow-pink-200 flex justify-between items-center transition-colors ${w?`bg-red-500 text-white`:`bg-pink-500 text-white`}`,children:[(0,Z.jsxs)(`div`,{children:[(0,Z.jsx)(`h2`,{className:`font-bold text-lg opacity-90`,children:w?`The Muncher`:`Daily Balance`}),(0,Z.jsx)(`p`,{className:`text-xs opacity-75`,children:w?`Feeding Time `:`Use them or lose them!`})]}),(0,Z.jsx)(`div`,{className:`text-4xl font-black`,children:C?``:a})]}),(0,Z.jsxs)(dv,{className:`space-y-4 transition-colors ${w?`border-red-200 bg-red-50`:``}`,children:[(0,Z.jsxs)(`div`,{className:`flex justify-between items-center`,children:[(0,Z.jsxs)(`div`,{className:`flex items-center gap-2 mb-2`,children:[w?(0,Z.jsx)(R_,{className:`text-red-500`,size:24}):(0,Z.jsx)(D_,{className:`text-pink-500`,size:24}),(0,Z.jsx)(`h2`,{className:`text-xl font-bold text-slate-800`,children:w?`Who lost a donut?`:`Who deserves a donut?`})]}),C&&(0,Z.jsxs)(`div`,{className:`flex bg-slate-100 rounded-lg p-1`,children:[(0,Z.jsx)(`button`,{onClick:()=>{_(`give`),y(1)},className:`px-3 py-1 rounded-md text-xs font-bold transition-all ${w?`text-slate-400`:`bg-white text-pink-500 shadow-sm`}`,children:` Give`}),(0,Z.jsx)(`button`,{onClick:()=>{_(`munch`),y(1)},className:`px-3 py-1 rounded-md text-xs font-bold transition-all ${w?`bg-white text-red-500 shadow-sm`:`text-slate-400`}`,children:` Munch`})]})]}),a===0&&!C&&!w?(0,Z.jsxs)(`div`,{className:`bg-slate-100 p-6 rounded-xl text-center text-slate-500`,children:[(0,Z.jsx)(`p`,{className:`text-lg font-medium`,children:`You're all out of donuts!`}),(0,Z.jsx)(`p`,{className:`text-sm`,children:`Come back tomorrow for a fresh batch.`})]}):(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)(`div`,{className:`space-y-2 ${v!==1&&`opacity-50 pointer-events-none`}`,children:[(0,Z.jsxs)(`label`,{className:`text-sm font-semibold text-slate-600 flex justify-between`,children:[(0,Z.jsx)(`span`,{children:`Step 1: Select Teammate`}),v>1&&(0,Z.jsx)(`button`,{onClick:()=>y(1),className:`text-pink-500 text-xs underline pointer-events-auto`,children:`Change`})]}),s?(0,Z.jsxs)(`div`,{className:`flex items-center justify-between p-3 bg-white border border-pink-200 rounded-xl`,children:[(0,Z.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,Z.jsx)(`div`,{className:`w-8 h-8 rounded-full flex items-center justify-center text-white text-xs font-bold`,style:{background:t.find(e=>e.name===s)?.avatar_color||`#cbd5e1`},children:s[0]}),(0,Z.jsx)(`span`,{className:`font-medium text-slate-800`,children:s})]}),v===1&&(0,Z.jsx)(`button`,{onClick:()=>c(``),className:`text-slate-400 hover:text-red-500`,children:(0,Z.jsx)(j_,{size:18})})]}):(0,Z.jsxs)(`div`,{className:`relative`,children:[(0,Z.jsx)(`input`,{className:`w-full p-3 pl-10 bg-white border border-slate-200 rounded-xl focus:ring-2 focus:ring-pink-500 outline-none`,placeholder:`Search name...`,value:f,onChange:e=>p(e.target.value)}),(0,Z.jsx)(G_,{className:`absolute left-3 top-3.5 text-slate-400`,size:18}),f&&(0,Z.jsxs)(`div`,{className:`absolute top-full left-0 right-0 mt-1 bg-white shadow-xl rounded-xl border border-slate-100 max-h-60 overflow-y-auto z-10 divide-y divide-slate-50`,children:[te.map(e=>{let n=t.find(t=>t.name===e),r=n?.avatar_color||`#cbd5e1`,i=n?.gold_border,a=n?.neon_name,o=n?.verified_badge;return(0,Z.jsxs)(`button`,{onClick:()=>re(e),className:`w-full text-left p-3 hover:bg-pink-50 flex items-center gap-3 transition-colors`,children:[(0,Z.jsx)(`div`,{className:`w-8 h-8 rounded-full flex items-center justify-center text-white text-xs font-bold ${i?`gold-border`:``}`,style:{background:r},children:e[0]}),(0,Z.jsxs)(`span`,{className:`flex items-center gap-1 ${a?`neon-text font-bold`:``}`,children:[e,o&&(0,Z.jsx)(`span`,{className:`text-blue-500 text-[10px]`,children:``})]})]},e)}),te.length===0&&(0,Z.jsx)(`div`,{className:`p-3 text-slate-400 text-sm`,children:`No users found`})]})]})]}),!w&&v>=2&&(0,Z.jsxs)(`div`,{className:`space-y-2 animate-in fade-in slide-in-from-top-2 duration-300 ${v!==2&&`opacity-50 pointer-events-none`}`,children:[(0,Z.jsxs)(`label`,{className:`text-sm font-semibold text-slate-600 flex justify-between`,children:[(0,Z.jsx)(`span`,{children:`Step 2: Select Value`}),v>2&&(0,Z.jsx)(`button`,{onClick:()=>y(2),className:`text-pink-500 text-xs underline pointer-events-auto`,children:`Change`})]}),(0,Z.jsx)(`div`,{className:`grid grid-cols-2 gap-2`,children:Object.values(o).map(e=>(0,Z.jsxs)(`button`,{onClick:()=>{x(e.id),S(``),y(3)},className:`p-3 rounded-xl border-2 text-left transition-all ${b===e.id?`${e.color} text-white border-transparent shadow-md scale-[1.02]`:`bg-white ${e.borderColor} ${e.textColor} hover:bg-slate-50`}`,children:[(0,Z.jsx)(`div`,{className:`text-xl mb-1`,children:e.icon}),(0,Z.jsx)(`div`,{className:`font-bold text-sm`,children:e.label})]},e.id))})]}),v>=3&&(0,Z.jsxs)(`div`,{className:`space-y-4 animate-in fade-in slide-in-from-top-2 duration-300`,children:[!w&&b&&(0,Z.jsxs)(`div`,{className:`space-y-2`,children:[(0,Z.jsx)(`label`,{className:`text-sm font-semibold text-slate-600`,children:`Step 3: Specific Virtue (Optional)`}),(0,Z.jsx)(`div`,{className:`flex flex-wrap gap-2`,children:o[b].virtues.map(e=>(0,Z.jsx)(`button`,{onClick:()=>S(e===ee?``:e),className:`px-3 py-1 rounded-full text-xs font-bold border transition-colors ${ee===e?`${o[b].color} text-white border-transparent`:`bg-white text-slate-600 border-slate-200 hover:border-slate-300`}`,children:e},e))})]}),(0,Z.jsxs)(`div`,{className:`space-y-2`,children:[(0,Z.jsx)(`label`,{className:`text-sm font-semibold text-slate-600`,children:`Message`}),(0,Z.jsx)(`textarea`,{className:`w-full p-3 bg-white border border-slate-200 rounded-xl focus:ring-2 focus:ring-pink-500 outline-none resize-none`,rows:3,placeholder:w?`Why did the Muncher strike?`:`Thanks for showing ${ee||o[b]?.label||`Values`} by...`,value:u,onChange:e=>d(e.target.value)})]}),C&&!w&&(0,Z.jsxs)(`div`,{className:`space-y-2`,children:[(0,Z.jsxs)(`label`,{className:`text-sm font-semibold text-slate-600 flex items-center gap-2`,children:[(0,Z.jsx)(q_,{size:16,className:`text-yellow-500`}),` Admin Multiplier`]}),(0,Z.jsx)(`div`,{className:`flex gap-2`,children:[1,2,5,10].map(e=>(0,Z.jsxs)(`button`,{onClick:()=>h(e),className:`flex-1 py-2 rounded-lg font-bold text-sm transition-all ${m===e?`bg-yellow-400 text-yellow-900 shadow-md scale-105`:`bg-slate-100 text-slate-500 hover:bg-slate-200`}`,children:[e,`x`]},e))})]}),(0,Z.jsxs)(fv,{onClick:ne,disabled:!s||!u||!w&&!b,className:`w-full py-3 text-lg`,variant:w?`danger`:`primary`,children:[w?`Feed The Muncher (1 ${ev})`:`Give ${m>1?`${m} ${ev}`:ev}`,!w&&(0,Z.jsx)(`span`,{className:`text-sm opacity-80 ml-1`,children:C?`( left)`:`(${a} left)`})]})]})]})]})]})}function Dv({transactions:e,onReact:t,coreValues:n}){return(0,Z.jsxs)(`div`,{className:`space-y-4 animate-in fade-in duration-500`,children:[(0,Z.jsx)(`h2`,{className:`text-xl font-bold text-slate-800 px-1`,children:`Recent Activity`}),e.length===0?(0,Z.jsxs)(`div`,{className:`text-center py-10 text-slate-400`,children:[(0,Z.jsx)(`p`,{className:`text-4xl mb-2`,children:``}),(0,Z.jsx)(`p`,{children:`No donuts given yet. Be the first!`})]}):e.map(e=>{e.amount;let r=e.fromName===`The Donut Muncher`,i=e.value&&n?n[e.value]:null;return(0,Z.jsxs)(dv,{className:`relative overflow-hidden ${r?`bg-red-50 border-red-100`:``}`,children:[i&&(0,Z.jsxs)(`div`,{className:`${i.lightColor} border-b ${i.borderColor} p-2 px-4 flex items-center gap-2 -mx-6 -mt-6 mb-4`,children:[(0,Z.jsx)(`span`,{className:`text-lg`,children:i.icon}),(0,Z.jsx)(`span`,{className:`text-xs font-black uppercase tracking-wider ${i.textColor}`,children:i.label}),e.virtue&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(`span`,{className:`${i.textColor} opacity-40`,children:``}),(0,Z.jsx)(`span`,{className:`text-xs font-bold ${i.textColor}`,children:e.virtue})]})]}),(0,Z.jsxs)(`div`,{className:`flex gap-4`,children:[(0,Z.jsx)(`div`,{className:`flex-shrink-0 mt-1 p-2 rounded-full h-10 w-10 flex items-center justify-center text-lg shadow-sm ${r?`bg-red-100 text-red-500`:`bg-pink-100 text-pink-500`}`,children:e.emoji||ev}),(0,Z.jsxs)(`div`,{className:`flex-grow pb-6`,children:[(0,Z.jsxs)(`div`,{className:`flex flex-wrap items-baseline gap-x-1 mb-1`,children:[(0,Z.jsx)(`span`,{className:`font-bold text-slate-900`,children:e.fromName}),e.toName===`Frosted Friday`||e.toName===`EVERYONE`||e.toName===`The Shop`||e.fromName===`Job Board`||e.fromName===`Goal`||e.toName===`Team Goal`?(0,Z.jsx)(`span`,{className:`text-slate-500 text-sm ml-1`,children:e.message.includes(`activated`)?`announced`:e.message.includes(`Purchased`)?`went shopping`:e.emoji===``?`announced`:`contributed to`}):r?(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(`span`,{className:`text-red-500 text-sm mx-1 font-bold`,children:`ATE a donut from`}),(0,Z.jsx)(`span`,{className:`font-bold text-slate-900`,children:e.toName})]}):(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(`span`,{className:`text-slate-400 text-sm mx-1`,children:`recognized`}),(0,Z.jsx)(`span`,{className:`font-bold text-slate-900`,children:e.toName})]})]}),(0,Z.jsxs)(`p`,{className:`p-2 rounded-lg border italic text-sm ${r?`text-red-700 bg-red-100 border-red-200`:`text-slate-700 bg-slate-50 border-slate-100`}`,children:[`"`,e.message,`"`]}),(0,Z.jsx)(`p`,{className:`text-xs text-slate-400 mt-2 text-right`,children:e.timestamp?new Date(e.timestamp.toDate()).toLocaleString():`Just now`}),(0,Z.jsxs)(`button`,{onClick:()=>t(e.id,e.likes),className:`absolute bottom-3 left-16 text-xs bg-white hover:bg-orange-50 border border-slate-200 px-2 py-1 rounded-full flex items-center gap-1 transition-colors`,children:[(0,Z.jsx)(T_,{size:12,className:e.likes?.length?`text-orange-500 fill-orange-500`:`text-slate-400`}),(0,Z.jsx)(`span`,{className:e.likes?.length?`text-orange-600 font-bold`:`text-slate-500`,children:e.likes?.length||0})]})]})]})]},e.id)})]})}function Ov({users:e,roster:t}){let n=t.map(t=>{let n=e.find(e=>e.name===t);return{name:t,balance:n?n.balance:0,avatar_color:n?n.avatar_color:`#cbd5e1`,rainbow_name:n?n.rainbow_name:!1,gold_border:n?n.gold_border:!1,silver_border:n?n.silver_border:!1,neon_name:n?n.neon_name:!1,flame_name:n?n.flame_name:!1,verified_badge:n?n.verified_badge:!1,perfectionist_badge:n?n.perfectionist_badge:!1,typing_license:n?n.typing_license:!1,lifetime_received:n?n.lifetime_received:0,lifetime_given:n?n.lifetime_given:0}}).filter(e=>e.name!==`Mr Rayner`).sort((e,t)=>t.lifetime_given-e.lifetime_given);return(0,Z.jsxs)(`div`,{className:`space-y-4 animate-in fade-in duration-500`,children:[(0,Z.jsxs)(`div`,{className:`flex justify-between items-end px-1`,children:[(0,Z.jsx)(`h2`,{className:`text-xl font-bold text-slate-800`,children:`Leaderboard`}),(0,Z.jsx)(`span`,{className:`text-xs font-medium bg-pink-100 text-pink-600 px-2 py-1 rounded-full`,children:`All Time`})]}),(0,Z.jsx)(`div`,{className:`bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden`,children:n.map((e,t)=>{let n=uv(e.lifetime_given||0);return(0,Z.jsxs)(`div`,{className:`flex items-center p-4 border-b border-slate-50 hover:bg-slate-50 transition-colors last:border-none`,children:[(0,Z.jsx)(`div`,{className:`w-8 font-bold text-slate-400 text-center flex-shrink-0`,children:t===0?``:t===1?``:t===2?``:t+1}),(0,Z.jsx)(`div`,{className:`mx-4`,children:(0,Z.jsx)(`div`,{className:`w-10 h-10 rounded-full flex items-center justify-center text-white font-bold shadow-sm ${e.gold_border?`gold-border`:e.silver_border?`silver-border`:``}`,style:{background:e.avatar_color},children:e.name[0]})}),(0,Z.jsxs)(`div`,{className:`flex-grow min-w-0`,children:[(0,Z.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,Z.jsx)(`p`,{className:`font-bold truncate ${e.flame_name?`flame-text`:e.rainbow_name?`animate-text-rainbow bg-clip-text text-transparent bg-gradient-to-r from-purple-400 via-pink-500 to-red-500`:e.neon_name?`neon-text`:`text-slate-800`}`,children:e.name}),e.verified_badge&&(0,Z.jsx)(`span`,{className:`text-blue-500 text-xs`,title:`Verified`,children:``}),e.perfectionist_badge&&(0,Z.jsx)(`span`,{className:`text-red-500 text-xs`,title:`Perfectionist`,children:``}),e.typing_license&&(0,Z.jsx)(`span`,{className:`text-slate-500 text-[10px] flex items-center`,title:`Typing License`,children:``}),(0,Z.jsxs)(`span`,{className:`text-[10px] bg-slate-100 px-1.5 rounded text-slate-500`,title:`Given: ${e.lifetime_given||0}`,children:[n.icon,` `,n.title]})]}),(0,Z.jsxs)(`p`,{className:`text-xs text-slate-500`,children:[e.balance,` donuts available`]})]}),(0,Z.jsxs)(`div`,{className:`text-right pl-2 flex flex-col items-center`,children:[(0,Z.jsxs)(`div`,{className:`inline-flex items-center bg-pink-50 text-pink-600 px-3 py-1 rounded-full font-bold`,children:[e.lifetime_given||0,` `,ev]}),(0,Z.jsx)(`span`,{className:`text-[10px] text-slate-400 font-medium mt-0.5`,children:`Given`})]})]},e.name)})})]})}(0,c.createRoot)(document.getElementById(`root`)).render((0,Z.jsx)(l.StrictMode,{children:(0,Z.jsx)(vv,{})}));